<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Gemforce Team" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Deployer Guide - Gemforce Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Deployer Guide";
        var mkdocs_page_input_path = "gemforce-deployer-guide.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Gemforce Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../developer-setup-guide/">Developer Setup Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../system-architecture/gemforce-system-architecture/">System Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Contracts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../smart-contracts/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../smart-contracts/diamond/">Diamond Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Facets</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/marketplace-facet/">Marketplace Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/trade-deal-management-facet/">Trade Deal Management Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/carbon-credit-facet/">Carbon Credit Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/identity-registry-facet/">Identity Registry Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/trusted-issuers-registry-facet/">Trusted Issuers Registry Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/fee-distributor-facet/">Fee Distributor Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/gemforce-minter-facet/">Gemforce Minter Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/multi-sale-facet/">Multi Sale Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/svg-templates-facet/">SVG Templates Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/trade-deal-admin-facet/">Trade Deal Admin Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/trade-deal-operations-facet/">Trade Deal Operations Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/facets/collateral-token-factory-facet/">Collateral Token Factory Facet</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Interfaces</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/idiamond/">IDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/imarketplace/">IMarketplace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/itradedeal/">ITradeDeal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/icarbon-credit/">ICarbonCredit</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/ierc1155-mint/">IERC1155Mint</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/ierc734/">IERC734</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/interfaces/ierc735/">IERC735</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Libraries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/carbon-credit-lib/">Carbon Credit Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/trade-deal-lib/">Trade Deal Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/multi-sale-lib/">Multi Sale Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/diamond-factory-lib/">Diamond Factory Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/svg-templates-lib/">SVG Templates Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/attribute-lib/">Attribute Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/variable-price-lib/">Variable Price Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/merkle-prover/">Merkle Prover</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/fee-distributor-lib/">Fee Distributor Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/lib-diamond/">LibDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/diamond-lib/">DiamondLib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/erc721a-lib/">ERC721A Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/erc721a-enumeration-lib/">ERC721A Enumeration Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/strings-lib/">Strings Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/metadata-lib/">Metadata Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/trusted-issuer-lib/">Trusted Issuer Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../smart-contracts/libraries/set-libraries/">Set Libraries</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Functions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-functions/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-functions/blockchain/">Blockchain Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-functions/dfns/">DFNS Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-functions/contracts/">Contract Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-functions/authentication/">Authentication Functions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api-documentation/gemforce-api-documentation/">Full API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api-documentation/gemforce-api-quick-reference/">Quick Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EIPs (Ethereum Improvement Proposals)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/EIP-DRAFT-Diamond-Enhanced-Marketplace/">Diamond-Enhanced Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/EIP-DRAFT-Multi-Token-Sale-Standard/">Multi-Token Sale Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/EIP-DRAFT-Collateralized-Trade-Deal-Standard/">Collateralized Trade Deal Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/EIP-DRAFT-Enhanced-Identity-System/">Enhanced Identity System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/EIP-DRAFT-Diamond-Factory-Standard/">Diamond Factory Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eips/EIP-DRAFT-Carbon-Credit-Standard/">Carbon Credit Standard</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guides</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../gemforce-administrator-guide/">Administrator Guide</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Deployer Guide</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#table-of-contents">Table of Contents</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#deployment-prerequisites">Deployment Prerequisites</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#development-environment-setup">Development Environment Setup</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#required-tools-and-software">Required Tools and Software</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#network-access-requirements">Network Access Requirements</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#key-management-setup">Key Management Setup</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#environment-preparation">Environment Preparation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#smart-contract-deployment">Smart Contract Deployment</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#contract-compilation">Contract Compilation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#diamond-pattern-deployment-workflow">Diamond Pattern Deployment Workflow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#facet-deployment-process">Facet Deployment Process</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contract-initialization">Contract Initialization</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contract-verification">Contract Verification</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gas-optimization-strategies">Gas Optimization Strategies</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cloud-functions-deployment">Cloud Functions Deployment</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#parse-server-deployment">Parse Server Deployment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cloud-function-deployment">Cloud Function Deployment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#environment-configuration">Environment Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#database-migration">Database Migration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#websocket-setup">WebSocket Setup</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#environment-configuration_1">Environment Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#development-environment">Development Environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#testing-environment">Testing Environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#staging-environment">Staging Environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#production-environment">Production Environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#environment-specific-settings">Environment-Specific Settings</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#deployment-automation">Deployment Automation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cicd-pipeline-setup">CI/CD Pipeline Setup</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#automated-testing">Automated Testing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deployment-scripts">Deployment Scripts</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#infrastructure-as-code">Infrastructure as Code</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#continuous-monitoring">Continuous Monitoring</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#upgrade-procedures">Upgrade Procedures</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#smart-contract-upgrades">Smart Contract Upgrades</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cloud-function-updates">Cloud Function Updates</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#database-schema-migrations">Database Schema Migrations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#backward-compatibility-considerations">Backward Compatibility Considerations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#feature-flagging">Feature Flagging</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rollback-procedures">Rollback Procedures</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#smart-contract-rollbacks">Smart Contract Rollbacks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cloud-function-rollbacks">Cloud Function Rollbacks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#database-rollbacks">Database Rollbacks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#emergency-procedures">Emergency Procedures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#data-integrity-verification">Data Integrity Verification</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#testing-and-verification">Testing and Verification</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#unit-testing">Unit Testing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#integration-testing">Integration Testing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contract-verification_1">Contract Verification</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#load-testing">Load Testing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security-testing">Security Testing</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#network-management">Network Management</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#blockchain-node-management">Blockchain Node Management</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rpc-endpoint-configuration">RPC Endpoint Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#transaction-monitoring">Transaction Monitoring</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gas-price-management">Gas Price Management</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#network-upgrades-handling">Network Upgrades Handling</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#version-control">Version Control</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#repository-structure">Repository Structure</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#branching-strategy">Branching Strategy</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#release-management">Release Management</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tagging-conventions">Tagging Conventions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#documentation-versioning">Documentation Versioning</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gemforce-integrator-guide/">Integrator Guide</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../external-services/gemforce-external-services/">External Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../gemforce-documentation-gap-analysis/">Documentation Gap Analysis</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../documentation-progress-summary/">Documentation Progress Summary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../documentation-plan/">Documentation Plan</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Gemforce Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">User Guides</li>
      <li class="breadcrumb-item active">Deployer Guide</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="gemforce-deployer-guide">Gemforce Deployer Guide<a class="headerlink" href="#gemforce-deployer-guide" title="Permanent link">&para;</a></h1>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#deployment-prerequisites">Deployment Prerequisites</a></li>
<li><a href="#smart-contract-deployment">Smart Contract Deployment</a></li>
<li><a href="#cloud-functions-deployment">Cloud Functions Deployment</a></li>
<li><a href="#environment-configuration">Environment Configuration</a></li>
<li><a href="#deployment-automation">Deployment Automation</a></li>
<li><a href="#upgrade-procedures">Upgrade Procedures</a></li>
<li><a href="#rollback-procedures">Rollback Procedures</a></li>
<li><a href="#testing-and-verification">Testing and Verification</a></li>
<li><a href="#network-management">Network Management</a></li>
<li><a href="#version-control">Version Control</a></li>
</ul>
<h2 id="deployment-prerequisites">Deployment Prerequisites<a class="headerlink" href="#deployment-prerequisites" title="Permanent link">&para;</a></h2>
<h3 id="development-environment-setup">Development Environment Setup<a class="headerlink" href="#development-environment-setup" title="Permanent link">&para;</a></h3>
<p>To deploy the Gemforce platform, you'll need the following tools and software:</p>
<ol>
<li><strong>Node.js and npm</strong>:</li>
<li>Node.js v16 or later</li>
<li>npm v7 or later</li>
</ol>
<p>```bash
   # Install using nvm (recommended)
   nvm install 16
   nvm use 16</p>
<p># Verify installation
   node -v
   npm -v
   ```</p>
<ol>
<li><strong>Hardhat</strong>:</li>
<li>Used for smart contract development and deployment</li>
</ol>
<p>```bash
   # Install hardhat
   npm install --save-dev hardhat</p>
<p># Verify installation
   npx hardhat --version
   ```</p>
<ol>
<li><strong>MongoDB</strong>:</li>
<li>Version 4.4 or later</li>
<li>Required for Parse Server</li>
</ol>
<p>```bash
   # Installation varies by OS
   # macOS (using Homebrew)
   brew install mongodb-community</p>
<p># Verify installation
   mongod --version
   ```</p>
<ol>
<li><strong>Git</strong>:</li>
<li>For version control</li>
</ol>
<p><code>bash
   # Verify installation
   git --version</code></p>
<ol>
<li><strong>TypeScript</strong>:</li>
<li>Latest version</li>
</ol>
<p>```bash
   # Install TypeScript
   npm install -g typescript</p>
<p># Verify installation
   tsc --version
   ```</p>
<h3 id="required-tools-and-software">Required Tools and Software<a class="headerlink" href="#required-tools-and-software" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Development IDE</strong>:</li>
<li>Visual Studio Code (recommended)</li>
<li>
<p>Plugins:</p>
<ul>
<li>Solidity</li>
<li>TypeScript</li>
<li>ESLint</li>
<li>Prettier</li>
</ul>
</li>
<li>
<p><strong>Blockchain Tools</strong>:</p>
</li>
<li>MetaMask or similar wallet</li>
<li>Etherscan account (for contract verification)</li>
<li>
<p>Infura or Alchemy account (for RPC endpoints)</p>
</li>
<li>
<p><strong>Deployment Tools</strong>:</p>
</li>
<li>PM2 (for process management)</li>
<li>Docker (optional, for containerized deployment)</li>
</ol>
<p>```bash
   # Install PM2
   npm install -g pm2</p>
<p># Verify installation
   pm2 --version
   ```</p>
<ol>
<li><strong>Database Tools</strong>:</li>
<li>MongoDB Compass (GUI for MongoDB)</li>
<li>MongoDB Database Tools (mongodump, mongorestore)</li>
</ol>
<h3 id="network-access-requirements">Network Access Requirements<a class="headerlink" href="#network-access-requirements" title="Permanent link">&para;</a></h3>
<p>Ensure your deployment environment has access to:</p>
<ol>
<li><strong>Blockchain Networks</strong>:</li>
<li>Ethereum Mainnet (if deploying to production)</li>
<li>BaseSepolia (for testing)</li>
<li>
<p>Other EVM-compatible networks as needed</p>
</li>
<li>
<p><strong>External APIs</strong>:</p>
</li>
<li>DFNS API</li>
<li>Bridge API</li>
<li>
<p>SendGrid API</p>
</li>
<li>
<p><strong>Database Access</strong>:</p>
</li>
<li>MongoDB server (local or hosted)</li>
<li>
<p>Redis (if using for caching)</p>
</li>
<li>
<p><strong>Github/Version Control</strong>:</p>
</li>
<li>Access to Gemforce repositories</li>
</ol>
<h3 id="key-management-setup">Key Management Setup<a class="headerlink" href="#key-management-setup" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Create a secure key management strategy</strong>:</li>
</ol>
<p><code>bash
   # Create a directory for keys (outside of repository)
   mkdir -p ~/.gemforce/keys
   chmod 700 ~/.gemforce/keys</code></p>
<ol>
<li><strong>Generate deployment keys</strong>:</li>
</ol>
<p>```bash
   # Generate a private key for deployment
   openssl genpkey -algorithm RSA -out ~/.gemforce/keys/deployment_key.pem -pkeyopt rsa_keygen_bits:2048
   chmod 600 ~/.gemforce/keys/deployment_key.pem</p>
<p># Generate a DFNS private key
   openssl genpkey -algorithm RSA -out ~/.gemforce/keys/dfns_private.key -pkeyopt rsa_keygen_bits:2048
   chmod 600 ~/.gemforce/keys/dfns_private.key
   ```</p>
<ol>
<li><strong>Use environment files for sensitive data</strong>:</li>
</ol>
<p>```bash
   # Create a .env file for local development
   cp .env.example .env</p>
<p># Edit to add your keys and endpoints
   nano .env
   ```</p>
<h3 id="environment-preparation">Environment Preparation<a class="headerlink" href="#environment-preparation" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Clone the repository</strong>:</li>
</ol>
<p><code>bash
   git clone https://github.com/your-org/gemforce.git
   cd gemforce</code></p>
<ol>
<li><strong>Install dependencies</strong>:</li>
</ol>
<p><code>bash
   npm install</code></p>
<ol>
<li><strong>Set up environment files</strong>:</li>
</ol>
<p>```bash
   # Copy sample environment files
   cp .env.example .env
   cp gemforce.config.example.ts gemforce.config.ts</p>
<p># Edit the files with your configuration
   nano .env
   nano gemforce.config.ts
   ```</p>
<ol>
<li><strong>Create deployment directories</strong>:</li>
</ol>
<p><code>bash
   mkdir -p deployments</code></p>
<h2 id="smart-contract-deployment">Smart Contract Deployment<a class="headerlink" href="#smart-contract-deployment" title="Permanent link">&para;</a></h2>
<h3 id="contract-compilation">Contract Compilation<a class="headerlink" href="#contract-compilation" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Compile contracts using Hardhat</strong>:</li>
</ol>
<p><code>bash
   npx hardhat compile</code></p>
<ol>
<li><strong>Verify compilation output</strong>:</li>
<li>Check for successful compilation in <code>artifacts/</code> directory</li>
<li>
<p>Resolve any compilation errors</p>
</li>
<li>
<p><strong>Configuration for different networks</strong>:</p>
</li>
</ol>
<p><code>javascript
   // hardhat.config.ts
   module.exports = {
     solidity: {
       version: "0.8.17",
       settings: {
         optimizer: {
           enabled: true,
           runs: 200
         }
       }
     },
     networks: {
       hardhat: {
         chainId: 31337
       },
       baseSepolia: {
         url: `https://sepolia.base.org`,
         accounts: [process.env.PRIVATE_KEY],
         chainId: 84532
       },
       mainnet: {
         url: `https://mainnet.infura.io/v3/${process.env.INFURA_KEY}`,
         accounts: [process.env.PRIVATE_KEY],
         chainId: 1
       }
     }
   };</code></p>
<h3 id="diamond-pattern-deployment-workflow">Diamond Pattern Deployment Workflow<a class="headerlink" href="#diamond-pattern-deployment-workflow" title="Permanent link">&para;</a></h3>
<p>The Gemforce platform uses the Diamond pattern (EIP-2535) for smart contract deployment:</p>
<ol>
<li><strong>Deploy libraries first</strong>:</li>
</ol>
<p><code>bash
   npx hardhat deploy --tags Libraries --network baseSepolia</code></p>
<ol>
<li><strong>Deploy facets</strong>:</li>
</ol>
<p><code>bash
   npx hardhat deploy --tags Facets --network baseSepolia</code></p>
<ol>
<li><strong>Deploy Diamond contract</strong>:</li>
</ol>
<p><code>bash
   npx hardhat deploy --tags Diamond --network baseSepolia</code></p>
<ol>
<li><strong>Verify the deployment</strong>:</li>
</ol>
<p><code>bash
   npx hardhat verify --network baseSepolia &lt;DIAMOND_ADDRESS&gt;</code></p>
<h3 id="facet-deployment-process">Facet Deployment Process<a class="headerlink" href="#facet-deployment-process" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Develop new facets</strong> in the <code>/contracts/facets</code> directory</li>
<li><strong>Add to deployment scripts</strong> in <code>/deploy</code> directory</li>
<li><strong>Set up facet cut data</strong> for the Diamond contract:</li>
</ol>
<p><code>javascript
   // Example facet cut data
   const facetCuts = [
     {
       facetAddress: newFacetAddress,
       action: FacetCutAction.Add,
       functionSelectors: selectors
     }
   ];</code></p>
<ol>
<li><strong>Update the Diamond</strong> with new facets:</li>
</ol>
<p><code>javascript
   // Using the DiamondFactory
   await diamondFactory.setFacets(setName, facetCuts);</code></p>
<h3 id="contract-initialization">Contract Initialization<a class="headerlink" href="#contract-initialization" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Prepare initialization data</strong>:</li>
</ol>
<p><code>javascript
   // Example initialization data
   const initData = diamondInit.interface.encodeFunctionData("init", [
     [
       // Initial parameters
       tokenName,
       tokenSymbol,
       baseURI,
       // ...other params
     ]
   ]);</code></p>
<ol>
<li><strong>Initialize the Diamond</strong>:</li>
</ol>
<p>```javascript
   const settings = {
     name: "Gemforce Token",
     symbol: "GEM",
     // other settings
   };</p>
<p>await diamondFactory.createFromSet(
     settings,
     diamondInit.address,
     initData,
     "defaultFacetSet"
   );
   ```</p>
<h3 id="contract-verification">Contract Verification<a class="headerlink" href="#contract-verification" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Verify Diamond contract on Etherscan/Basescan</strong>:</li>
</ol>
<p><code>bash
   npx hardhat verify --network baseSepolia &lt;DIAMOND_ADDRESS&gt;</code></p>
<ol>
<li><strong>Verify individual facets</strong>:</li>
</ol>
<p><code>bash
   npx hardhat verify --network baseSepolia &lt;FACET_ADDRESS&gt;</code></p>
<ol>
<li><strong>Manual verification</strong> (if automatic verification fails):</li>
<li>Flatten the contract using Hardhat</li>
<li>Upload the flattened contract to the block explorer</li>
<li>Verify with the correct compiler settings</li>
</ol>
<h3 id="gas-optimization-strategies">Gas Optimization Strategies<a class="headerlink" href="#gas-optimization-strategies" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Use optimized Solidity patterns</strong>:</li>
<li>Minimize storage operations</li>
<li>Batch operations where possible</li>
<li>
<p>Use efficient data structures</p>
</li>
<li>
<p><strong>Configure gas prices for deployment</strong>:</p>
</li>
</ol>
<p><code>javascript
   // Example configuration for gas
   const tx = await contract.functionName(params, {
     gasPrice: (await ethers.provider.getGasPrice()).mul(2), // 2x current gas price
     gasLimit: 5000000
   });</code></p>
<ol>
<li><strong>Monitor gas usage during testing</strong>:</li>
</ol>
<p><code>javascript
   // Add gas reporter to Hardhat config
   gasReporter: {
     enabled: true,
     currency: 'USD',
     gasPrice: 100,
     coinmarketcap: process.env.COINMARKETCAP_API_KEY
   }</code></p>
<h2 id="cloud-functions-deployment">Cloud Functions Deployment<a class="headerlink" href="#cloud-functions-deployment" title="Permanent link">&para;</a></h2>
<h3 id="parse-server-deployment">Parse Server Deployment<a class="headerlink" href="#parse-server-deployment" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Prepare Parse Server configuration</strong>:</li>
</ol>
<p><code>javascript
   // Example Parse Server configuration
   const parseServerConfig = {
     appId: process.env.APP_ID,
     masterKey: process.env.MASTER_KEY,
     databaseURI: process.env.DATABASE_URI,
     serverURL: process.env.SERVER_URL,
     cloud: "./dist/src/cloud-functions.js",
     allowClientClassCreation: false,
     enableAnonymousUsers: false,
     maxUploadSize: "20mb",
     // ... other configuration
   };</code></p>
<ol>
<li><strong>Deploy Parse Server</strong>:</li>
</ol>
<p>Using PM2:</p>
<p>```bash
   # Start Parse Server with PM2
   pm2 start app.js --name gemforce-server</p>
<p># Save PM2 configuration
   pm2 save</p>
<p># Set up PM2 to start on system boot
   pm2 startup
   ```</p>
<p>Using Docker:</p>
<p>```bash
   # Build Docker image
   docker build -t gemforce-server .</p>
<p># Run container
   docker run -d -p 1337:1337 \
     --env-file .env \
     --name gemforce-server \
     gemforce-server
   ```</p>
<ol>
<li><strong>Verify Parse Server deployment</strong>:</li>
</ol>
<p>```bash
   # Check server status
   curl https://your-server-url.com/parse/health</p>
<p># Expected response: {"status":"ok"}
   ```</p>
<h3 id="cloud-function-deployment">Cloud Function Deployment<a class="headerlink" href="#cloud-function-deployment" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Compile TypeScript files</strong>:</li>
</ol>
<p><code>bash
   # Build the project
   npm run build</code></p>
<ol>
<li><strong>Deploy cloud functions</strong>:</li>
</ol>
<p>If using PM2:</p>
<p><code>bash
   # Restart the server to apply changes
   pm2 restart gemforce-server</code></p>
<p>If using Docker:</p>
<p><code>bash
   # Rebuild and redeploy
   docker build -t gemforce-server .
   docker stop gemforce-server
   docker rm gemforce-server
   docker run -d -p 1337:1337 \
     --env-file .env \
     --name gemforce-server \
     gemforce-server</code></p>
<ol>
<li><strong>Verify cloud function deployment</strong>:</li>
</ol>
<p><code>bash
   # Test a simple cloud function
   curl -X POST \
     -H "X-Parse-Application-Id: ${APP_ID}" \
     -H "Content-Type: application/json" \
     -d '{}' \
     https://your-server-url.com/parse/functions/loadAllBlockchains</code></p>
<h3 id="environment-configuration">Environment Configuration<a class="headerlink" href="#environment-configuration" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Set environment variables</strong>:</li>
</ol>
<p>```bash
   # Set environment variables in .env file
   cat &gt; .env &lt;&lt; EOL
   # Parse Server
   APP_ID=your_app_id
   MASTER_KEY=your_master_key
   DATABASE_URI=mongodb://username:password@host:port/database
   SERVER_URL=https://your-server-url.com/parse</p>
<p># Blockchain
   ETH_NODE_URI_BASESEP=https://sepolia.base.org
   CHAIN_ID=base-sepolia
   PRIVATE_KEY=your_private_key</p>
<p># External Services
   DFNS_APP_ID=your_dfns_app_id
   DFNS_API_URL=https://api.dfns.io
   DFNS_CRED_ID=your_dfns_credential_id</p>
<p># Additional Configuration
   METADATA_BASE_URI=https://metadata.gemforce.com/
   EOL
   ```</p>
<ol>
<li><strong>Configure database</strong>:</li>
<li>Set up MongoDB</li>
<li>Create database user</li>
<li>
<p>Configure connection string</p>
</li>
<li>
<p><strong>Set up web server</strong> (nginx example):</p>
</li>
</ol>
<p>```nginx
   # /etc/nginx/sites-available/gemforce
   server {
       listen 80;
       server_name api.gemforce.com;</p>
<div class="codehilite"><pre><span></span><code>   location / {
       return 301 https://$host$request_uri;
   }
</code></pre></div>

<p>}</p>
<p>server {
       listen 443 ssl;
       server_name api.gemforce.com;</p>
<div class="codehilite"><pre><span></span><code>   ssl_certificate /etc/letsencrypt/live/api.gemforce.com/fullchain.pem;
   ssl_certificate_key /etc/letsencrypt/live/api.gemforce.com/privkey.pem;

   location / {
       proxy_pass http://localhost:1337;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection &#39;upgrade&#39;;
       proxy_set_header Host $host;
       proxy_cache_bypass $http_upgrade;
   }
</code></pre></div>

<p>}
   ```</p>
<h3 id="database-migration">Database Migration<a class="headerlink" href="#database-migration" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Create database migrations</strong>:</li>
</ol>
<p>```javascript
   // Example migration script (migrations/001_add_indexes.js)
   async function up(db) {
     await db.collection('User').createIndex({ walletAddress: 1 });
     await db.collection('Identity').createIndex({ walletAddress: 1 }, { unique: true });
     await db.collection('Transaction').createIndex({ hash: 1 }, { unique: true });
   }</p>
<p>async function down(db) {
     await db.collection('User').dropIndex({ walletAddress: 1 });
     await db.collection('Identity').dropIndex({ walletAddress: 1 });
     await db.collection('Transaction').dropIndex({ hash: 1 });
   }</p>
<p>module.exports = { up, down };
   ```</p>
<ol>
<li><strong>Run migrations</strong>:</li>
</ol>
<p><code>bash
   # Example using a simple migration tool
   npx migrate-mongo up</code></p>
<ol>
<li><strong>Verify migrations</strong>:</li>
</ol>
<p><code>javascript
   // Check indexes
   db.User.getIndexes()
   db.Identity.getIndexes()
   db.Transaction.getIndexes()</code></p>
<h3 id="websocket-setup">WebSocket Setup<a class="headerlink" href="#websocket-setup" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Configure WebSocket endpoints</strong>:</li>
</ol>
<p>```javascript
   // Example WebSocket server setup
   const wss = new WebSocketServer({ 
     server: httpServer,
     path: "/ws"
   });</p>
<p>wss.on('connection', (ws) =&gt; {
     // Handle connection
     ws.on('message', (message) =&gt; {
       // Handle message
     });</p>
<div class="codehilite"><pre><span></span><code> ws.on(&#39;close&#39;, () =&gt; {
   // Handle disconnection
 });
</code></pre></div>

<p>});
   ```</p>
<ol>
<li><strong>Set up blockchain event listeners</strong>:</li>
</ol>
<p>```javascript
   // Example blockchain event listener
   function setupEventListeners(provider, diamondAddress) {
     const diamond = new ethers.Contract(
       diamondAddress,
       DiamondABI,
       provider
     );</p>
<div class="codehilite"><pre><span></span><code> diamond.on(&quot;Transfer&quot;, (from, to, tokenId) =&gt; {
   // Handle transfer event
   // Broadcast to connected WebSocket clients
   wss.clients.forEach((client) =&gt; {
     if (client.readyState === WebSocket.OPEN) {
       client.send(JSON.stringify({
         event: &quot;Transfer&quot;,
         data: { from, to, tokenId: tokenId.toString() }
       }));
     }
   });
 });
</code></pre></div>

<p>}
   ```</p>
<h2 id="environment-configuration_1">Environment Configuration<a class="headerlink" href="#environment-configuration_1" title="Permanent link">&para;</a></h2>
<h3 id="development-environment">Development Environment<a class="headerlink" href="#development-environment" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Local environment setup</strong>:</li>
</ol>
<p>```bash
   # Start local hardhat node
   npx hardhat node</p>
<p># Deploy contracts to local node
   npx hardhat deploy --network localhost</p>
<p># Start Parse Server locally
   npm run dev
   ```</p>
<ol>
<li><strong>Environment configuration file for development</strong>:</li>
</ol>
<p>```
   # .env.development
   APP_ID=gemforce_dev
   MASTER_KEY=your_dev_master_key
   DATABASE_URI=mongodb://localhost:27017/gemforce_dev
   SERVER_URL=http://localhost:1337/parse</p>
<p># Use local hardhat node
   ETH_NODE_URI_LOCAL=http://localhost:8545
   CHAIN_ID=31337</p>
<p># Development keys
   PRIVATE_KEY=your_dev_private_key
   ```</p>
<ol>
<li><strong>Development database setup</strong>:</li>
</ol>
<p>```bash
   # Start MongoDB locally
   mongod --dbpath ./data</p>
<p># Create database and user
   mongo</p>
<blockquote>
<p>use gemforce_dev
db.createUser({
       user: "gemforce_user",
       pwd: "password",
       roles: [{ role: "readWrite", db: "gemforce_dev" }]
     })
   ```</p>
</blockquote>
<h3 id="testing-environment">Testing Environment<a class="headerlink" href="#testing-environment" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Testing environment configuration</strong>:</li>
</ol>
<p>```
   # .env.test
   APP_ID=gemforce_test
   MASTER_KEY=your_test_master_key
   DATABASE_URI=mongodb://localhost:27017/gemforce_test
   SERVER_URL=http://localhost:1337/parse</p>
<p># Use BaseSepolia for testing
   ETH_NODE_URI_BASESEP=https://sepolia.base.org
   CHAIN_ID=84532</p>
<p># Test keys
   PRIVATE_KEY=your_test_private_key
   ```</p>
<ol>
<li><strong>Automated testing setup</strong>:</li>
</ol>
<p>```bash
   # Run tests
   npm test</p>
<p># Run specific tests
   npx mocha test/specific-test.js
   ```</p>
<ol>
<li><strong>Test database initialization</strong>:</li>
</ol>
<p><code>javascript
   // Initialize test database
   before(async () =&gt; {
     const client = await MongoClient.connect(process.env.DATABASE_URI);
     const db = client.db();
     await db.collection('User').deleteMany({});
     await db.collection('Identity').deleteMany({});
     // Seed with test data
     await db.collection('User').insertMany(testUsers);
   });</code></p>
<h3 id="staging-environment">Staging Environment<a class="headerlink" href="#staging-environment" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Staging environment configuration</strong>:</li>
</ol>
<p>```
   # .env.staging
   APP_ID=gemforce_staging
   MASTER_KEY=your_staging_master_key
   DATABASE_URI=mongodb://user:password@staging-db:27017/gemforce_staging
   SERVER_URL=https://staging-api.gemforce.com/parse</p>
<p># Use BaseSepolia for staging
   ETH_NODE_URI_BASESEP=https://sepolia.base.org
   CHAIN_ID=84532</p>
<p># Staging keys
   PRIVATE_KEY=your_staging_private_key
   ```</p>
<ol>
<li><strong>Staging deployment</strong>:</li>
</ol>
<p>```bash
   # Deploy to staging
   npm run deploy:staging</p>
<p># Run database migrations
   npm run migrate:staging
   ```</p>
<ol>
<li><strong>Staging verification</strong>:</li>
</ol>
<p><code>bash
   # Verify staging deployment
   curl https://staging-api.gemforce.com/parse/health</code></p>
<h3 id="production-environment">Production Environment<a class="headerlink" href="#production-environment" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Production environment configuration</strong>:</li>
</ol>
<p>```
   # .env.production
   APP_ID=gemforce_prod
   MASTER_KEY=your_production_master_key
   DATABASE_URI=mongodb://user:password@production-db:27017/gemforce_production
   SERVER_URL=https://api.gemforce.com/parse</p>
<p># Use production endpoints
   ETH_NODE_URI_MAINNET=https://mainnet.infura.io/v3/your_infura_key
   CHAIN_ID=1</p>
<p># Production keys stored securely
   # PRIVATE_KEY should be handled with extra security
   ```</p>
<ol>
<li><strong>Production deployment steps</strong>:</li>
</ol>
<p>```bash
   # Deploy to production
   npm run deploy:production</p>
<p># Run database migrations
   npm run migrate:production
   ```</p>
<ol>
<li><strong>Production verification</strong>:</li>
</ol>
<p>```bash
   # Verify production deployment
   curl https://api.gemforce.com/parse/health</p>
<p># Monitor logs
   pm2 logs gemforce-server
   ```</p>
<h3 id="environment-specific-settings">Environment-Specific Settings<a class="headerlink" href="#environment-specific-settings" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Configuration management</strong>:</li>
</ol>
<p><code>``javascript
   // Load environment-specific configuration
   const envConfig = require(</code>./config/${process.env.NODE_ENV || 'development'}`);</p>
<p>module.exports = {
     // Base configuration
     appName: 'Gemforce',</p>
<div class="codehilite"><pre><span></span><code> // Merge with environment-specific config
 ...envConfig
</code></pre></div>

<p>};
   ```</p>
<ol>
<li><strong>Feature flags</strong>:</li>
</ol>
<p>```javascript
   // Example feature flags configuration
   const featureFlags = {
     development: {
       enableNewMarketplace: true,
       enableCarbonCredits: true
     },
     staging: {
       enableNewMarketplace: true,
       enableCarbonCredits: false
     },
     production: {
       enableNewMarketplace: false,
       enableCarbonCredits: false
     }
   };</p>
<p>// Usage
   if (featureFlags[process.env.NODE_ENV].enableNewMarketplace) {
     // Initialize new marketplace
   }
   ```</p>
<h2 id="deployment-automation">Deployment Automation<a class="headerlink" href="#deployment-automation" title="Permanent link">&para;</a></h2>
<h3 id="cicd-pipeline-setup">CI/CD Pipeline Setup<a class="headerlink" href="#cicd-pipeline-setup" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>GitHub Actions workflow</strong>:</li>
</ol>
<p>```yaml
   # .github/workflows/deploy.yml
   name: Deploy Gemforce</p>
<p>on:
     push:
       branches: [ main, staging ]</p>
<p>jobs:
     test:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Setup Node.js
           uses: actions/setup-node@v2
           with:
             node-version: '16'
         - name: Install dependencies
           run: npm ci
         - name: Run tests
           run: npm test</p>
<div class="codehilite"><pre><span></span><code> build:
   needs: test
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v2
     - name: Setup Node.js
       uses: actions/setup-node@v2
       with:
         node-version: &#39;16&#39;
     - name: Install dependencies
       run: npm ci
     - name: Build project
       run: npm run build
     - name: Upload build artifacts
       uses: actions/upload-artifact@v2
       with:
         name: build
         path: dist/

 deploy:
   needs: build
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v2
     - name: Download build artifacts
       uses: actions/download-artifact@v2
       with:
         name: build
         path: dist/
     - name: Deploy to server
       uses: appleboy/ssh-action@master
       with:
         host: ${{ secrets.SERVER_HOST }}
         username: ${{ secrets.SERVER_USERNAME }}
         key: ${{ secrets.SSH_PRIVATE_KEY }}
         script: |
           cd /var/www/gemforce
           git pull
           npm ci
           cp -r ${{ github.workspace }}/dist/* ./dist/
           pm2 restart gemforce-server
</code></pre></div>

<p>```</p>
<ol>
<li><strong>Automatic testing</strong>:</li>
</ol>
<p>```yaml
   # .github/workflows/test.yml
   name: Test Gemforce</p>
<p>on:
     pull_request:
       branches: [ main, staging ]</p>
<p>jobs:
     test:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Setup Node.js
           uses: actions/setup-node@v2
           with:
             node-version: '16'
         - name: Install dependencies
           run: npm ci
         - name: Run linting
           run: npm run lint
         - name: Run tests
           run: npm test
   ```</p>
<h3 id="automated-testing">Automated Testing<a class="headerlink" href="#automated-testing" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Unit tests for smart contracts</strong>:</li>
</ol>
<p>```javascript
   // test/GemforceMinter.test.ts
   describe("GemforceMinter", function() {
     let owner, user;
     let diamond, gemforceMinter;</p>
<div class="codehilite"><pre><span></span><code> beforeEach(async function() {
   [owner, user] = await ethers.getSigners();

   // Deploy diamond with GemforceMinterFacet
   // ...deployment code

   gemforceMinter = await ethers.getContractAt(&quot;GemforceMinterFacet&quot;, diamond.address);
 });

 it(&quot;should mint a token with metadata&quot;, async function() {
   const metadata = [
     { key: &quot;name&quot;, attributeType: 0, value: &quot;Carbon Credit&quot; },
     { key: &quot;amount&quot;, attributeType: 1, value: &quot;100&quot; }
   ];

   await expect(gemforceMinter.connect(owner).gemforceMint(metadata))
     .to.emit(gemforceMinter, &quot;GemforceMinted&quot;)
     .withArgs(0, owner.address, metadata);
 });
</code></pre></div>

<p>});
   ```</p>
<ol>
<li><strong>API endpoint tests</strong>:</li>
</ol>
<p>```javascript
   // test/cloud-functions.test.js
   describe("Cloud Functions", function() {
     before(async function() {
       // Initialize Parse Server for testing
       Parse.initialize("test_app_id", "test_js_key", "test_master_key");
       Parse.serverURL = "http://localhost:1337/parse";
     });</p>
<div class="codehilite"><pre><span></span><code> it(&quot;should retrieve blockchain data&quot;, async function() {
   const result = await Parse.Cloud.run(&quot;loadAllBlockchains&quot;);
   expect(result).to.be.an(&quot;array&quot;);
 });
</code></pre></div>

<p>});
   ```</p>
<ol>
<li><strong>End-to-end tests</strong>:</li>
</ol>
<p>```javascript
   // test/e2e/user-flow.test.js
   describe("User Flow", function() {
     it("should register, create identity, and mint token", async function() {
       // Register user
       const user = await registerUser("test@example.com", "password");</p>
<div class="codehilite"><pre><span></span><code>   // Create DFNS wallet
   const { walletId } = await createDFNSWallet(user);

   // Create identity
   const { identityAddress } = await createIdentity(user, walletId);

   // Mint token
   const { tokenId } = await mintToken(user, walletId);

   // Verify token ownership
   const owner = await getTokenOwner(tokenId);
   expect(owner).to.equal(user.get(&quot;walletAddress&quot;));
 });
</code></pre></div>

<p>});
   ```</p>
<h3 id="deployment-scripts">Deployment Scripts<a class="headerlink" href="#deployment-scripts" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Smart contract deployment script</strong>:</li>
</ol>
<p>```javascript
   // scripts/deploy-contracts.js
   async function main() {
     // Get deployer
     const [deployer] = await ethers.getSigners();
     console.log("Deploying contracts with account:", deployer.address);</p>
<div class="codehilite"><pre><span></span><code> // Deploy libraries
 const LibraryA = await ethers.getContractFactory(&quot;LibraryA&quot;);
 const libraryA = await LibraryA.deploy();
 await libraryA.deployed();
 console.log(&quot;LibraryA deployed to:&quot;, libraryA.address);

 // Deploy facets with libraries
 const FacetA = await ethers.getContractFactory(&quot;FacetA&quot;, {
   libraries: {
     LibraryA: libraryA.address
   }
 });
 const facetA = await FacetA.deploy();
 await facetA.deployed();
 console.log(&quot;FacetA deployed to:&quot;, facetA.address);

 // More deployments...
</code></pre></div>

<p>}</p>
<p>main()
     .then(() =&gt; process.exit(0))
     .catch(error =&gt; {
       console.error(error);
       process.exit(1);
     });
   ```</p>
<ol>
<li><strong>Parse Server deployment script</strong>:</li>
</ol>
<p>```bash
   #!/bin/bash
   # scripts/deploy-parse.sh</p>
<p># Load environment variables
   source .env.${NODE_ENV:-production}</p>
<p># Build the project
   echo "Building project..."
   npm run build</p>
<p># Deploy to server
   echo "Deploying to server..."
   rsync -avz --exclude node_modules --exclude .git . user@server:/var/www/gemforce/</p>
<p># SSH into server and restart
   ssh user@server &lt;&lt; EOF
     cd /var/www/gemforce
     npm ci --production
     pm2 restart gemforce-server
   EOF</p>
<p>echo "Deployment complete!"
   ```</p>
<h3 id="infrastructure-as-code">Infrastructure as Code<a class="headerlink" href="#infrastructure-as-code" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Terraform configuration</strong>:</li>
</ol>
<p>```hcl
   # main.tf
   provider "aws" {
     region = "us-east-1"
   }</p>
<p>resource "aws_instance" "gemforce_server" {
     ami           = "ami-0c55b159cbfafe1f0"
     instance_type = "t2.medium"
     key_name      = "gemforce-key"</p>
<div class="codehilite"><pre><span></span><code> tags = {
   Name = &quot;gemforce-server&quot;
   Environment = var.environment
 }

 root_block_device {
   volume_size = 50
   volume_type = &quot;gp2&quot;
 }

 vpc_security_group_ids = [aws_security_group.gemforce_sg.id]
</code></pre></div>

<p>}</p>
<p>resource "aws_security_group" "gemforce_sg" {
     name        = "gemforce-sg"
     description = "Allow web and SSH traffic"</p>
<div class="codehilite"><pre><span></span><code> ingress {
   from_port   = 80
   to_port     = 80
   protocol    = &quot;tcp&quot;
   cidr_blocks = [&quot;0.0.0.0/0&quot;]
 }

 ingress {
   from_port   = 443
   to_port     = 443
   protocol    = &quot;tcp&quot;
   cidr_blocks = [&quot;0.0.0.0/0&quot;]
 }

 ingress {
   from_port   = 22
   to_port     = 22
   protocol    = &quot;tcp&quot;
   cidr_blocks = [&quot;0.0.0.0/0&quot;]
 }

 egress {
   from_port   = 0
   to_port     = 0
   protocol    = &quot;-1&quot;
   cidr_blocks = [&quot;0.0.0.0/0&quot;]
 }
</code></pre></div>

<p>}</p>
<p>output "server_ip" {
     value = aws_instance.gemforce_server.public_ip
   }
   ```</p>
<ol>
<li><strong>Docker Compose setup</strong>:</li>
</ol>
<p>```yaml
   # docker-compose.yml
   version: '3'</p>
<p>services:
     mongodb:
       image: mongo:4.4
       ports:
         - "27017:27017"
       volumes:
         - mongo-data:/data/db
       environment:
         MONGO_INITDB_ROOT_USERNAME: ${MONGO_USERNAME}
         MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASSWORD}
       restart: always</p>
<div class="codehilite"><pre><span></span><code> parse-server:
   build: .
   ports:
     - &quot;1337:1337&quot;
   environment:
     - APP_ID=${APP_ID}
     - MASTER_KEY=${MASTER_KEY}
     - DATABASE_URI=mongodb://${MONGO_USERNAME}:${MONGO_PASSWORD}@mongodb:27017/${DATABASE_NAME}?authSource=admin
     - SERVER_URL=${SERVER_URL}
     - CLOUD_PATH=/parse-server/cloud/main.js
   volumes:
     - ./cloud:/parse-server/cloud
   depends_on:
     - mongodb
   restart: always

 nginx:
   image: nginx:latest
   ports:
     - &quot;80:80&quot;
     - &quot;443:443&quot;
   volumes:
     - ./nginx/conf.d:/etc/nginx/conf.d
     - ./nginx/ssl:/etc/nginx/ssl
     - ./nginx/www:/var/www/html
   depends_on:
     - parse-server
   restart: always
</code></pre></div>

<p>volumes:
     mongo-data:
   ```</p>
<h3 id="continuous-monitoring">Continuous Monitoring<a class="headerlink" href="#continuous-monitoring" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Setup monitoring tools</strong>:</li>
</ol>
<p>```javascript
   // Monitoring setup in app.js
   const prometheus = require('prom-client');
   const collectDefaultMetrics = prometheus.collectDefaultMetrics;</p>
<p>// Enable default metrics
   collectDefaultMetrics({ timeout: 5000 });</p>
<p>// Custom metrics
   const httpRequestDurationMicroseconds = new prometheus.Histogram({
     name: 'http_request_duration_ms',
     help: 'Duration of HTTP requests in ms',
     labelNames: ['method', 'route', 'status_code'],
     buckets: [0.1, 5, 15, 50, 100, 500]
   });</p>
<p>// Endpoint for metrics
   app.get('/metrics', (req, res) =&gt; {
     res.set('Content-Type', prometheus.register.contentType);
     res.end(prometheus.register.metrics());
   });
   ```</p>
<ol>
<li><strong>Logging configuration</strong>:</li>
</ol>
<p>```javascript
   // Logging setup in app.js
   const winston = require('winston');</p>
<p>const logger = winston.createLogger({
     level: process.env.LOG_LEVEL || 'info',
     format: winston.format.combine(
       winston.format.timestamp(),
       winston.format.json()
     ),
     transports: [
       new winston.transports.Console(),
       new winston.transports.File({ filename: 'error.log', level: 'error' }),
       new winston.transports.File({ filename: 'combined.log' })
     ]
   });</p>
<p>// Use in application
   logger.info('Server started', { port: 1337 });
   ```</p>
<h2 id="upgrade-procedures">Upgrade Procedures<a class="headerlink" href="#upgrade-procedures" title="Permanent link">&para;</a></h2>
<h3 id="smart-contract-upgrades">Smart Contract Upgrades<a class="headerlink" href="#smart-contract-upgrades" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Upgrading a facet</strong>:</li>
</ol>
<p>```javascript
   // scripts/upgrade-facet.js
   async function main() {
     // Get signer
     const [signer] = await ethers.getSigners();</p>
<div class="codehilite"><pre><span></span><code> // Deploy new version of the facet
 const NewFacet = await ethers.getContractFactory(&quot;NewFacetV2&quot;);
 const newFacet = await NewFacet.deploy();
 await newFacet.deployed();
 console.log(&quot;New facet deployed to:&quot;, newFacet.address);

 // Get diamond contract
 const diamond = await ethers.getContractAt(&quot;Diamond&quot;, DIAMOND_ADDRESS);

 // Get selectors for the facet
 const selectors = getSelectors(newFacet);

 // Create facet cut
 const facetCut = {
   facetAddress: newFacet.address,
   action: FacetCutAction.Replace, // Replace existing facet
   functionSelectors: selectors
 };

 // Perform the upgrade
 const tx = await diamond.diamondCut(
   [facetCut],
   ethers.constants.AddressZero, // No initialization
   &quot;0x&quot;
 );
 await tx.wait();

 console.log(&quot;Facet upgraded successfully&quot;);
</code></pre></div>

<p>}</p>
<p>main()
     .then(() =&gt; process.exit(0))
     .catch(error =&gt; {
       console.error(error);
       process.exit(1);
     });
   ```</p>
<ol>
<li><strong>Adding a new facet</strong>:</li>
</ol>
<p>```javascript
   // scripts/add-facet.js
   async function main() {
     // Get signer
     const [signer] = await ethers.getSigners();</p>
<div class="codehilite"><pre><span></span><code> // Deploy new facet
 const NewFacet = await ethers.getContractFactory(&quot;NewFacet&quot;);
 const newFacet = await NewFacet.deploy();
 await newFacet.deployed();
 console.log(&quot;New facet deployed to:&quot;, newFacet.address);

 // Get diamond contract
 const diamond = await ethers.getContractAt(&quot;Diamond&quot;, DIAMOND_ADDRESS);

 // Get selectors for the facet
 const selectors = getSelectors(newFacet);

 // Create facet cut
 const facetCut = {
   facetAddress: newFacet.address,
   action: FacetCutAction.Add, // Add new facet
   functionSelectors: selectors
 };

 // Perform the upgrade
 const tx = await diamond.diamondCut(
   [facetCut],
   ethers.constants.AddressZero, // No initialization
   &quot;0x&quot;
 );
 await tx.wait();

 console.log(&quot;Facet added successfully&quot;);
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Upgrading Diamond implementation</strong>:</li>
</ol>
<p>```javascript
   // scripts/upgrade-diamond.js
   async function main() {
     // Get diamond factory
     const diamondFactory = await ethers.getContractAt("DiamondFactory", FACTORY_ADDRESS);</p>
<div class="codehilite"><pre><span></span><code> // Get existing diamond
 const diamond = await ethers.getContractAt(&quot;Diamond&quot;, DIAMOND_ADDRESS);

 // Deploy new facets
 const newFacets = await deployNewFacets();

 // Create facet cuts
 const facetCuts = createFacetCuts(newFacets);

 // Set new facet set on factory
 await diamondFactory.setFacets(&quot;newFacetSet&quot;, facetCuts);

 // Deploy new diamond initializer if needed
 const diamondInit = await deployDiamondInit();

 // Prepare initialization data
 const initData = diamondInit.interface.encodeFunctionData(&quot;init&quot;, [
   /* initialization parameters */
 ]);

 // Upgrade diamond
 const tx = await diamond.diamondCut(
   facetCuts,
   diamondInit.address,
   initData
 );
 await tx.wait();

 console.log(&quot;Diamond upgraded successfully&quot;);
</code></pre></div>

<p>}
   ```</p>
<h3 id="cloud-function-updates">Cloud Function Updates<a class="headerlink" href="#cloud-function-updates" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Updating cloud functions</strong>:</li>
</ol>
<p>```bash
   # Update cloud functions
   git pull origin main
   npm install
   npm run build</p>
<p># Restart Parse Server
   pm2 restart gemforce-server
   ```</p>
<ol>
<li><strong>Testing cloud function updates</strong>:</li>
</ol>
<p><code>javascript
   // test/cloud-functions/updated-function.test.js
   describe("Updated Cloud Function", function() {
     it("should handle new functionality", async function() {
       const result = await Parse.Cloud.run("updatedFunction", { param: "value" });
       expect(result).to.have.property("newProperty");
     });
   });</code></p>
<ol>
<li><strong>Deploying specific cloud function changes</strong>:</li>
</ol>
<p>```bash
   # Deploy specific cloud function changes
   scp dist/src/cloud-functions/specific-function.js user@server:/var/www/gemforce/dist/src/cloud-functions/</p>
<p># Restart Parse Server
   ssh user@server "cd /var/www/gemforce &amp;&amp; pm2 restart gemforce-server"
   ```</p>
<h3 id="database-schema-migrations">Database Schema Migrations<a class="headerlink" href="#database-schema-migrations" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Creating a migration</strong>:</li>
</ol>
<p>```javascript
   // migrations/1625000000000_add_new_field.js
   exports.up = async (db) =&gt; {
     // Add new field to all documents in a collection
     await db.collection('User').updateMany(
       { newField: { $exists: false } }, 
       { $set: { newField: "" } }
     );</p>
<div class="codehilite"><pre><span></span><code> // Create new index
 await db.collection(&#39;User&#39;).createIndex({ newField: 1 });
</code></pre></div>

<p>};</p>
<p>exports.down = async (db) =&gt; {
     // Remove the field
     await db.collection('User').updateMany(
       {}, 
       { $unset: { newField: "" } }
     );</p>
<div class="codehilite"><pre><span></span><code> // Remove the index
 await db.collection(&#39;User&#39;).dropIndex({ newField: 1 });
</code></pre></div>

<p>};
   ```</p>
<ol>
<li><strong>Running migrations</strong>:</li>
</ol>
<p>```bash
   # Run migrations
   npx migrate-mongo up</p>
<p># Check migration status
   npx migrate-mongo status
   ```</p>
<ol>
<li><strong>Rolling back migrations</strong>:</li>
</ol>
<p>```bash
   # Roll back last migration
   npx migrate-mongo down</p>
<p># Roll back to specific migration
   npx migrate-mongo down 1625000000000
   ```</p>
<h3 id="backward-compatibility-considerations">Backward Compatibility Considerations<a class="headerlink" href="#backward-compatibility-considerations" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>API versioning</strong>:</li>
</ol>
<p>```javascript
   // Example API versioning
   app.use('/api/v1', v1Routes);
   app.use('/api/v2', v2Routes);</p>
<p>// Redirect old routes
   app.use('/api/legacy/:resource', (req, res) =&gt; {
     res.redirect(<code>/api/v1/${req.params.resource}</code>);
   });
   ```</p>
<ol>
<li>
<p><strong>Smart contract compatibility</strong>:</p>
</li>
<li>
<p>Never remove storage variables</p>
</li>
<li>Add new functions rather than changing existing ones</li>
<li>Use new facets for significant changes</li>
<li>
<p>Use feature flags to control access to new features</p>
</li>
<li>
<p><strong>Client compatibility</strong>:</p>
</li>
</ol>
<p>```javascript
   // Check client version and provide appropriate response
   Parse.Cloud.define("getFeatures", async (request) =&gt; {
     const clientVersion = request.params.clientVersion;</p>
<div class="codehilite"><pre><span></span><code> if (semver.lt(clientVersion, &quot;2.0.0&quot;)) {
   return legacyFeatureList;
 } else {
   return newFeatureList;
 }
</code></pre></div>

<p>});
   ```</p>
<h3 id="feature-flagging">Feature Flagging<a class="headerlink" href="#feature-flagging" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Implementing feature flags</strong>:</li>
</ol>
<p>```javascript
   // Feature flag configuration
   const featureFlags = {
     newMarketplace: process.env.ENABLE_NEW_MARKETPLACE === "true",
     carbonCredits: process.env.ENABLE_CARBON_CREDITS === "true",
     nftFractionalization: process.env.ENABLE_NFT_FRACTIONALIZATION === "true"
   };</p>
<p>// Using feature flags
   Parse.Cloud.define("getMarketplace", async (request) =&gt; {
     if (featureFlags.newMarketplace) {
       return getNewMarketplace();
     } else {
       return getLegacyMarketplace();
     }
   });
   ```</p>
<ol>
<li><strong>Controlling access to new features</strong>:</li>
</ol>
<p>```javascript
   // Progressive rollout
   Parse.Cloud.define("checkFeatureAccess", async (request) =&gt; {
     const { feature, userId } = request.params;</p>
<div class="codehilite"><pre><span></span><code> // Check if feature is enabled globally
 if (!featureFlags[feature]) {
   return { hasAccess: false };
 }

 // Check if user is in beta group
 const user = await new Parse.Query(Parse.User)
   .get(userId, { useMasterKey: true });

 const isBetaTester = user.get(&quot;betaTester&quot;) === true;

 // Calculate percentage-based rollout
 const rolloutPercentage = 25; // 25% of users
 const userIdNumber = parseInt(userId.substring(0, 8), 16);
 const userPercentile = userIdNumber % 100;

 return {
   hasAccess: isBetaTester || userPercentile &lt; rolloutPercentage
 };
</code></pre></div>

<p>});
   ```</p>
<h2 id="rollback-procedures">Rollback Procedures<a class="headerlink" href="#rollback-procedures" title="Permanent link">&para;</a></h2>
<h3 id="smart-contract-rollbacks">Smart Contract Rollbacks<a class="headerlink" href="#smart-contract-rollbacks" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Rollback strategy for facets</strong>:</li>
</ol>
<p>```javascript
   // scripts/rollback-facet.js
   async function main() {
     // Get diamond contract
     const diamond = await ethers.getContractAt("Diamond", DIAMOND_ADDRESS);</p>
<div class="codehilite"><pre><span></span><code> // Get previous version of the facet
 const previousFacetAddress = PREVIOUS_FACET_ADDRESS;

 // Get selectors for the facet
 const selectors = SELECTORS;

 // Create facet cut for rollback
 const facetCut = {
   facetAddress: previousFacetAddress,
   action: FacetCutAction.Replace,
   functionSelectors: selectors
 };

 // Perform the rollback
 const tx = await diamond.diamondCut(
   [facetCut],
   ethers.constants.AddressZero,
   &quot;0x&quot;
 );
 await tx.wait();

 console.log(&quot;Facet rolled back successfully&quot;);
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Diamond upgrade rollback</strong>:</li>
</ol>
<p>```javascript
   // scripts/rollback-diamond.js
   async function main() {
     // Get diamond factory
     const diamondFactory = await ethers.getContractAt("DiamondFactory", FACTORY_ADDRESS);</p>
<div class="codehilite"><pre><span></span><code> // Get diamond to rollback
 const diamond = await ethers.getContractAt(&quot;Diamond&quot;, DIAMOND_ADDRESS);

 // Use previous facet set
 const previousFacetSet = &quot;previousFacetSet&quot;;

 // Get facets from the set
 const facets = await diamondFactory.getFacets(previousFacetSet);

 // Rollback diamond
 const tx = await diamond.diamondCut(
   facets,
   ethers.constants.AddressZero,
   &quot;0x&quot;
 );
 await tx.wait();

 console.log(&quot;Diamond rolled back successfully&quot;);
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Emergency pause</strong>:</li>
</ol>
<p>```javascript
   // scripts/emergency-pause.js
   async function main() {
     // Get contract
     const contract = await ethers.getContractAt("PausableFacet", DIAMOND_ADDRESS);</p>
<div class="codehilite"><pre><span></span><code> // Pause the contract
 const tx = await contract.pause();
 await tx.wait();

 console.log(&quot;Contract paused successfully&quot;);
</code></pre></div>

<p>}
   ```</p>
<h3 id="cloud-function-rollbacks">Cloud Function Rollbacks<a class="headerlink" href="#cloud-function-rollbacks" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Rolling back with Git</strong>:</li>
</ol>
<p>```bash
   # Rollback to previous commit
   git reset --hard HEAD~1
   npm install
   npm run build</p>
<p># Restart server
   pm2 restart gemforce-server
   ```</p>
<ol>
<li><strong>Using deployment tags</strong>:</li>
</ol>
<p>```bash
   # List tags
   git tag -l</p>
<p># Checkout specific version
   git checkout v1.2.3
   npm install
   npm run build</p>
<p># Restart server
   pm2 restart gemforce-server
   ```</p>
<ol>
<li><strong>Specific file rollback</strong>:</li>
</ol>
<p>```bash
   # Revert specific file
   git checkout HEAD~1 -- src/cloud-functions/specific-file.ts
   npm run build</p>
<p># Restart server
   pm2 restart gemforce-server
   ```</p>
<h3 id="database-rollbacks">Database Rollbacks<a class="headerlink" href="#database-rollbacks" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Restoring from backup</strong>:</li>
</ol>
<p><code>bash
   # Restore MongoDB from backup
   mongorestore --uri="mongodb://username:password@host:port/database" --drop /backup/path/YYYY-MM-DD</code></p>
<ol>
<li><strong>Rolling back a migration</strong>:</li>
</ol>
<p><code>bash
   # Roll back the last migration
   npx migrate-mongo down</code></p>
<ol>
<li><strong>Manual data correction script</strong>:</li>
</ol>
<p>```javascript
   // scripts/correct-data.js
   async function main() {
     const MongoClient = require('mongodb').MongoClient;
     const client = await MongoClient.connect(process.env.DATABASE_URI);
     const db = client.db();</p>
<div class="codehilite"><pre><span></span><code> try {
   // Correct data issues
   await db.collection(&#39;User&#39;).updateMany(
     { incorrectField: { $exists: true } },
     { $rename: { &quot;incorrectField&quot;: &quot;correctField&quot; } }
   );

   console.log(&quot;Data correction complete&quot;);
 } catch (error) {
   console.error(&quot;Error correcting data:&quot;, error);
 } finally {
   await client.close();
 }
</code></pre></div>

<p>}</p>
<p>main().catch(console.error);
   ```</p>
<h3 id="emergency-procedures">Emergency Procedures<a class="headerlink" href="#emergency-procedures" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Complete service rollback</strong>:</li>
</ol>
<p>```bash
   # Emergency rollback script
   #!/bin/bash
   # scripts/emergency-rollback.sh</p>
<p># Stop the current service
   pm2 stop gemforce-server</p>
<p># Restore code from known good state
   git checkout v1.2.3
   npm install
   npm run build</p>
<p># Restore database
   mongorestore --uri="$DATABASE_URI" --drop /backups/latest</p>
<p># Restart the service
   pm2 start gemforce-server</p>
<p># Notify team
   curl -X POST -H "Content-Type: application/json" \
     -d '{"text":"Emergency rollback performed to v1.2.3"}' \
     $SLACK_WEBHOOK_URL
   ```</p>
<ol>
<li><strong>Read-only mode</strong>:</li>
</ol>
<p>```javascript
   // Enable read-only mode
   Parse.Cloud.beforeSave("*", async () =&gt; {
     if (process.env.READONLY_MODE === "true") {
       throw new Parse.Error(
         Parse.Error.OPERATION_FORBIDDEN,
         "System is currently in read-only mode for maintenance."
       );
     }
   });</p>
<p>Parse.Cloud.beforeDelete("*", async () =&gt; {
     if (process.env.READONLY_MODE === "true") {
       throw new Parse.Error(
         Parse.Error.OPERATION_FORBIDDEN,
         "System is currently in read-only mode for maintenance."
       );
     }
   });
   ```</p>
<h3 id="data-integrity-verification">Data Integrity Verification<a class="headerlink" href="#data-integrity-verification" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Verifying contract state</strong>:</li>
</ol>
<p>```javascript
   // scripts/verify-contract-state.js
   async function main() {
     // Get contract
     const contract = await ethers.getContractAt("DiamondLoupe", DIAMOND_ADDRESS);</p>
<div class="codehilite"><pre><span></span><code> // Get all facets
 const facets = await contract.facets();

 // Verify each facet
 for (const facet of facets) {
   console.log(`Verifying facet at ${facet.facetAddress}`);

   // Get facet code
   const code = await ethers.provider.getCode(facet.facetAddress);

   // Check code is not empty
   if (code === &quot;0x&quot; || code === &quot;0x0&quot;) {
     throw new Error(`Facet at ${facet.facetAddress} has no code!`);
   }

   // Verify selectors
   for (const selector of facet.functionSelectors) {
     const result = await contract.facetAddress(selector);
     if (result !== facet.facetAddress) {
       throw new Error(`Selector ${selector} points to wrong facet!`);
     }
   }
 }

 console.log(&quot;Contract state verification successful&quot;);
</code></pre></div>

<p>}</p>
<p>main().catch(console.error);
   ```</p>
<ol>
<li><strong>Database integrity check</strong>:</li>
</ol>
<p>```javascript
   // scripts/verify-database.js
   async function main() {
     const MongoClient = require('mongodb').MongoClient;
     const client = await MongoClient.connect(process.env.DATABASE_URI);
     const db = client.db();</p>
<div class="codehilite"><pre><span></span><code> try {
   // Check User collection integrity
   const userCount = await db.collection(&#39;User&#39;).countDocuments();
   console.log(`User count: ${userCount}`);

   // Check for duplicate emails
   const duplicateEmails = await db.collection(&#39;User&#39;).aggregate([
     { $group: { _id: &quot;$email&quot;, count: { $sum: 1 } } },
     { $match: { count: { $gt: 1 } } }
   ]).toArray();

   if (duplicateEmails.length &gt; 0) {
     console.error(`Found ${duplicateEmails.length} duplicate emails!`);
     console.error(duplicateEmails);
   }

   // Verify indexes
   const indexes = await db.collection(&#39;User&#39;).indexes();
   console.log(&quot;Indexes:&quot;, indexes);

   // More integrity checks...

   console.log(&quot;Database integrity check complete&quot;);
 } finally {
   await client.close();
 }
</code></pre></div>

<p>}</p>
<p>main().catch(console.error);
   ```</p>
<h2 id="testing-and-verification">Testing and Verification<a class="headerlink" href="#testing-and-verification" title="Permanent link">&para;</a></h2>
<h3 id="unit-testing">Unit Testing<a class="headerlink" href="#unit-testing" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Smart contract unit tests</strong>:</li>
</ol>
<p>```javascript
   // test/unit/GemforceMinter.test.ts
   describe("GemforceMinter", function() {
     let owner, user1, user2;
     let diamond, gemforceMinter;</p>
<div class="codehilite"><pre><span></span><code> beforeEach(async function() {
   [owner, user1, user2] = await ethers.getSigners();

   // Deploy diamond with facets
   // ...deployment code

   gemforceMinter = await ethers.getContractAt(&quot;GemforceMinterFacet&quot;, diamond.address);
 });

 it(&quot;should allow owner to mint&quot;, async function() {
   const metadata = [
     { key: &quot;name&quot;, attributeType: 0, value: &quot;Carbon Credit&quot; }
   ];

   const tx = await gemforceMinter.connect(owner).gemforceMint(metadata);
   const receipt = await tx.wait();

   // Check events
   const event = receipt.events.find(e =&gt; e.event === &quot;GemforceMinted&quot;);
   expect(event).to.exist;
   expect(event.args.tokenId).to.equal(0);
   expect(event.args.minter).to.equal(owner.address);
 });

 it(&quot;should revert when non-owner tries to mint&quot;, async function() {
   const metadata = [
     { key: &quot;name&quot;, attributeType: 0, value: &quot;Carbon Credit&quot; }
   ];

   await expect(
     gemforceMinter.connect(user1).gemforceMint(metadata)
   ).to.be.revertedWith(&quot;Only contract owner&quot;);
 });
</code></pre></div>

<p>});
   ```</p>
<ol>
<li><strong>Cloud function unit tests</strong>:</li>
</ol>
<p>```javascript
   // test/unit/cloud-functions.test.js
   describe("Cloud Functions Unit Tests", function() {
     before(function() {
       // Mock Parse
       this.originalParse = global.Parse;
       global.Parse = {
         Cloud: {
           define: (name, handler) =&gt; {
             this.cloudFunctions[name] = handler;
           }
         },
         Error: {
           INVALID_PARAMS: 141
         }
       };</p>
<div class="codehilite"><pre><span></span><code>   // Load cloud functions
   this.cloudFunctions = {};
   require(&quot;../../src/cloud-functions/contracts&quot;);
 });

 after(function() {
   global.Parse = this.originalParse;
 });

 it(&quot;should validate parameters in addDiamondFacet&quot;, async function() {
   const handler = this.cloudFunctions.addDiamondFacet;

   // Missing parameters
   try {
     await handler({ params: {} });
     assert.fail(&quot;Should have thrown an error&quot;);
   } catch (e) {
     expect(e.code).to.equal(Parse.Error.INVALID_PARAMS);
   }

   // With valid parameters (mocked)
   const mockResult = { success: true };
   this.addDiamondFacet = sinon.stub().resolves(mockResult);

   const result = await handler({
     params: {
       networkId: &quot;1&quot;,
       diamondAddress: &quot;0x123&quot;,
       facetName: &quot;TestFacet&quot;
     }
   });

   expect(result).to.deep.equal(mockResult);
 });
</code></pre></div>

<p>});
   ```</p>
<h3 id="integration-testing">Integration Testing<a class="headerlink" href="#integration-testing" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Smart contract integration tests</strong>:</li>
</ol>
<p>```javascript
   // test/integration/marketplace-flow.test.ts
   describe("Marketplace Integration", function() {
     let owner, seller, buyer;
     let diamond, marketplace, gem, treasury;</p>
<div class="codehilite"><pre><span></span><code> before(async function() {
   [owner, seller, buyer] = await ethers.getSigners();

   // Deploy all contracts
   // ...deployment code

   // Get contract instances
   diamond = await ethers.getContractAt(&quot;Diamond&quot;, diamondAddress);
   marketplace = await ethers.getContractAt(&quot;MarketplaceFacet&quot;, diamondAddress);
   gem = await ethers.getContractAt(&quot;GemforceMinterFacet&quot;, diamondAddress);
   treasury = await ethers.getContractAt(&quot;Treasury&quot;, treasuryAddress);
 });

 it(&quot;should support full marketplace flow&quot;, async function() {
   // Mint token
   const metadata = [{ key: &quot;test&quot;, attributeType: 0, value: &quot;value&quot; }];
   await gem.connect(owner).gemforceMint(metadata);

   // List token
   await marketplace.connect(owner).listItem(0, ethers.utils.parseEther(&quot;1.0&quot;));

   // Check listing
   const listing = await marketplace.getListing(0);
   expect(listing.price).to.equal(ethers.utils.parseEther(&quot;1.0&quot;));

   // Purchase token
   await marketplace.connect(buyer).purchaseItem(diamondAddress, 0, {
     value: ethers.utils.parseEther(&quot;1.0&quot;)
   });

   // Check ownership
   const newOwner = await diamond.ownerOf(0);
   expect(newOwner).to.equal(buyer.address);

   // Check treasury balance
   const balance = await treasury.getBalance();
   expect(balance).to.be.gt(0);
 });
</code></pre></div>

<p>});
   ```</p>
<ol>
<li><strong>API integration tests</strong>:</li>
</ol>
<p>```javascript
   // test/integration/api-flow.test.js
   describe("API Integration", function() {
     let user;</p>
<div class="codehilite"><pre><span></span><code> before(async function() {
   // Initialize Parse
   Parse.initialize(&quot;test_app_id&quot;, &quot;test_js_key&quot;, &quot;test_master_key&quot;);
   Parse.serverURL = &quot;http://localhost:1337/parse&quot;;

   // Create test user
   user = new Parse.User();
   user.set(&quot;username&quot;, &quot;test@example.com&quot;);
   user.set(&quot;password&quot;, &quot;password&quot;);
   user.set(&quot;email&quot;, &quot;test@example.com&quot;);
   await user.signUp();
 });

 it(&quot;should handle user blockchain operations&quot;, async function() {
   // Get blockchains
   const blockchains = await Parse.Cloud.run(&quot;loadAllBlockchains&quot;);
   expect(blockchains).to.be.an(&quot;array&quot;);

   // Create DFNS wallet (mocked)
   const walletResult = await Parse.Cloud.run(&quot;registerInit&quot;, {
     username: user.get(&quot;email&quot;)
   });
   expect(walletResult).to.have.property(&quot;challenge&quot;);

   // Complete registration (mocked)
   const registrationResult = await Parse.Cloud.run(&quot;registerComplete&quot;, {
     signedChallenge: &quot;mocked_challenge&quot;,
     temporaryAuthenticationToken: &quot;mocked_token&quot;
   });
   expect(registrationResult).to.have.property(&quot;token&quot;);

   // List wallets
   const wallets = await Parse.Cloud.run(&quot;listWallets&quot;, {
     authToken: registrationResult.token
   });
   expect(wallets).to.have.property(&quot;wallets&quot;);
 });
</code></pre></div>

<p>});
   ```</p>
<h3 id="contract-verification_1">Contract Verification<a class="headerlink" href="#contract-verification_1" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Verifying contracts on block explorer</strong>:</li>
</ol>
<p>```bash
   # Verify contract on Etherscan or Basescan
   npx hardhat verify --network baseSepolia <CONTRACT_ADDRESS> <CONSTRUCTOR_ARGS></p>
<p># Verify contract with libraries
   npx hardhat verify --network baseSepolia <CONTRACT_ADDRESS> <CONSTRUCTOR_ARGS> \
     --libraries Library1=0x123... Library2=0x456...
   ```</p>
<ol>
<li><strong>Automated verification script</strong>:</li>
</ol>
<p>```javascript
   // scripts/verify-contracts.js
   async function main() {
     // Get deployment data
     const deployments = require('../deployments.json');
     const network = process.env.NETWORK || 'baseSepolia';
     const networkId = hre.config.networks[network].chainId;</p>
<div class="codehilite"><pre><span></span><code> // Verify Diamond contract
 const diamondAddress = deployments[networkId].diamondAddress;
 console.log(`Verifying Diamond at ${diamondAddress}`);

 try {
   await hre.run(&quot;verify:verify&quot;, {
     address: diamondAddress,
     constructorArguments: []
   });
 } catch (e) {
   console.log(`Error verifying Diamond: ${e.message}`);
 }

 // Verify Facets
 const facets = deployments[networkId].facets || [];
 for (const facet of facets) {
   console.log(`Verifying facet ${facet.name} at ${facet.address}`);

   try {
     await hre.run(&quot;verify:verify&quot;, {
       address: facet.address,
       constructorArguments: []
     });
   } catch (e) {
     console.log(`Error verifying ${facet.name}: ${e.message}`);
   }
 }
</code></pre></div>

<p>}</p>
<p>main().catch(console.error);
   ```</p>
<h3 id="load-testing">Load Testing<a class="headerlink" href="#load-testing" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Smart contract load testing</strong>:</li>
</ol>
<p>```javascript
   // test/load/contract-load.test.js
   describe("Contract Load Test", function() {
     // Increase timeout for load tests
     this.timeout(300000);</p>
<div class="codehilite"><pre><span></span><code> let diamond, minter;
 let signers;

 before(async function() {
   // Get signers
   signers = await ethers.getSigners();

   // Deploy contracts
   // ...deployment code

   diamond = await ethers.getContractAt(&quot;Diamond&quot;, diamondAddress);
   minter = await ethers.getContractAt(&quot;GemforceMinterFacet&quot;, diamondAddress);
 });

 it(&quot;should handle concurrent minting&quot;, async function() {
   const concurrentMints = 50;
   const mintPromises = [];

   // Create concurrent mint operations
   for (let i = 0; i &lt; concurrentMints; i++) {
     const metadata = [
       { key: &quot;name&quot;, attributeType: 0, value: `Token ${i}` },
       { key: &quot;value&quot;, attributeType: 1, value: i.toString() }
     ];

     mintPromises.push(minter.connect(signers[0]).gemforceMint(metadata));
   }

   // Wait for all mints to complete
   const results = await Promise.allSettled(mintPromises);

   // Count successful mints
   const successfulMints = results.filter(r =&gt; r.status === &quot;fulfilled&quot;).length;
   console.log(`Successfully minted ${successfulMints} of ${concurrentMints} tokens`);

   // Analyze failures
   const failures = results.filter(r =&gt; r.status === &quot;rejected&quot;);
   for (const failure of failures) {
     console.log(`Failure reason: ${failure.reason}`);
   }

   expect(successfulMints).to.be.gt(0);
 });
</code></pre></div>

<p>});
   ```</p>
<ol>
<li><strong>API load testing with Artillery</strong>:</li>
</ol>
<p>```yaml
   # load-tests/api-load.yml
   config:
     target: "https://api.gemforce.com"
     phases:
       - duration: 60
         arrivalRate: 5
         rampTo: 50
         name: "Warm up phase"
       - duration: 120
         arrivalRate: 50
         name: "Sustained load"
       - duration: 60
         arrivalRate: 50
         rampTo: 100
         name: "Peak load"
     defaults:
       headers:
         X-Parse-Application-Id: "{{APP_ID}}"
         Content-Type: "application/json"</p>
<p>scenarios:
     - name: "Load test API endpoints"
       flow:
         - post:
             url: "/parse/functions/loadAllBlockchains"
             json: {}
             expect:
               - statusCode: 200
         - post:
             url: "/parse/functions/loadProviderUrl"
             json:
               networkId: "84532"
             expect:
               - statusCode: 200
         - post:
             url: "/parse/functions/loadSmartContractsForNetwork"
             json:
               networkId: "84532"
             expect:
               - statusCode: 200
   ```</p>
<p>Run with:</p>
<p><code>bash
   npx artillery run load-tests/api-load.yml --environment production</code></p>
<h3 id="security-testing">Security Testing<a class="headerlink" href="#security-testing" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Smart contract security testing</strong>:</li>
</ol>
<p>```bash
   # Run Slither security analyzer
   slither contracts/</p>
<p># Run Mythril
   myth analyze contracts/Diamond.sol
   ```</p>
<ol>
<li><strong>Penetration testing for API</strong>:</li>
</ol>
<p><code>bash
   # Run OWASP ZAP scan
   zap-cli quick-scan -s xss,sqli -r report.html https://api.gemforce.com</code></p>
<ol>
<li><strong>Authentication security tests</strong>:</li>
</ol>
<p>```javascript
   // test/security/auth.test.js
   describe("Authentication Security", function() {
     it("should reject invalid authentication", async function() {
       // Try with invalid app ID
       try {
         Parse.initialize("invalid_app_id", "test_js_key");
         await Parse.Cloud.run("loadAllBlockchains");
         assert.fail("Should have thrown an error");
       } catch (e) {
         expect(e.code).to.equal(Parse.Error.INVALID_APP_ID);
       }</p>
<div class="codehilite"><pre><span></span><code>   // Try with invalid master key
   try {
     Parse.initialize(&quot;test_app_id&quot;, &quot;test_js_key&quot;, &quot;invalid_master_key&quot;);
     const user = new Parse.User();
     await user.fetch({ useMasterKey: true });
     assert.fail(&quot;Should have thrown an error&quot;);
   } catch (e) {
     expect(e.code).to.equal(Parse.Error.INVALID_MASTER_KEY);
   }
 });
</code></pre></div>

<p>});
   ```</p>
<h2 id="network-management">Network Management<a class="headerlink" href="#network-management" title="Permanent link">&para;</a></h2>
<h3 id="blockchain-node-management">Blockchain Node Management<a class="headerlink" href="#blockchain-node-management" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Connecting to blockchain nodes</strong>:</li>
</ol>
<p>```javascript
   // src/lib/blockchain.js
   const { ethers } = require("ethers");</p>
<p>// Get provider for network
   function getProvider(networkId) {
     const networks = {
       "1": process.env.ETH_NODE_URI_MAINNET,
       "84532": process.env.ETH_NODE_URI_BASESEP
     };</p>
<div class="codehilite"><pre><span></span><code> const nodeUrl = networks[networkId];
 if (!nodeUrl) {
   throw new Error(`No RPC endpoint configured for network ${networkId}`);
 }

 return new ethers.providers.JsonRpcProvider(nodeUrl);
</code></pre></div>

<p>}</p>
<p>// Get WebSocket provider for network
   function getWebSocketProvider(networkId) {
     const networks = {
       "1": process.env.ETH_WSS_URI_MAINNET,
       "84532": process.env.ETH_WSS_URI_BASESEP
     };</p>
<div class="codehilite"><pre><span></span><code> const nodeUrl = networks[networkId];
 if (!nodeUrl) {
   throw new Error(`No WebSocket endpoint configured for network ${networkId}`);
 }

 return new ethers.providers.WebSocketProvider(nodeUrl);
</code></pre></div>

<p>}</p>
<p>module.exports = {
     getProvider,
     getWebSocketProvider
   };
   ```</p>
<ol>
<li><strong>Monitoring node health</strong>:</li>
</ol>
<p>```javascript
   // src/lib/node-monitor.js
   const { getProvider } = require("./blockchain");</p>
<p>async function checkNodeHealth(networkId) {
     try {
       const provider = getProvider(networkId);</p>
<div class="codehilite"><pre><span></span><code>   // Check if node is responding
   const blockNumber = await provider.getBlockNumber();

   // Check if node is synced
   const syncStatus = await provider.send(&quot;eth_syncing&quot;, []);
   const isSynced = syncStatus === false;

   // Check chain ID
   const chainId = await provider.getNetwork().then(net =&gt; net.chainId);
   const isCorrectChain = chainId.toString() === networkId;

   // Check peers
   const peerCount = await provider.send(&quot;net_peerCount&quot;, []);
   const peers = parseInt(peerCount, 16);
   const hasPeers = peers &gt; 0;

   return {
     isHealthy: isSynced &amp;&amp; isCorrectChain &amp;&amp; hasPeers,
     blockNumber,
     isSynced,
     isCorrectChain,
     peers
   };
 } catch (error) {
   return {
     isHealthy: false,
     error: error.message
   };
 }
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Node failover</strong>:</li>
</ol>
<p>```javascript
   // src/lib/node-failover.js
   const { ethers } = require("ethers");</p>
<p>class FailoverProvider extends ethers.providers.StaticJsonRpcProvider {
     constructor(urls, network) {
       super(urls[0], network);
       this.urls = urls;
       this.currentUrlIndex = 0;
     }</p>
<div class="codehilite"><pre><span></span><code> async send(method, params) {
   try {
     return await super.send(method, params);
   } catch (error) {
     // Try failover
     if (this.urls.length &gt; 1) {
       this.currentUrlIndex = (this.currentUrlIndex + 1) % this.urls.length;
       this.connection.url = this.urls[this.currentUrlIndex];
       console.log(`Failing over to ${this.connection.url}`);
       return await super.send(method, params);
     }
     throw error;
   }
 }
</code></pre></div>

<p>}</p>
<p>function getFailoverProvider(networkId) {
     const networks = {
       "1": [
         process.env.ETH_NODE_URI_MAINNET_1,
         process.env.ETH_NODE_URI_MAINNET_2,
         process.env.ETH_NODE_URI_MAINNET_3
       ],
       "84532": [
         process.env.ETH_NODE_URI_BASESEP_1,
         process.env.ETH_NODE_URI_BASESEP_2
       ]
     };</p>
<div class="codehilite"><pre><span></span><code> const urls = networks[networkId].filter(Boolean);
 if (urls.length === 0) {
   throw new Error(`No RPC endpoints configured for network ${networkId}`);
 }

 return new FailoverProvider(urls, parseInt(networkId));
</code></pre></div>

<p>}
   ```</p>
<h3 id="rpc-endpoint-configuration">RPC Endpoint Configuration<a class="headerlink" href="#rpc-endpoint-configuration" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Configuration file for RPC endpoints</strong>:</li>
</ol>
<p><code>javascript
   // config/networks.js
   module.exports = {
     mainnet: {
       chainId: 1,
       name: "Ethereum Mainnet",
       rpcEndpoints: [
         {
           url: process.env.ETH_NODE_URI_MAINNET_1,
           provider: "Infura",
           weight: 10
         },
         {
           url: process.env.ETH_NODE_URI_MAINNET_2,
           provider: "Alchemy",
           weight: 5
         },
         {
           url: process.env.ETH_NODE_URI_MAINNET_3,
           provider: "Custom",
           weight: 1
         }
       ],
       wsEndpoints: [
         {
           url: process.env.ETH_WSS_URI_MAINNET,
           provider: "Infura"
         }
       ],
       explorerUrl: "https://etherscan.io"
     },
     baseSepolia: {
       chainId: 84532,
       name: "Base Sepolia",
       rpcEndpoints: [
         {
           url: process.env.ETH_NODE_URI_BASESEP_1,
           provider: "Base",
           weight: 10
         },
         {
           url: process.env.ETH_NODE_URI_BASESEP_2,
           provider: "Alchemy",
           weight: 5
         }
       ],
       wsEndpoints: [
         {
           url: process.env.ETH_WSS_URI_BASESEP,
           provider: "Base"
         }
       ],
       explorerUrl: "https://sepolia.basescan.org"
     }
   };</code></p>
<ol>
<li><strong>RPC endpoint selection logic</strong>:</li>
</ol>
<p>```javascript
   // src/lib/rpc-manager.js
   const networks = require("../../config/networks");</p>
<p>function selectRpcEndpoint(networkId) {
     const network = Object.values(networks).find(n =&gt; n.chainId === parseInt(networkId));
     if (!network) {
       throw new Error(<code>Network ${networkId} not found in configuration</code>);
     }</p>
<div class="codehilite"><pre><span></span><code> // Use weighted selection
 const endpoints = network.rpcEndpoints.filter(e =&gt; e.url);
 if (endpoints.length === 0) {
   throw new Error(`No RPC endpoints configured for network ${networkId}`);
 }

 // Simple random selection for now
 // Could be expanded to use performance metrics or more complex selection
 const totalWeight = endpoints.reduce((sum, e) =&gt; sum + e.weight, 0);
 let random = Math.random() * totalWeight;

 for (const endpoint of endpoints) {
   random -= endpoint.weight;
   if (random &lt;= 0) {
     return endpoint.url;
   }
 }

 // Fallback to first endpoint
 return endpoints[0].url;
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Environment-specific configuration</strong>:</li>
</ol>
<p>```javascript
   // src/lib/network-config.js
   const networks = require("../../config/networks");</p>
<p>function getNetworkConfig(networkId, environment = process.env.NODE_ENV) {
     const network = Object.values(networks).find(n =&gt; n.chainId === parseInt(networkId));
     if (!network) {
       throw new Error(<code>Network ${networkId} not found in configuration</code>);
     }</p>
<div class="codehilite"><pre><span></span><code> // Apply environment-specific overrides
 const envOverrides = {
   development: {
     rpcEndpoints: [
       { url: &quot;http://localhost:8545&quot;, provider: &quot;Local&quot;, weight: 100 }
     ]
   },
   test: {
     // Test environment might use special endpoints
   },
   // production uses default configuration
 };

 if (envOverrides[environment]) {
   return {
     ...network,
     ...envOverrides[environment]
   };
 }

 return network;
</code></pre></div>

<p>}
   ```</p>
<h3 id="transaction-monitoring">Transaction Monitoring<a class="headerlink" href="#transaction-monitoring" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Monitoring transaction status</strong>:</li>
</ol>
<p>```javascript
   // src/lib/transaction-monitor.js
   const { getProvider } = require("./blockchain");
   const db = require("./db");</p>
<p>async function monitorTransaction(txHash, networkId) {
     const provider = getProvider(networkId);</p>
<div class="codehilite"><pre><span></span><code> // Store the transaction in the database
 await db.collection(&quot;Transaction&quot;).insertOne({
   hash: txHash,
   networkId,
   status: &quot;pending&quot;,
   createdAt: new Date(),
   attempts: 0
 });

 // Get initial transaction receipt
 let receipt = await provider.getTransactionReceipt(txHash);

 // Transaction is still pending
 if (!receipt) {
   // Schedule check for later
   setTimeout(() =&gt; checkTransaction(txHash, networkId), 15000);
   return { status: &quot;pending&quot; };
 }

 // Transaction is mined
 updateTransactionStatus(txHash, receipt);
 return {
   status: receipt.status ? &quot;confirmed&quot; : &quot;failed&quot;,
   receipt
 };
</code></pre></div>

<p>}</p>
<p>async function checkTransaction(txHash, networkId) {
     try {
       const provider = getProvider(networkId);
       const receipt = await provider.getTransactionReceipt(txHash);</p>
<div class="codehilite"><pre><span></span><code>   if (!receipt) {
     // Still pending, check if it&#39;s been too long
     const tx = await db.collection(&quot;Transaction&quot;).findOne({ hash: txHash });
     const age = Date.now() - tx.createdAt.getTime();
     const attempts = tx.attempts + 1;

     await db.collection(&quot;Transaction&quot;).updateOne(
       { hash: txHash },
       { $set: { attempts }, $currentDate: { lastChecked: true } }
     );

     if (age &gt; 3600000) { // 1 hour
       // Transaction has been pending too long
       await db.collection(&quot;Transaction&quot;).updateOne(
         { hash: txHash },
         { $set: { status: &quot;stalled&quot; } }
       );
       // Could notify an admin here
     } else {
       // Check again later
       setTimeout(() =&gt; checkTransaction(txHash, networkId), 30000);
     }
     return;
   }

   // Transaction is mined, update status
   updateTransactionStatus(txHash, receipt);
 } catch (error) {
   console.error(`Error checking transaction ${txHash}:`, error);
 }
</code></pre></div>

<p>}</p>
<p>async function updateTransactionStatus(txHash, receipt) {
     const status = receipt.status ? "confirmed" : "failed";</p>
<div class="codehilite"><pre><span></span><code> await db.collection(&quot;Transaction&quot;).updateOne(
   { hash: txHash },
   {
     $set: {
       status,
       blockNumber: receipt.blockNumber,
       gasUsed: receipt.gasUsed.toString(),
       effectiveGasPrice: receipt.effectiveGasPrice.toString()
     }
   }
 );
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Transaction event listener</strong>:</li>
</ol>
<p>```javascript
   // src/lib/event-listener.js
   const { getWebSocketProvider } = require("./blockchain");
   const db = require("./db");</p>
<p>class TransactionEventListener {
     constructor(networkId) {
       this.networkId = networkId;
       this.provider = getWebSocketProvider(networkId);
       this.contracts = new Map();
     }</p>
<div class="codehilite"><pre><span></span><code> addContract(address, abi, name) {
   const contract = new ethers.Contract(address, abi, this.provider);
   this.contracts.set(address, { contract, name });

   console.log(`Added contract ${name} at ${address} for event monitoring`);
   return contract;
 }

 startListening() {
   // Listen for new blocks
   this.provider.on(&quot;block&quot;, this.handleNewBlock.bind(this));

   // Listen for specific events on each contract
   for (const [address, { contract, name }] of this.contracts.entries()) {
     contract.on(&quot;*&quot;, (...args) =&gt; {
       const event = args[args.length - 1];
       this.handleContractEvent(name, event);
     });
   }
 }

 async handleNewBlock(blockNumber) {
   console.log(`New block: ${blockNumber} on network ${this.networkId}`);

   // Check pending transactions
   const pendingTxs = await db.collection(&quot;Transaction&quot;).find({
     networkId: this.networkId,
     status: &quot;pending&quot;
   }).toArray();

   for (const tx of pendingTxs) {
     try {
       const receipt = await this.provider.getTransactionReceipt(tx.hash);
       if (receipt) {
         const status = receipt.status ? &quot;confirmed&quot; : &quot;failed&quot;;

         await db.collection(&quot;Transaction&quot;).updateOne(
           { hash: tx.hash },
           {
             $set: {
               status,
               blockNumber: receipt.blockNumber,
               gasUsed: receipt.gasUsed.toString(),
               effectiveGasPrice: receipt.effectiveGasPrice.toString()
             }
           }
         );

         console.log(`Transaction ${tx.hash} ${status} in block ${receipt.blockNumber}`);
       }
     } catch (error) {
       console.error(`Error checking transaction ${tx.hash}:`, error);
     }
   }
 }

 async handleContractEvent(contractName, event) {
   console.log(`Event from ${contractName}: ${event.event}`);

   // Store event in database
   await db.collection(&quot;ContractEvent&quot;).insertOne({
     contractName,
     eventName: event.event,
     transactionHash: event.transactionHash,
     blockNumber: event.blockNumber,
     args: JSON.parse(JSON.stringify(event.args)), // Convert BigNumber to string
     timestamp: new Date()
   });

   // Emit event for WebSocket clients if needed
 }

 stop() {
   this.provider.removeAllListeners();

   for (const [address, { contract }] of this.contracts.entries()) {
     contract.removeAllListeners();
   }

   console.log(`Stopped event listener for network ${this.networkId}`);
 }
</code></pre></div>

<p>}
   ```</p>
<h3 id="gas-price-management">Gas Price Management<a class="headerlink" href="#gas-price-management" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Gas price estimation</strong>:</li>
</ol>
<p>```javascript
   // src/lib/gas-price.js
   const { ethers } = require("ethers");
   const { getProvider } = require("./blockchain");</p>
<p>async function estimateGasPrice(networkId, priority = "medium") {
     try {
       const provider = getProvider(networkId);</p>
<div class="codehilite"><pre><span></span><code>   // Get current gas price from provider
   const gasPrice = await provider.getGasPrice();

   // Apply multipliers based on priority
   const multipliers = {
     low: 0.8,
     medium: 1.0,
     high: 1.5,
     urgent: 2.0
   };

   const multiplier = multipliers[priority] || 1.0;
   return gasPrice.mul(Math.floor(multiplier * 100)).div(100);
 } catch (error) {
   console.error(`Error estimating gas price:`, error);
   // Fallback gas prices (in gwei)
   const fallbackPrices = {
     1: { low: 20, medium: 30, high: 50, urgent: 80 }, // Mainnet
     84532: { low: 1, medium: 1.5, high: 2, urgent: 3 } // BaseSepolia
   };

   const gweiPrice = fallbackPrices[networkId]?.[priority] || 10;
   return ethers.utils.parseUnits(gweiPrice.toString(), &quot;gwei&quot;);
 }
</code></pre></div>

<p>}</p>
<p>async function getGasSettings(networkId, priority = "medium") {
     const gasPrice = await estimateGasPrice(networkId, priority);</p>
<div class="codehilite"><pre><span></span><code> // For EIP-1559 compatible networks, use maxFeePerGas and maxPriorityFeePerGas
 const provider = getProvider(networkId);
 const network = await provider.getNetwork();

 // Check if network supports EIP-1559
 const block = await provider.getBlock(&quot;latest&quot;);
 const eip1559Support = block &amp;&amp; block.baseFeePerGas !== undefined;

 if (eip1559Support) {
   const baseFeePerGas = block.baseFeePerGas;

   // Priority fee multipliers
   const priorityFeeMultipliers = {
     low: 1.0,
     medium: 1.5,
     high: 2.0,
     urgent: 3.0
   };

   const multiplier = priorityFeeMultipliers[priority] || 1.5;
   const maxPriorityFeePerGas = ethers.utils.parseUnits(&quot;1&quot;, &quot;gwei&quot;).mul(multiplier);

   // maxFeePerGas = (baseFeePerGas * 2) + maxPriorityFeePerGas
   const maxFeePerGas = baseFeePerGas.mul(2).add(maxPriorityFeePerGas);

   return { maxFeePerGas, maxPriorityFeePerGas };
 }

 // Fallback to regular gasPrice for non-EIP-1559 networks
 return { gasPrice };
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Transaction submission with gas management</strong>:</li>
</ol>
<p>```javascript
   // src/lib/transaction.js
   const { getProvider } = require("./blockchain");
   const { getGasSettings } = require("./gas-price");</p>
<p>async function sendTransaction(networkId, txData, priority = "medium") {
     const provider = getProvider(networkId);
     const signer = new ethers.Wallet(process.env.PRIVATE_KEY, provider);</p>
<div class="codehilite"><pre><span></span><code> // Get gas settings based on network and priority
 const gasSettings = await getGasSettings(networkId, priority);

 // Estimate gas limit
 const gasLimit = await provider.estimateGas({
   from: signer.address,
   to: txData.to,
   data: txData.data,
   value: txData.value || 0
 });

 // Add buffer to gas limit
 const gasLimitWithBuffer = gasLimit.mul(120).div(100); // 20% buffer

 // Construct transaction
 const transaction = {
   from: signer.address,
   to: txData.to,
   data: txData.data,
   value: txData.value || 0,
   gasLimit: gasLimitWithBuffer,
   ...gasSettings
 };

 // Send transaction
 const tx = await signer.sendTransaction(transaction);
 console.log(`Transaction sent: ${tx.hash}`);

 return tx;
</code></pre></div>

<p>}
   ```</p>
<h3 id="network-upgrades-handling">Network Upgrades Handling<a class="headerlink" href="#network-upgrades-handling" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Network upgrade detector</strong>:</li>
</ol>
<p>```javascript
   // src/lib/network-upgrade.js
   const { getProvider } = require("./blockchain");</p>
<p>async function checkNetworkUpgrade(networkId) {
     try {
       const provider = getProvider(networkId);</p>
<div class="codehilite"><pre><span></span><code>   // Get current block
   const block = await provider.getBlock(&quot;latest&quot;);

   // Check for fork identifier or other upgrade indicators
   const isEIP1559 = block &amp;&amp; block.baseFeePerGas !== undefined;

   // Check for upcoming network upgrades
   const upgrades = {
     1: [ // Ethereum Mainnet
       { name: &quot;Cancun&quot;, block: 19000000, active: block.number &gt;= 19000000 }
     ],
     84532: [ // BaseSepolia
       { name: &quot;Future Upgrade&quot;, block: 5000000, active: block.number &gt;= 5000000 }
     ]
   };

   const networkUpgrades = upgrades[networkId] || [];
   const upcomingUpgrades = networkUpgrades.filter(u =&gt; !u.active);
   const activeUpgrades = networkUpgrades.filter(u =&gt; u.active);

   return {
     currentBlock: block.number,
     features: {
       eip1559: isEIP1559
     },
     activeUpgrades,
     upcomingUpgrades
   };
 } catch (error) {
   console.error(`Error checking network upgrade:`, error);
   return { error: error.message };
 }
</code></pre></div>

<p>}
   ```</p>
<ol>
<li><strong>Handling network forks</strong>:</li>
</ol>
<p>```javascript
   // src/lib/fork-handler.js
   const { getProvider } = require("./blockchain");</p>
<p>class ForkHandler {
     constructor(networkId) {
       this.networkId = networkId;
       this.provider = getProvider(networkId);
       this.forkBlocks = {
         1: { // Ethereum Mainnet
           "Cancun": 19000000
         },
         84532: { // BaseSepolia
           "FutureUpgrade": 5000000
         }
       };
     }</p>
<div class="codehilite"><pre><span></span><code> async detectFork() {
   const currentBlock = await this.provider.getBlockNumber();
   const networkForks = this.forkBlocks[this.networkId] || {};

   const activeForks = [];
   const pendingForks = [];

   for (const [name, blockNumber] of Object.entries(networkForks)) {
     if (currentBlock &gt;= blockNumber) {
       activeForks.push({ name, blockNumber });
     } else {
       pendingForks.push({
         name,
         blockNumber,
         blocksRemaining: blockNumber - currentBlock
       });
     }
   }

   return { currentBlock, activeForks, pendingForks };
 }

 async adjustForFork(txParams) {
   const forkStatus = await this.detectFork();
   const newParams = { ...txParams };

   // Adjust transaction parameters based on active forks
   for (const fork of forkStatus.activeForks) {
     if (fork.name === &quot;Cancun&quot; || fork.name === &quot;London&quot;) {
       // EIP-1559 transaction type
       delete newParams.gasPrice;

       if (!newParams.maxFeePerGas) {
         const block = await this.provider.getBlock(&quot;latest&quot;);
         const baseFeePerGas = block.baseFeePerGas;

         newParams.maxPriorityFeePerGas = ethers.utils.parseUnits(&quot;1.5&quot;, &quot;gwei&quot;);
         newParams.maxFeePerGas = baseFeePerGas.mul(2).add(newParams.maxPriorityFeePerGas);
       }

       // Set type 2 transaction (EIP-1559)
       newParams.type = 2;
     }
   }

   return newParams;
 }
</code></pre></div>

<p>}
   ```</p>
<h2 id="version-control">Version Control<a class="headerlink" href="#version-control" title="Permanent link">&para;</a></h2>
<h3 id="repository-structure">Repository Structure<a class="headerlink" href="#repository-structure" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Recommended repository structure</strong>:</li>
</ol>
<p><code>gemforce/
    .github/                  # GitHub workflows and templates
    contracts/                # Smart contracts
       facets/               # Diamond facets
       interfaces/           # Contract interfaces
       libraries/            # Contract libraries
       upgradeInitializers/  # Initializers for upgrades
    deploy/                   # Deployment scripts
    deployments/              # Deployment artifacts
    docs/                     # Documentation
    scripts/                  # Utility scripts
    src/                      # Source code
       cloud-functions/      # Parse cloud functions
       lib/                  # Shared libraries
       indexer/              # Blockchain indexer
       triggers/             # Parse triggers
    test/                     # Tests
       unit/                 # Unit tests
       integration/          # Integration tests
       fixtures/             # Test fixtures
    .env.example              # Example environment variables
    hardhat.config.ts         # Hardhat configuration
    package.json              # Project metadata and dependencies
    tsconfig.json             # TypeScript configuration
    README.md                 # Project documentation</code></p>
<ol>
<li>
<p><strong>Repository organization best practices</strong>:</p>
</li>
<li>
<p>Separate smart contracts from off-chain code</p>
</li>
<li>Organize contracts by functionality</li>
<li>Use descriptive folder names</li>
<li>Keep tests close to the code they test</li>
<li>Include documentation for each component</li>
</ol>
<h3 id="branching-strategy">Branching Strategy<a class="headerlink" href="#branching-strategy" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Git Flow branching model</strong>:</li>
</ol>
<p><code>main           (production releases)
                                   
                                   
   staging               (pre-production testing)
                                    
                                    
   develop        (integration branch)
                                   
                                   
   feature/xyz                    (feature branches)
                                    
   feature/abc                      (feature branches)
                                      
   hotfix/123                          (hotfix branches)</code></p>
<ul>
<li><strong>main</strong>: Production code, tagged with version numbers</li>
<li><strong>staging</strong>: Pre-production testing</li>
<li><strong>develop</strong>: Integration branch for feature development</li>
<li><strong>feature/</strong>*:  Feature branches for new development</li>
<li>
<p><strong>hotfix/</strong>*:  Urgent fixes for production issues</p>
</li>
<li>
<p><strong>Branching guidelines</strong>:</p>
</li>
</ul>
<p>```bash
   # Create a new feature branch from develop
   git checkout develop
   git pull
   git checkout -b feature/new-feature</p>
<p># Work on the feature, committing changes
   git add .
   git commit -m "Implement new feature"</p>
<p># Push feature branch to remote
   git push -u origin feature/new-feature</p>
<p># When feature is complete, merge to develop
   git checkout develop
   git pull
   git merge --no-ff feature/new-feature
   git push origin develop</p>
<p># Create a hotfix branch from main
   git checkout main
   git pull
   git checkout -b hotfix/critical-fix</p>
<p># Fix the issue, commit changes
   git add .
   git commit -m "Fix critical issue"</p>
<p># Push hotfix branch
   git push -u origin hotfix/critical-fix</p>
<p># When hotfix is complete, merge to main and develop
   git checkout main
   git pull
   git merge --no-ff hotfix/critical-fix
   git push origin main</p>
<p>git checkout develop
   git pull
   git merge --no-ff hotfix/critical-fix
   git push origin develop
   ```</p>
<h3 id="release-management">Release Management<a class="headerlink" href="#release-management" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Semantic versioning</strong>:</li>
</ol>
<p><code>MAJOR.MINOR.PATCH</code></p>
<ul>
<li><strong>MAJOR</strong>: Breaking changes</li>
<li><strong>MINOR</strong>: New features, backwards compatible</li>
<li>
<p><strong>PATCH</strong>: Bug fixes, backwards compatible</p>
</li>
<li>
<p><strong>Release process</strong>:</p>
</li>
</ul>
<p>```bash
   # Prepare release from develop
   git checkout develop
   git pull
   git checkout -b release/1.2.0</p>
<p># Update version numbers
   npm version minor --no-git-tag-version</p>
<p># Make final adjustments
   git add .
   git commit -m "Prepare release 1.2.0"</p>
<p># Merge to staging for testing
   git checkout staging
   git pull
   git merge --no-ff release/1.2.0
   git push origin staging</p>
<p># Deploy to staging environment
   npm run deploy:staging</p>
<p># After testing, merge to main
   git checkout main
   git pull
   git merge --no-ff release/1.2.0
   git tag -a v1.2.0 -m "Release 1.2.0"
   git push origin main --tags</p>
<p># Update develop with any changes
   git checkout develop
   git pull
   git merge --no-ff release/1.2.0
   git push origin develop</p>
<p># Delete release branch
   git branch -d release/1.2.0
   ```</p>
<ol>
<li><strong>Changelog management</strong>:</li>
</ol>
<p>```markdown
   # Changelog</p>
<p>All notable changes to this project will be documented in this file.</p>
<p>## [1.2.0] - 2025-02-25</p>
<p>### Added
   - New carbon credit retirement feature
   - Support for multiple wallet providers</p>
<p>### Changed
   - Improved marketplace performance
   - Updated identity verification flow</p>
<p>### Fixed
   - Fixed issue with token minting
   - Resolved WebSocket connection stability</p>
<p>## [1.1.0] - 2025-01-15</p>
<p>### Added
   - Identity management system
   - DFNS wallet integration</p>
<p>### Changed
   - Upgraded Parse Server to latest version
   - Improved error handling</p>
<p>### Deprecated
   - Legacy API endpoints (to be removed in 2.0)
   ```</p>
<h3 id="tagging-conventions">Tagging Conventions<a class="headerlink" href="#tagging-conventions" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Version tags</strong>:</li>
</ol>
<p>```bash
   # Create an annotated version tag
   git tag -a v1.2.0 -m "Release 1.2.0"</p>
<p># Push tags to remote
   git push origin --tags
   ```</p>
<ol>
<li><strong>Environment tags</strong>:</li>
</ol>
<p>```bash
   # Create a tag for production deployment
   git tag -a prod-2025-02-25 -m "Production deployment on Feb 25, 2025"</p>
<p># Create a tag for staging deployment
   git tag -a staging-2025-02-20 -m "Staging deployment on Feb 20, 2025"
   ```</p>
<ol>
<li><strong>Contract deployment tags</strong>:</li>
</ol>
<p>```bash
   # Create a tag for contract deployment
   git tag -a deploy-mainnet-1.2.0 -m "Mainnet contract deployment v1.2.0"</p>
<p># Create a tag for facet upgrade
   git tag -a upgrade-marketplace-1.2.1 -m "Marketplace facet upgrade to v1.2.1"
   ```</p>
<h3 id="documentation-versioning">Documentation Versioning<a class="headerlink" href="#documentation-versioning" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Documentation directory structure</strong>:</li>
</ol>
<p><code>docs/
    latest/                  # Latest documentation (symlink to current version)
    v1.2.0/                  # Documentation for v1.2.0
       admin-guide.md       # Administrator guide
       api-reference.md     # API reference
       ...
    v1.1.0/                  # Documentation for v1.1.0
       admin-guide.md       # Administrator guide
       api-reference.md     # API reference
       ...
    ...</code></p>
<ol>
<li><strong>Version-specific documentation</strong>:</li>
</ol>
<p>```bash
   # Create a new documentation version
   mkdir -p docs/v1.2.0
   cp -r docs/v1.1.0/* docs/v1.2.0/</p>
<p># Update documentation for new version
   # Edit files in docs/v1.2.0/</p>
<p># Update the latest symlink
   rm docs/latest
   ln -s v1.2.0 docs/latest
   ```</p>
<ol>
<li><strong>Documentation in the codebase</strong>:</li>
</ol>
<p>```solidity
   // contracts/facets/MarketplaceFacet.sol</p>
<p>/*<em>
    * @title MarketplaceFacet
    * @dev Implements marketplace functionality for the Diamond
    * @notice This facet handles listing, buying, and selling tokens
    * @version 1.2.0
    </em>/
   contract MarketplaceFacet is Modifiers {
       // ...
   ```</p>
<p>```javascript
   // src/cloud-functions/marketplace.js</p>
<p>/*<em>
    * @api {post} /parse/functions/listItem List an item for sale
    * @apiVersion 1.2.0
    * @apiName ListItem
    * @apiGroup Marketplace
    * @apiDescription Lists a token for sale in the marketplace
    *
    * @apiParam {String} tokenId The ID of the token to list
    * @apiParam {String} price The price in ETH
    *
    * @apiSuccess {Object} result The result of the operation
    * @apiSuccess {Boolean} result.success Whether the operation was successful
    * @apiSuccess {String} result.transactionHash The transaction hash
    </em>/
   Parse.Cloud.define("listItem", async (request) =&gt; {
       // ...
   });</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../gemforce-administrator-guide/" class="btn btn-neutral float-left" title="Administrator Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../gemforce-integrator-guide/" class="btn btn-neutral float-right" title="Integrator Guide">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../gemforce-administrator-guide/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../gemforce-integrator-guide/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
