<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Gemforce Team" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Database Schema Overview - Gemforce Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Database Schema Overview";
        var mkdocs_page_input_path = "configuration-environment/database-schema-overview.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Gemforce Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../developer-setup-guide/">Developer Setup Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../system-architecture/gemforce-system-architecture/">System Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Contracts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../smart-contracts/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../smart-contracts/diamond/">Diamond Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../smart-contracts/diamond-factory/">Diamond Factory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../smart-contracts/identity-factory/">Identity Factory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Facets</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/marketplace-facet/">Marketplace Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/trade-deal-management-facet/">Trade Deal Management Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/carbon-credit-facet/">Carbon Credit Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/identity-registry-facet/">Identity Registry Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/trusted-issuers-registry-facet/">Trusted Issuers Registry Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/fee-distributor-facet/">Fee Distributor Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/gemforce-minter-facet/">Gemforce Minter Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/multi-sale-facet/">Multi Sale Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/svg-templates-facet/">SVG Templates Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/trade-deal-admin-facet/">Trade Deal Admin Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/trade-deal-operations-facet/">Trade Deal Operations Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/collateral-token-factory-facet/">Collateral Token Factory Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/diamond-cut-facet/">Diamond Cut Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/diamond-loupe-facet/">Diamond Loupe Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/facets/ownership-facet/">Ownership Facet</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Interfaces</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/idiamond/">IDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/imarketplace/">IMarketplace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/itradedeal/">ITradeDeal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/icarbon-credit/">ICarbonCredit</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/ierc1155-mint/">IERC1155Mint</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/ierc734/">IERC734</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/ierc735/">IERC735</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/ierc721a/">IERC721A</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/idiamond-factory/">IDiamondFactory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/iidentity/">IIdentity</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/imultisale/">IMultiSale</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/ifee-distributor/">IFeeDistributor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/igemforce-minter-facet/">IGemforceMinterFacet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/iidentity-registry/">IIdentityRegistry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/itrusted-issuers-registry/">TRUSTEDIssuersRegistry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/isvg/">ISVG</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/iattribute/">IAttribute</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/interfaces/ivariable-price/">IVariablePrice</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Libraries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/carbon-credit-lib/">Carbon Credit Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/trade-deal-lib/">Trade Deal Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/multi-sale-lib/">Multi Sale Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/diamond-factory-lib/">Diamond Factory Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/svg-templates-lib/">SVG Templates Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/attribute-lib/">Attribute Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/variable-price-lib/">Variable Price Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/merkle-prover/">Merkle Prover</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/fee-distributor-lib/">Fee Distributor Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/lib-diamond/">LibDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/diamond-lib/">DiamondLib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/erc721a-lib/">ERC721A Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/erc721a-enumeration-lib/">ERC721A Enumeration Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/strings-lib/">Strings Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/trusted-issuer-lib/">Trusted Issuer Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../smart-contracts/libraries/set-libraries/">Set Libraries</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SDK & Libraries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/blockchain/">Blockchain Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/diamond/">Diamond Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/contract/">Contract Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/deploy/">Deployment Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/validation-utils/">Validation Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/nft-sale-utils/">NFT Sale Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sdk-libraries/webhooks/">Webhooks Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../smart-contracts/libraries/metadata-lib/">Metadata Library</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Functions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/authentication/">Authentication Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/auth-functions/">Auth Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/blockchain/">Blockchain Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/bridge/">Bridge Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/contracts/">Contract Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/deploy/">Deploy Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/dfns/">DFNS Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/project/">Project Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/trade-deal/">Trade Deal Functions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api-documentation/gemforce-api-documentation/">Full API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api-documentation/gemforce-api-quick-reference/">Quick Reference</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../gemforce-external-services/">External Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../gemforce-system-architecture/">System Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Operations Tasks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/diamond/">Diamond Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/identities/">Identity Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/marketplace-management/">Marketplace Management Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/carbon-credit-management/">Carbon Credit Management Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/trade-deal/">Trade Deal Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/integration-test/">Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/integration-test-marketplace/">Marketplace Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/integration-test-trade-deal/">Trade Deal Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/admin-utils/">Admin Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/sync-diamond/">Sync Diamond Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cloud-functions/tasks/sync-events/">Sync Events Tasks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EIPs (Ethereum Improvement Proposals)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/EIP-DRAFT-Diamond-Enhanced-Marketplace/">Diamond-Enhanced Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/EIP-DRAFT-Multi-Token-Sale-Standard/">Multi-Token Sale Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/EIP-DRAFT-Collateralized-Trade-Deal-Standard/">Collateralized Trade Deal Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/EIP-DRAFT-Enhanced-Identity-System/">Enhanced Identity System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/EIP-DRAFT-Diamond-Factory-Standard/">Diamond Factory Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../eips/EIP-DRAFT-Carbon-Credit-Standard/">Carbon Credit Standard</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/development-environment-setup/">Development Environment Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/testing-frameworks/">Testing Frameworks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/debugging/">Debugging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/performance-optimization/">Performance Optimization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/test-case-specifications/">Test Case Specifications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/test-data-management/">Test Data Management</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guides/automated-testing-setup/">Automated Testing Setup</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../deployment-guides/multi-network-deployment/">Multi-Network Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deployment-guides/infrastructure-management/">Infrastructure Management</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deployment-guides/monitoring-logging/">Monitoring and Logging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../gemforce-administrator-guide/">Administrator Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../gemforce-deployer-guide/">Deployer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../gemforce-integrator-guide/">Integrator Guide</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Integrator's Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/rest-api/">REST API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/smart-contracts/">Smart Contracts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/dfns/">DFNS Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/parse-server/">Parse Server Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/webhooks/">Webhooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/error-handling/">Error Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/sample-code/">Sample Code</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/integration-patterns/">Integration Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/testing/">Testing Considerations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrator-guide/security/">Security</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../external-services/gemforce-external-services/">External Services</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Security</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../security/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../security/threat-model/">Threat Model and Risk Assessment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../security/incident-response/">Incident Response Procedures</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../security/audit-compliance/">Security Audits and Compliance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">External Developer Integration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../external-developer-integration/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../external-developer-integration/api-rate-limiting/">API Rate Limiting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../external-developer-integration/webhook-implementation-guidelines/">Webhook Implementation Guidelines</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../external-developer-integration/sdk-development-guidelines/">SDK Development Guidelines</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../external-developer-integration/partner-integration-guides/">Partner Integration Guides</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../gemforce-documentation-gap-analysis/">Documentation Gap Analysis</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../documentation-progress-summary/">Documentation Progress Summary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../documentation-plan/">Documentation Plan</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration & Environment</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../gemforce-config/">Gemforce Config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../environment-specific-guides/">Environment-Specific Guides</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configuration-validation/">Configuration Validation Procedures</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../external-service-config-management/">External Service Configuration Management</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Database Schema Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-primary-database-mongodb-parse-server">1. Primary Database: MongoDB (Parse Server)</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#11-key-classes-and-their-relationships">1.1. Key Classes and Their Relationships</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#12-parse-server-acls-and-pointers">1.2. Parse Server ACLs and Pointers</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-potential-secondary-database-postgresql">2. Potential Secondary Database: PostgreSQL</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#21-potential-use-cases">2.1. Potential Use Cases</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#22-example-tables-if-used-with-postgresql">2.2. Example Tables (if used with PostgreSQL)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-data-relationships-and-constraints">3. Data Relationships and Constraints</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-schema-evolution">4. Schema Evolution</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../database-migration-procedures/">Database Migration Procedures</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Gemforce Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Configuration & Environment</li>
      <li class="breadcrumb-item active">Database Schema Overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="database-schema-overview">Database Schema Overview<a class="headerlink" href="#database-schema-overview" title="Permanent link">&para;</a></h1>
<p>The Gemforce platform leverages a flexible database architecture, primarily built around MongoDB for Parse Server and potentially PostgreSQL for analytical or specialized data storage. This document provides an overview of the key data models and their relationships, offering insights into how data is structured and managed within the Gemforce ecosystem.</p>
<h2 id="1-primary-database-mongodb-parse-server">1. Primary Database: MongoDB (Parse Server)<a class="headerlink" href="#1-primary-database-mongodb-parse-server" title="Permanent link">&para;</a></h2>
<p>Parse Server utilizes MongoDB as its default database, providing a schema-less JSON document model that offers flexibility and scalability. While MongoDB is schema-less by nature, Parse Server enforces a soft schema, where <code>Classes</code> are analogous to tables and <code>Objects</code> are analogous to rows, with defined types for each <code>Key</code> (column).</p>
<h3 id="11-key-classes-and-their-relationships">1.1. Key Classes and Their Relationships<a class="headerlink" href="#11-key-classes-and-their-relationships" title="Permanent link">&para;</a></h3>
<p>Below are some of the critical Parse Server Classes and their typical relationships:</p>
<ul>
<li>
<p><strong><code>_User</code> (Users)</strong>:</p>
<ul>
<li>Represents platform users with fields like <code>username</code>, <code>email</code>, <code>password</code>, <code>sessionToken</code>, and custom fields for user profiles.</li>
<li><strong>Relationships</strong>:<ul>
<li>One-to-One with <code>IdentityProfile</code> (via <code>identityProfilePointer</code> or similar).</li>
<li>One-to-Many with <code>Parse.Session</code> (via <code>sessionToken</code>).</li>
<li>Many-to-Many with <code>Role</code> (via <code>_Role</code> class).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong><code>_Role</code> (Roles)</strong>:</p>
<ul>
<li>Defines user roles and permissions within the Parse Server system.</li>
<li><strong>Relationships</strong>: Many-to-Many with <code>_User</code>.</li>
</ul>
</li>
<li>
<p><strong><code>IdentityProfile</code></strong>:</p>
<ul>
<li>Stores detailed profile information for users' on-chain identities, linked to an <code>_User</code> account.</li>
<li>Fields may include <code>identityAddress</code> (ERC-735 identity contract address), <code>walletAddress</code>, <code>privateDataPointer</code> (ACL-protected to owner), <code>publicProfileData</code>.</li>
<li><strong>Relationships</strong>: One-to-One with <code>_User</code>.</li>
</ul>
</li>
<li>
<p><strong><code>SmartContractTransaction</code></strong>:</p>
<ul>
<li>Logs critical on-chain transactions initiated or observed by the platform, including details like <code>transactionHash</code>, <code>blockNumber</code>, <code>contractAddress</code>, <code>methodName</code>, <code>parameters</code>, <code>status</code>.</li>
<li><strong>Relationships</strong>: Potentially links to <code>_User</code> (if initiated by a user).</li>
</ul>
</li>
<li>
<p><strong><code>WebhookEvent</code></strong>:</p>
<ul>
<li>Stores incoming or outgoing webhook events, used for off-chain notifications and integrations.</li>
<li>Fields may include <code>eventType</code>, <code>payload</code>, <code>status</code>, <code>targetUrl</code>, <code>retryCount</code>.</li>
</ul>
</li>
<li>
<p><strong><code>CarbonCredit</code></strong>:</p>
<ul>
<li>Represents carbon credit NFTs, with fields like <code>tokenId</code>, <code>issuer</code>, <code>amount</code>, <code>vintage</code>, <code>state</code> (e.g., <code>issued</code>, <code>retired</code>), <code>metadataURI</code>, <code>smartContractAddress</code>.</li>
<li><strong>Relationships</strong>: One-to-One with the actual ERC-721A NFT on-chain.</li>
</ul>
</li>
<li>
<p><strong><code>TradeDeal</code></strong>:</p>
<ul>
<li>Represents the off-chain metadata and state of a trade deal, mirroring or complementing on-chain data.</li>
<li>Fields may include <code>tradeDealId</code> (bytes32 from chain), <code>borrowerUserPointer</code>, <code>lenderUserPointer</code>, <code>status</code>, <code>invoiceNFTId</code>, <code>collateralAmount</code>, <code>loanAmount</code>, <code>repaymentAmount</code>, <code>settlementTime</code>, <code>gracePeriod</code>.</li>
<li><strong>Relationships</strong>: One-to-One with <code>TradeDeal</code> on-chain. Links to <code>_User</code> for borrower/lender.</li>
</ul>
</li>
<li>
<p><strong><code>AuditLog</code></strong>:</p>
<ul>
<li>Records significant operational and security events, including <code>timestamp</code>, <code>actorUserPointer</code>, <code>actionType</code>, <code>targetObjectPointer</code>, <code>details</code>.</li>
<li><strong>Relationships</strong>: Links to <code>_User</code> (for the actor) and other relevant <code>Parse.Objects</code>.</li>
</ul>
</li>
<li>
<p><strong><code>SystemConfig</code></strong>:</p>
<ul>
<li>Stores dynamic platform configurations that are managed via the database rather than static code (e.g., feature flags, global settings).</li>
</ul>
</li>
</ul>
<h3 id="12-parse-server-acls-and-pointers">1.2. Parse Server ACLs and Pointers<a class="headerlink" href="#12-parse-server-acls-and-pointers" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Access Control Lists (ACLs)</strong>: Parse Server's security model heavily relies on ACLs to control read and write access to <code>Parse.Objects</code> down to the field level. Each object can have ACLs restricting access to specific <code>_User</code>s or <code>_Role</code>s.</li>
<li><strong>Pointers</strong>: Relationships between <code>Parse.Objects</code> are typically established using <code>Pointers</code>, which store a reference to another object's <code>objectId</code> and <code>className</code>.</li>
</ul>
<h2 id="2-potential-secondary-database-postgresql">2. Potential Secondary Database: PostgreSQL<a class="headerlink" href="#2-potential-secondary-database-postgresql" title="Permanent link">&para;</a></h2>
<p>While MongoDB handles most of Parse Server's data, PostgreSQL (or other relational databases) might be used for specific purposes requiring strong ACID compliance, complex relational queries, or integration with traditional BI tools.</p>
<h3 id="21-potential-use-cases">2.1. Potential Use Cases<a class="headerlink" href="#21-potential-use-cases" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Analytical Data</strong>: De-normalized or aggregated data for business intelligence and reporting.</li>
<li><strong>Financial Ledgers</strong>: For high-integrity financial transaction records that benefit from relational structure and ACID properties.</li>
<li><strong>Complex Relations</strong>: Scenarios where a highly normalized relational model is genuinely advantageous over MongoDB's document model.</li>
</ul>
<h3 id="22-example-tables-if-used-with-postgresql">2.2. Example Tables (if used with PostgreSQL)<a class="headerlink" href="#22-example-tables-if-used-with-postgresql" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>transactions_history</code></strong>:<ul>
<li><code>id</code>, <code>transaction_hash</code>, <code>from_address</code>, <code>to_address</code>, <code>amount</code>, <code>token_address</code>, <code>timestamp</code>, <code>status</code>.</li>
<li><strong>Relationships</strong>: Foreign key to <code>users</code> table (if user-related).</li>
</ul>
</li>
<li><strong><code>user_balances</code></strong>:<ul>
<li><code>user_id</code>, <code>token_address</code>, <code>balance</code>, <code>last_updated</code>.</li>
</ul>
</li>
</ul>
<h2 id="3-data-relationships-and-constraints">3. Data Relationships and Constraints<a class="headerlink" href="#3-data-relationships-and-constraints" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>One-to-One</strong>: E.g., <code>_User</code> to <code>IdentityProfile</code>. Enforced by application logic or unique constraints on pointer fields.</li>
<li><strong>One-to-Many</strong>: E.g., a <code>_User</code> can have many <code>SmartContractTransaction</code> records. Enforced by storing a pointer to the <code>_User</code> in the <code>SmartContractTransaction</code> class.</li>
<li><strong>Many-to-Many</strong>: E.g., <code>_User</code> to <code>_Role</code> through the <code>_Role</code> default class.</li>
<li><strong>Data Integrity</strong>: Achieved through a combination of:<ul>
<li><strong>Parse Server Hooks</strong>: <code>beforeSave</code>, <code>afterSave</code>, <code>beforeDelete</code>, etc., can implement server-side validation and business logic.</li>
<li><strong>Client-side Validation</strong>: Initial validation in front-end or mobile applications.</li>
<li><strong>Cloud Function Logic</strong>: Orchestrating complex relationships and ensuring consistency.</li>
<li><strong>On-chain Data Mirroring</strong>: For blockchain data, the Parse Server classes often mirror and index on-chain state, benefiting from the blockchain's own integrity mechanisms.</li>
</ul>
</li>
</ul>
<h2 id="4-schema-evolution">4. Schema Evolution<a class="headerlink" href="#4-schema-evolution" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>MongoDB's Flexibility</strong>: The schema-less nature of MongoDB makes it easier to evolve the database schema compared to relational databases, as new fields can be added to documents without requiring an immediate database migration.</li>
<li><strong>Parse Server Migrations</strong>: For significant changes (e.g., renaming fields, changing data types for existing data), Parse Server provides tools and best practices for running data migrations.</li>
<li><strong>Versioning</strong>: Application logic should be designed to be backward compatible with older data schemas during migration periods, if necessary.</li>
</ul>
<p>Understanding these database schemas and their management principles is crucial for developers working on data-driven features and ensuring the long-term integrity and scalability of the Gemforce platform.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../external-service-config-management/" class="btn btn-neutral float-left" title="External Service Configuration Management"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../database-migration-procedures/" class="btn btn-neutral float-right" title="Database Migration Procedures">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../external-service-config-management/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../database-migration-procedures/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
