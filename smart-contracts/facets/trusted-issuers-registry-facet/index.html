<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Gemforce Team" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Trusted Issuers Registry Facet - Gemforce Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Trusted Issuers Registry Facet";
        var mkdocs_page_input_path = "smart-contracts/facets/trusted-issuers-registry-facet.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Gemforce Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../developer-setup-guide/">Developer Setup Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../system-architecture/gemforce-system-architecture/">System Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Contracts</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../diamond/">Diamond Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../diamond-factory/">Diamond Factory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../identity-factory/">Identity Factory</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Facets</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../marketplace-facet/">Marketplace Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-management-facet/">Trade Deal Management Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../carbon-credit-facet/">Carbon Credit Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../identity-registry-facet/">Identity Registry Facet</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Trusted Issuers Registry Facet</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contract-details">Contract Details</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#key-features">Key Features</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#trusted-issuer-management">ðŸ”¹ Trusted Issuer Management</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claim-topic-authorization">ðŸ”¹ Claim Topic Authorization</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#registry-operations">ðŸ”¹ Registry Operations</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#access-control-integration">ðŸ”¹ Access Control Integration</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#core-data-structures">Core Data Structures</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#trustedissuer-struct">TrustedIssuer Struct</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#storage-pattern">Storage Pattern</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#core-functions">Core Functions</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#issuer-management-functions">Issuer Management Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claim-topic-management-functions">Claim Topic Management Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#query-functions">Query Functions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#integration-examples">Integration Examples</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#kyc-provider-management">KYC Provider Management</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#dynamic-permission-management">Dynamic Permission Management</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#issuer-authorization-middleware">Issuer Authorization Middleware</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#registry-analytics">Registry Analytics</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#events">Events</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#issuer-management-events">Issuer Management Events</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claim-topic-events">Claim Topic Events</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security-considerations">Security Considerations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#access-control">Access Control</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#data-integrity">Data Integrity</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#permission-management">Permission Management</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gas-optimization">Gas Optimization</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#storage-efficiency">Storage Efficiency</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#query-optimization">Query Optimization</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#issuer-management-errors">Issuer Management Errors</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#permission-errors">Permission Errors</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#testing-considerations">Testing Considerations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#unit-tests">Unit Tests</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#integration-tests">Integration Tests</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#related-documentation">Related Documentation</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../fee-distributor-facet/">Fee Distributor Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../gemforce-minter-facet/">Gemforce Minter Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../multi-sale-facet/">Multi Sale Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../svg-templates-facet/">SVG Templates Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-admin-facet/">Trade Deal Admin Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-operations-facet/">Trade Deal Operations Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../collateral-token-factory-facet/">Collateral Token Factory Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../diamond-cut-facet/">Diamond Cut Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../diamond-loupe-facet/">Diamond Loupe Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ownership-facet/">Ownership Facet</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Interfaces</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/idiamond/">IDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/imarketplace/">IMarketplace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/itradedeal/">ITradeDeal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/icarbon-credit/">ICarbonCredit</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc1155-mint/">IERC1155Mint</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc734/">IERC734</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc735/">IERC735</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc721a/">IERC721A</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/idiamond-factory/">IDiamondFactory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/iidentity/">IIdentity</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/imultisale/">IMultiSale</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ifee-distributor/">IFeeDistributor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/igemforce-minter-facet/">IGemforceMinterFacet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/iidentity-registry/">IIdentityRegistry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/itrusted-issuers-registry/">TRUSTEDIssuersRegistry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/isvg/">ISVG</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/iattribute/">IAttribute</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Libraries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/carbon-credit-lib/">Carbon Credit Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/trade-deal-lib/">Trade Deal Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/multi-sale-lib/">Multi Sale Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/diamond-factory-lib/">Diamond Factory Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/svg-templates-lib/">SVG Templates Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/attribute-lib/">Attribute Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/variable-price-lib/">Variable Price Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/merkle-prover/">Merkle Prover</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/fee-distributor-lib/">Fee Distributor Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/lib-diamond/">LibDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/diamond-lib/">DiamondLib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/erc721a-lib/">ERC721A Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/erc721a-enumeration-lib/">ERC721A Enumeration Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/strings-lib/">Strings Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/trusted-issuer-lib/">Trusted Issuer Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/set-libraries/">Set Libraries</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SDK & Libraries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/blockchain/">Blockchain Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/diamond/">Diamond Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/contract/">Contract Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/deploy/">Deployment Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/validation-utils/">Validation Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/nft-sale-utils/">NFT Sale Utilities</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Functions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/authentication/">Authentication Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/auth-functions/">Auth Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/blockchain/">Blockchain Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/bridge/">Bridge Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/contracts/">Contract Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/deploy/">Deploy Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/dfns/">DFNS Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/project/">Project Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/trade-deal/">Trade Deal Functions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api-documentation/gemforce-api-documentation/">Full API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api-documentation/gemforce-api-quick-reference/">Quick Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Operations Tasks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/diamond/">Diamond Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/identities/">Identity Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/marketplace-management/">Marketplace Management Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/carbon-credit-management/">Carbon Credit Management Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/trade-deal/">Trade Deal Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/integration-test/">Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/integration-test-marketplace/">Marketplace Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/integration-test-trade-deal/">Trade Deal Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/admin-utils/">Admin Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/sync-diamond/">Sync Diamond Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/sync-events/">Sync Events Tasks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EIPs (Ethereum Improvement Proposals)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Diamond-Enhanced-Marketplace/">Diamond-Enhanced Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Multi-Token-Sale-Standard/">Multi-Token Sale Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Collateralized-Trade-Deal-Standard/">Collateralized Trade Deal Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Enhanced-Identity-System/">Enhanced Identity System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Diamond-Factory-Standard/">Diamond Factory Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Carbon-Credit-Standard/">Carbon Credit Standard</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-administrator-guide/">Administrator Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-deployer-guide/">Deployer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-integrator-guide/">Integrator Guide</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Integrator's Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/rest-api/">REST API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/smart-contracts/">Smart Contracts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/dfns/">DFNS Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/webhooks/">Webhooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/error-handling/">Error Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/sample-code/">Sample Code</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/integration-patterns/">Integration Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/security/">Security</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../external-services/gemforce-external-services/">External Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-documentation-gap-analysis/">Documentation Gap Analysis</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../documentation-progress-summary/">Documentation Progress Summary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../documentation-plan/">Documentation Plan</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Gemforce Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Smart Contracts</li>
          <li class="breadcrumb-item">Facets</li>
      <li class="breadcrumb-item active">Trusted Issuers Registry Facet</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="trustedissuersregistryfacet">TrustedIssuersRegistryFacet<a class="headerlink" href="#trustedissuersregistryfacet" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The <a href="/Users/sschepis/Development/gem-base/contracts/facets/TrustedIssuersRegistryFacet.sol"><code>TrustedIssuersRegistryFacet.sol</code></a> manages the registry of trusted issuers within the Gemforce identity system. This facet provides comprehensive functionality for authorizing, managing, and querying trusted entities that can issue and manage identity claims within the decentralized identity framework.</p>
<h2 id="contract-details">Contract Details<a class="headerlink" href="#contract-details" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Contract Name</strong>: <code>TrustedIssuersRegistryFacet</code></li>
<li><strong>Inheritance</strong>: <code>ITrustedIssuersRegistry</code>, <code>Modifiers</code></li>
<li><strong>License</strong>: MIT</li>
<li><strong>Solidity Version</strong>: ^0.8.0</li>
</ul>
<h2 id="key-features">Key Features<a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h2>
<h3 id="trusted-issuer-management">ðŸ”¹ Trusted Issuer Management<a class="headerlink" href="#trusted-issuer-management" title="Permanent link">&para;</a></h3>
<ul>
<li>Add and remove trusted issuers from the registry</li>
<li>Update issuer permissions and claim topic authorizations</li>
<li>Complete lifecycle management of issuer credentials</li>
</ul>
<h3 id="claim-topic-authorization">ðŸ”¹ Claim Topic Authorization<a class="headerlink" href="#claim-topic-authorization" title="Permanent link">&para;</a></h3>
<ul>
<li>Granular control over which claim topics each issuer can manage</li>
<li>Add and remove specific claim topic permissions</li>
<li>Batch claim topic management for efficient operations</li>
</ul>
<h3 id="registry-operations">ðŸ”¹ Registry Operations<a class="headerlink" href="#registry-operations" title="Permanent link">&para;</a></h3>
<ul>
<li>Query all trusted issuers in the system</li>
<li>Check issuer status and permissions</li>
<li>Retrieve issuer-specific claim topic authorizations</li>
</ul>
<h3 id="access-control-integration">ðŸ”¹ Access Control Integration<a class="headerlink" href="#access-control-integration" title="Permanent link">&para;</a></h3>
<ul>
<li>Owner-only administrative functions</li>
<li>Integration with identity registry access control</li>
<li>Secure permission management for claim operations</li>
</ul>
<h2 id="core-data-structures">Core Data Structures<a class="headerlink" href="#core-data-structures" title="Permanent link">&para;</a></h2>
<h3 id="trustedissuer-struct">TrustedIssuer Struct<a class="headerlink" href="#trustedissuer-struct" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">struct</span><span class="w"> </span><span class="nv">TrustedIssuer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">issuerAddress</span><span class="p">;</span><span class="w">      </span><span class="c1">// Address of the trusted issuer</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>claimTopics<span class="p">;</span><span class="w">        </span><span class="c1">// Array of authorized claim topics</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nv">exists</span><span class="p">;</span><span class="w">               </span><span class="c1">// Flag indicating if issuer exists</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="storage-pattern">Storage Pattern<a class="headerlink" href="#storage-pattern" title="Permanent link">&para;</a></h3>
<p>Uses diamond storage pattern via <a href="../libraries/identity-system-storage.md"><code>IdentitySystemStorage</code></a>:
- Prevents storage collisions in diamond architecture
- Efficient mappings for issuer data and permissions
- Persistent storage across contract upgrades</p>
<h2 id="core-functions">Core Functions<a class="headerlink" href="#core-functions" title="Permanent link">&para;</a></h2>
<h3 id="issuer-management-functions">Issuer Management Functions<a class="headerlink" href="#issuer-management-functions" title="Permanent link">&para;</a></h3>
<h4 id="addtrustedissuer"><code>addTrustedIssuer()</code><a class="headerlink" href="#addtrustedissuer" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">addTrustedIssuer</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_trustedIssuer</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>_claimTopics
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Adds a new trusted issuer to the registry with specified claim topic permissions.</p>
<p><strong>Parameters</strong>:
- <code>_trustedIssuer</code> (address): Address of the issuer to add
- <code>_claimTopics</code> (uint[]): Array of claim topics the issuer is authorized for</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>:
- Issuer must not already exist in the registry
- Address must be valid (non-zero)</p>
<p><strong>Process</strong>:
1. Validates issuer doesn't already exist
2. Adds issuer to storage with specified claim topics
3. Updates issuer address list
4. Emits TrustedIssuerAdded event</p>
<p><strong>Events</strong>: <code>TrustedIssuerAdded(issuerAddress, claimTopics)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Add KYC provider as trusted issuer</span>
<span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>kycTopics<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">2</span><span class="p">);</span>
kycTopics<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// KYC_TOPIC</span>
kycTopics<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// ACCREDITED_INVESTOR_TOPIC</span>

ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>addTrustedIssuer<span class="p">(</span>
<span class="w">    </span>kycProviderAddress<span class="p">,</span>
<span class="w">    </span>kycTopics
<span class="p">);</span>
</code></pre></div>

<p><strong>Error Conditions</strong>:
- <code>"Trusted issuer already exists"</code> - Issuer is already registered</p>
<hr />
<h4 id="removetrustedissuer"><code>removeTrustedIssuer()</code><a class="headerlink" href="#removetrustedissuer" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">removeTrustedIssuer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_trustedIssuer</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Removes a trusted issuer from the registry, revoking all their permissions.</p>
<p><strong>Parameters</strong>:
- <code>_trustedIssuer</code> (address): Address of the issuer to remove</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>: Issuer must exist in the registry</p>
<p><strong>Process</strong>:
1. Validates issuer exists
2. Removes issuer from storage
3. Cleans up issuer address list
4. Emits TrustedIssuerRemoved event</p>
<p><strong>Events</strong>: <code>TrustedIssuerRemoved(issuerAddress)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Remove compromised or expired issuer</span>
ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>removeTrustedIssuer<span class="p">(</span>expiredIssuerAddress<span class="p">);</span>
</code></pre></div>

<p><strong>Error Conditions</strong>:
- <code>"Trusted issuer does not exist"</code> - Issuer is not registered</p>
<hr />
<h4 id="updateissuerclaimtopics"><code>updateIssuerClaimTopics()</code><a class="headerlink" href="#updateissuerclaimtopics" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">updateIssuerClaimTopics</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_trustedIssuer</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>_claimTopics
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Updates the claim topics that a trusted issuer is authorized to manage.</p>
<p><strong>Parameters</strong>:
- <code>_trustedIssuer</code> (address): Address of the issuer to update
- <code>_claimTopics</code> (uint[]): New array of authorized claim topics</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>: Issuer must exist in the registry</p>
<p><strong>Process</strong>:
1. Validates issuer exists
2. Replaces existing claim topics with new ones
3. Updates storage mappings
4. Emits ClaimTopicsUpdated event</p>
<p><strong>Events</strong>: <code>ClaimTopicsUpdated(issuerAddress, claimTopics)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Update issuer permissions to include new claim types</span>
<span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>updatedTopics<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">3</span><span class="p">);</span>
updatedTopics<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// KYC_TOPIC</span>
updatedTopics<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// ACCREDITED_INVESTOR_TOPIC</span>
updatedTopics<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// JURISDICTION_TOPIC</span>

ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>updateIssuerClaimTopics<span class="p">(</span>
<span class="w">    </span>issuerAddress<span class="p">,</span>
<span class="w">    </span>updatedTopics
<span class="p">);</span>
</code></pre></div>

<p><strong>Error Conditions</strong>:
- <code>"Trusted issuer does not exist"</code> - Issuer is not registered</p>
<h3 id="claim-topic-management-functions">Claim Topic Management Functions<a class="headerlink" href="#claim-topic-management-functions" title="Permanent link">&para;</a></h3>
<h4 id="addtrustedissuerclaimtopic"><code>addTrustedIssuerClaimTopic()</code><a class="headerlink" href="#addtrustedissuerclaimtopic" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">addTrustedIssuerClaimTopic</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_issuer</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">_claimTopic</span>
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Adds a single claim topic to an existing trusted issuer's permissions.</p>
<p><strong>Parameters</strong>:
- <code>_issuer</code> (address): Address of the trusted issuer
- <code>_claimTopic</code> (uint): Claim topic to add</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>: Issuer must exist in the registry</p>
<p><strong>Process</strong>:
1. Validates issuer exists
2. Adds claim topic to issuer's authorized topics
3. Updates storage mappings</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Grant additional claim topic permission to existing issuer</span>
ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>addTrustedIssuerClaimTopic<span class="p">(</span>
<span class="w">    </span>issuerAddress<span class="p">,</span>
<span class="w">    </span>NEW_CLAIM_TOPIC
<span class="p">);</span>
</code></pre></div>

<p><strong>Error Conditions</strong>:
- <code>"Trusted issuer does not exist"</code> - Issuer is not registered</p>
<hr />
<h4 id="removetrustedissuerclaimtopic"><code>removeTrustedIssuerClaimTopic()</code><a class="headerlink" href="#removetrustedissuerclaimtopic" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">removeTrustedIssuerClaimTopic</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_issuer</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">_claimTopic</span>
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Removes a specific claim topic from a trusted issuer's permissions.</p>
<p><strong>Parameters</strong>:
- <code>_issuer</code> (address): Address of the trusted issuer
- <code>_claimTopic</code> (uint): Claim topic to remove</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>: Issuer must exist in the registry</p>
<p><strong>Process</strong>:
1. Validates issuer exists
2. Removes claim topic from issuer's authorized topics
3. Updates storage mappings
4. Emits ClaimTopicRemoved event</p>
<p><strong>Events</strong>: <code>ClaimTopicRemoved(issuer, claimTopic)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Revoke specific claim topic permission</span>
ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>removeTrustedIssuerClaimTopic<span class="p">(</span>
<span class="w">    </span>issuerAddress<span class="p">,</span>
<span class="w">    </span>REVOKED_CLAIM_TOPIC
<span class="p">);</span>
</code></pre></div>

<p><strong>Error Conditions</strong>:
- <code>"Trusted issuer does not exist"</code> - Issuer is not registered</p>
<h3 id="query-functions">Query Functions<a class="headerlink" href="#query-functions" title="Permanent link">&para;</a></h3>
<h4 id="gettrustedissuer"><code>getTrustedIssuer()</code><a class="headerlink" href="#gettrustedissuer" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getTrustedIssuer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">issuerAddress</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>TrustedIssuer<span class="w"> </span><span class="kt">memory</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns the complete trusted issuer struct for a given address.</p>
<p><strong>Parameters</strong>:
- <code>issuerAddress</code> (address): Address of the issuer to query</p>
<p><strong>Returns</strong>: TrustedIssuer struct containing issuer details and permissions</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code>TrustedIssuer<span class="w"> </span><span class="kt">memory</span><span class="w"> </span>issuer<span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>getTrustedIssuer<span class="p">(</span>issuerAddress<span class="p">);</span>

<span class="kt">if</span><span class="w"> </span><span class="p">(</span>issuer<span class="p">.</span>exists<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Issuer has&quot;</span><span class="p">,</span><span class="w"> </span>issuer<span class="p">.</span>claimTopics<span class="p">.</span>length<span class="p">,</span><span class="w"> </span><span class="s2">&quot;authorized claim topics&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="gettrustedissuers"><code>getTrustedIssuers()</code><a class="headerlink" href="#gettrustedissuers" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getTrustedIssuers</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>TrustedIssuer<span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns an array of all trusted issuers in the registry.</p>
<p><strong>Returns</strong>: Array of TrustedIssuer structs</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code>TrustedIssuer<span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>allIssuers<span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>getTrustedIssuers<span class="p">();</span>

<span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>allIssuers<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Issuer:&quot;</span><span class="p">,</span><span class="w"> </span>allIssuers<span class="p">[</span>i<span class="p">].</span>issuerAddress<span class="p">);</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Topics:&quot;</span><span class="p">,</span><span class="w"> </span>allIssuers<span class="p">[</span>i<span class="p">].</span>claimTopics<span class="p">.</span>length<span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="istrustedissuer"><code>isTrustedIssuer()</code><a class="headerlink" href="#istrustedissuer" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">isTrustedIssuer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_issuer</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Checks if an address is registered as a trusted issuer.</p>
<p><strong>Parameters</strong>:
- <code>_issuer</code> (address): Address to check</p>
<p><strong>Returns</strong>: True if the address is a trusted issuer, false otherwise</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nv">isTrusted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>isTrustedIssuer<span class="p">(</span>issuerAddress<span class="p">);</span>

<span class="kt">if</span><span class="w"> </span><span class="p">(</span>isTrusted<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Allow issuer operations</span>
<span class="p">}</span><span class="w"> </span><span class="kt">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>revert<span class="p">(</span><span class="s2">&quot;Unauthorized issuer&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="gettrustedissuerclaimtopics"><code>getTrustedIssuerClaimTopics()</code><a class="headerlink" href="#gettrustedissuerclaimtopics" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getTrustedIssuerClaimTopics</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_trustedIssuer</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns all claim topics that a trusted issuer is authorized for.</p>
<p><strong>Parameters</strong>:
- <code>_trustedIssuer</code> (address): Address of the trusted issuer</p>
<p><strong>Returns</strong>: Array of authorized claim topic IDs</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>authorizedTopics<span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>getTrustedIssuerClaimTopics<span class="p">(</span>issuerAddress<span class="p">);</span>

<span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>authorizedTopics<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Authorized for claim topic:&quot;</span><span class="p">,</span><span class="w"> </span>authorizedTopics<span class="p">[</span>i<span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="hastrustedissuerclaimtopic"><code>hasTrustedIssuerClaimTopic()</code><a class="headerlink" href="#hastrustedissuerclaimtopic" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">hasTrustedIssuerClaimTopic</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_issuer</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">_claimTopic</span>
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Checks if a trusted issuer is authorized for a specific claim topic.</p>
<p><strong>Parameters</strong>:
- <code>_issuer</code> (address): Address of the issuer
- <code>_claimTopic</code> (uint): Claim topic to check</p>
<p><strong>Returns</strong>: True if the issuer is authorized for the claim topic, false otherwise</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nv">canIssueKYC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>hasTrustedIssuerClaimTopic<span class="p">(</span>
<span class="w">    </span>issuerAddress<span class="p">,</span>
<span class="w">    </span>KYC_TOPIC
<span class="p">);</span>

<span class="kt">require</span><span class="p">(</span>canIssueKYC<span class="p">,</span><span class="w"> </span><span class="s2">&quot;Issuer not authorized for KYC claims&quot;</span><span class="p">);</span>
</code></pre></div>

<h2 id="integration-examples">Integration Examples<a class="headerlink" href="#integration-examples" title="Permanent link">&para;</a></h2>
<h3 id="kyc-provider-management">KYC Provider Management<a class="headerlink" href="#kyc-provider-management" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Complete KYC provider setup</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">KYCProviderManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>KYC_TOPIC<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>ACCREDITED_TOPIC<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>JURISDICTION_TOPIC<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setupKYCProvider</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">provider</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 1. Define claim topics for KYC provider</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>kycTopics<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">3</span><span class="p">);</span>
<span class="w">        </span>kycTopics<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>KYC_TOPIC<span class="p">;</span>
<span class="w">        </span>kycTopics<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ACCREDITED_TOPIC<span class="p">;</span>
<span class="w">        </span>kycTopics<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>JURISDICTION_TOPIC<span class="p">;</span>

<span class="w">        </span><span class="c1">// 2. Add as trusted issuer</span>
<span class="w">        </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>addTrustedIssuer<span class="p">(</span>provider<span class="p">,</span><span class="w"> </span>kycTopics<span class="p">);</span>

<span class="w">        </span><span class="c1">// 3. Verify setup</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>isTrustedIssuer<span class="p">(</span>provider<span class="p">),</span>
<span class="w">            </span><span class="s2">&quot;KYC provider setup failed&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">revokeKYCProvider</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">provider</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Remove all permissions</span>
<span class="w">        </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>removeTrustedIssuer<span class="p">(</span>provider<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="dynamic-permission-management">Dynamic Permission Management<a class="headerlink" href="#dynamic-permission-management" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Manage issuer permissions dynamically</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">IssuerPermissionManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">grantClaimTopicPermission</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">issuer</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">claimTopic</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>isTrustedIssuer<span class="p">(</span>issuer<span class="p">),</span>
<span class="w">            </span><span class="s2">&quot;Not a trusted issuer&quot;</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Check if issuer already has this permission</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>hasTrustedIssuerClaimTopic<span class="p">(</span>issuer<span class="p">,</span><span class="w"> </span>claimTopic<span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>addTrustedIssuerClaimTopic<span class="p">(</span>issuer<span class="p">,</span><span class="w"> </span>claimTopic<span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">revokeClaimTopicPermission</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">issuer</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">claimTopic</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>hasTrustedIssuerClaimTopic<span class="p">(</span>issuer<span class="p">,</span><span class="w"> </span>claimTopic<span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>removeTrustedIssuerClaimTopic<span class="p">(</span>issuer<span class="p">,</span><span class="w"> </span>claimTopic<span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="issuer-authorization-middleware">Issuer Authorization Middleware<a class="headerlink" href="#issuer-authorization-middleware" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Middleware for validating issuer permissions</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">IssuerAuthorizationMiddleware</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>requiresTrustedIssuer<span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">issuer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>isTrustedIssuer<span class="p">(</span>issuer<span class="p">),</span>
<span class="w">            </span><span class="s2">&quot;Not a trusted issuer&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span>_<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>requiresClaimTopicPermission<span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">issuer</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">claimTopic</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>hasTrustedIssuerClaimTopic<span class="p">(</span>issuer<span class="p">,</span><span class="w"> </span>claimTopic<span class="p">),</span>
<span class="w">            </span><span class="s2">&quot;Issuer not authorized for claim topic&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span>_<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">issueClaimWithValidation</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">user</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">claimTopic</span><span class="p">,</span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>claimData
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>
<span class="w">        </span>requiresTrustedIssuer<span class="p">(</span><span class="k">msg.sender</span><span class="p">)</span>
<span class="w">        </span>requiresClaimTopicPermission<span class="p">(</span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span>claimTopic<span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Proceed with claim issuance</span>
<span class="w">        </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>addClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>claimTopic<span class="p">,</span><span class="w"> </span>claimData<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="registry-analytics">Registry Analytics<a class="headerlink" href="#registry-analytics" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Analytics and reporting for trusted issuers</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">TrustedIssuerAnalytics</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getRegistryStats</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">totalIssuers</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">totalClaimTopics</span><span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>issuerAddresses
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>TrustedIssuer<span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>issuers<span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>getTrustedIssuers<span class="p">();</span>

<span class="w">        </span>totalIssuers<span class="w"> </span><span class="o">=</span><span class="w"> </span>issuers<span class="p">.</span>length<span class="p">;</span>
<span class="w">        </span>issuerAddresses<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">address</span><span class="p">[](</span>totalIssuers<span class="p">);</span>

<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">uniqueTopics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span>
<span class="w">        </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span>seenTopics<span class="p">;</span>

<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>issuers<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>issuerAddresses<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>issuers<span class="p">[</span>i<span class="p">].</span>issuerAddress<span class="p">;</span>

<span class="w">            </span><span class="c1">// Count unique claim topics</span>
<span class="w">            </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>j<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>issuers<span class="p">[</span>i<span class="p">].</span>claimTopics<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>j<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span>seenTopics<span class="p">[</span>issuers<span class="p">[</span>i<span class="p">].</span>claimTopics<span class="p">[</span>j<span class="p">]])</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span>seenTopics<span class="p">[</span>issuers<span class="p">[</span>i<span class="p">].</span>claimTopics<span class="p">[</span>j<span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">                    </span>uniqueTopics<span class="o">++</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span>totalClaimTopics<span class="w"> </span><span class="o">=</span><span class="w"> </span>uniqueTopics<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getIssuersByClaimTopic</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">claimTopic</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>TrustedIssuer<span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>allIssuers<span class="w"> </span><span class="o">=</span><span class="w"> </span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>getTrustedIssuers<span class="p">();</span>
<span class="w">        </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>authorizedIssuers<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">address</span><span class="p">[](</span>allIssuers<span class="p">.</span>length<span class="p">);</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span>

<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>allIssuers<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>ITrustedIssuersRegistry<span class="p">(</span>diamond<span class="p">).</span>hasTrustedIssuerClaimTopic<span class="p">(</span>
<span class="w">                </span>allIssuers<span class="p">[</span>i<span class="p">].</span>issuerAddress<span class="p">,</span><span class="w"> </span>
<span class="w">                </span>claimTopic
<span class="w">            </span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span>authorizedIssuers<span class="p">[</span>count<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>allIssuers<span class="p">[</span>i<span class="p">].</span>issuerAddress<span class="p">;</span>
<span class="w">                </span>count<span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Resize array to actual count</span>
<span class="w">        </span>assembly<span class="w"> </span><span class="p">{</span>
<span class="w">            </span>mstore<span class="p">(</span>authorizedIssuers<span class="p">,</span><span class="w"> </span>count<span class="p">)</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kt">return</span><span class="w"> </span>authorizedIssuers<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h2>
<h3 id="issuer-management-events">Issuer Management Events<a class="headerlink" href="#issuer-management-events" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">event</span><span class="w"> </span><span class="nv">TrustedIssuerAdded</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>claimTopics<span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">TrustedIssuerRemoved</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">ClaimTopicsUpdated</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>claimTopics<span class="p">);</span>
</code></pre></div>

<h3 id="claim-topic-events">Claim Topic Events<a class="headerlink" href="#claim-topic-events" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">event</span><span class="w"> </span><span class="nv">ClaimTopicRemoved</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">claimTopic</span><span class="p">);</span>
</code></pre></div>

<h2 id="security-considerations">Security Considerations<a class="headerlink" href="#security-considerations" title="Permanent link">&para;</a></h2>
<h3 id="access-control">Access Control<a class="headerlink" href="#access-control" title="Permanent link">&para;</a></h3>
<ul>
<li>All administrative functions restricted to contract owner</li>
<li>Prevents unauthorized issuer registration or permission changes</li>
<li>Secure integration with identity registry access control</li>
</ul>
<h3 id="data-integrity">Data Integrity<a class="headerlink" href="#data-integrity" title="Permanent link">&para;</a></h3>
<ul>
<li>Comprehensive validation ensures consistent issuer state</li>
<li>Diamond storage pattern prevents storage collisions</li>
<li>Event logging provides complete audit trail</li>
</ul>
<h3 id="permission-management">Permission Management<a class="headerlink" href="#permission-management" title="Permanent link">&para;</a></h3>
<ul>
<li>Granular claim topic permissions prevent unauthorized claim issuance</li>
<li>Clear separation between issuer existence and topic authorization</li>
<li>Secure permission revocation without affecting other permissions</li>
</ul>
<h2 id="gas-optimization">Gas Optimization<a class="headerlink" href="#gas-optimization" title="Permanent link">&para;</a></h2>
<h3 id="storage-efficiency">Storage Efficiency<a class="headerlink" href="#storage-efficiency" title="Permanent link">&para;</a></h3>
<ul>
<li>Efficient mapping structures for issuer data</li>
<li>Minimal storage footprint per issuer</li>
<li>Optimized array operations for claim topics</li>
</ul>
<h3 id="query-optimization">Query Optimization<a class="headerlink" href="#query-optimization" title="Permanent link">&para;</a></h3>
<ul>
<li>Direct mapping lookups for permission checks</li>
<li>Efficient enumeration of all issuers</li>
<li>Batch operations where applicable</li>
</ul>
<h2 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<h3 id="issuer-management-errors">Issuer Management Errors<a class="headerlink" href="#issuer-management-errors" title="Permanent link">&para;</a></h3>
<ul>
<li><code>"Trusted issuer already exists"</code> - Duplicate registration attempt</li>
<li><code>"Trusted issuer does not exist"</code> - Operation on non-existent issuer</li>
</ul>
<h3 id="permission-errors">Permission Errors<a class="headerlink" href="#permission-errors" title="Permanent link">&para;</a></h3>
<ul>
<li>Authorization failures handled by calling contracts</li>
<li>Clear error messages for debugging and user feedback</li>
</ul>
<h2 id="testing-considerations">Testing Considerations<a class="headerlink" href="#testing-considerations" title="Permanent link">&para;</a></h2>
<h3 id="unit-tests">Unit Tests<a class="headerlink" href="#unit-tests" title="Permanent link">&para;</a></h3>
<ul>
<li>Issuer addition, removal, and updates</li>
<li>Claim topic permission management</li>
<li>Query function accuracy</li>
<li>Access control validation</li>
</ul>
<h3 id="integration-tests">Integration Tests<a class="headerlink" href="#integration-tests" title="Permanent link">&para;</a></h3>
<ul>
<li>Integration with IdentityRegistryFacet</li>
<li>End-to-end claim issuance workflows</li>
<li>Permission validation in claim operations</li>
<li>Event emission verification</li>
</ul>
<h2 id="related-documentation">Related Documentation<a class="headerlink" href="#related-documentation" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../interfaces/itrusted-issuers-registry/">ITrustedIssuersRegistry</a> - Trusted issuers registry interface</li>
<li><a href="../identity-registry-facet/">IdentityRegistryFacet</a> - Identity registry implementation</li>
<li><a href="../libraries/identity-system-storage.md">IdentitySystemStorage</a> - Storage library</li>
<li><a href="../../../eips/EIP-DRAFT-Enhanced-Identity-System/">EIP-DRAFT-Enhanced-Identity-System</a> - EIP specification</li>
<li><a href="../../guides/identity-integration.md">Identity Integration Guide</a> - Implementation guide</li>
</ul>
<hr />
<p><em>This facet provides the foundation for trusted issuer management within the Gemforce Enhanced Identity System, enabling secure and granular control over identity claim issuance permissions.</em></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../identity-registry-facet/" class="btn btn-neutral float-left" title="Identity Registry Facet"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../fee-distributor-facet/" class="btn btn-neutral float-right" title="Fee Distributor Facet">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../identity-registry-facet/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../fee-distributor-facet/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
