<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Gemforce Team" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Fee Distributor Facet - Gemforce Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Fee Distributor Facet";
        var mkdocs_page_input_path = "smart-contracts/facets/fee-distributor-facet.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Gemforce Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../developer-setup-guide/">Developer Setup Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../system-architecture/gemforce-system-architecture/">System Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Contracts</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../diamond/">Diamond Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../diamond-factory/">Diamond Factory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../identity-factory/">Identity Factory</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Facets</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../marketplace-facet/">Marketplace Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-management-facet/">Trade Deal Management Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../carbon-credit-facet/">Carbon Credit Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../identity-registry-facet/">Identity Registry Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trusted-issuers-registry-facet/">Trusted Issuers Registry Facet</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Fee Distributor Facet</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contract-details">Contract Details</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#key-features">Key Features</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#flexible-fee-distribution">ðŸ”¹ Flexible Fee Distribution</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#revenue-sharing-models">ðŸ”¹ Revenue Sharing Models</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#transparent-calculations">ðŸ”¹ Transparent Calculations</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#secure-operations">ðŸ”¹ Secure Operations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#core-data-structures">Core Data Structures</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#fee-distribution-configuration">Fee Distribution Configuration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#storage-pattern">Storage Pattern</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#core-functions">Core Functions</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#initialization-functions">Initialization Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#configuration-functions">Configuration Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#query-functions">Query Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#distribution-functions">Distribution Functions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#integration-examples">Integration Examples</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#marketplace-integration">Marketplace Integration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#trade-deal-fee-distribution">Trade Deal Fee Distribution</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#dynamic-fee-configuration">Dynamic Fee Configuration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#multi-token-fee-distribution">Multi-Token Fee Distribution</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#fee-analytics-and-reporting">Fee Analytics and Reporting</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#events">Events</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#configuration-events">Configuration Events</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#distribution-events">Distribution Events</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security-considerations">Security Considerations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#access-control">Access Control</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#financial-security">Financial Security</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#configuration-validation">Configuration Validation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gas-optimization">Gas Optimization</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#efficient-calculations">Efficient Calculations</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#batch-operations">Batch Operations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#configuration-errors">Configuration Errors</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#distribution-errors">Distribution Errors</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#testing-considerations">Testing Considerations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#unit-tests">Unit Tests</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#integration-tests">Integration Tests</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#related-documentation">Related Documentation</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../gemforce-minter-facet/">Gemforce Minter Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../multi-sale-facet/">Multi Sale Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../svg-templates-facet/">SVG Templates Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-admin-facet/">Trade Deal Admin Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-operations-facet/">Trade Deal Operations Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../collateral-token-factory-facet/">Collateral Token Factory Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../diamond-cut-facet/">Diamond Cut Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../diamond-loupe-facet/">Diamond Loupe Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ownership-facet/">Ownership Facet</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Interfaces</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/idiamond/">IDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/imarketplace/">IMarketplace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/itradedeal/">ITradeDeal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/icarbon-credit/">ICarbonCredit</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc1155-mint/">IERC1155Mint</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc734/">IERC734</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc735/">IERC735</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc721a/">IERC721A</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/idiamond-factory/">IDiamondFactory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/iidentity/">IIdentity</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/imultisale/">IMultiSale</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ifee-distributor/">IFeeDistributor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/igemforce-minter-facet/">IGemforceMinterFacet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/iidentity-registry/">IIdentityRegistry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/itrusted-issuers-registry/">TRUSTEDIssuersRegistry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/isvg/">ISVG</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/iattribute/">IAttribute</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Libraries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/carbon-credit-lib/">Carbon Credit Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/trade-deal-lib/">Trade Deal Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/multi-sale-lib/">Multi Sale Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/diamond-factory-lib/">Diamond Factory Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/svg-templates-lib/">SVG Templates Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/attribute-lib/">Attribute Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/variable-price-lib/">Variable Price Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/merkle-prover/">Merkle Prover</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/fee-distributor-lib/">Fee Distributor Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/lib-diamond/">LibDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/diamond-lib/">DiamondLib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/erc721a-lib/">ERC721A Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/erc721a-enumeration-lib/">ERC721A Enumeration Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/strings-lib/">Strings Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/trusted-issuer-lib/">Trusted Issuer Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/set-libraries/">Set Libraries</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SDK & Libraries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/blockchain/">Blockchain Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/diamond/">Diamond Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/contract/">Contract Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/deploy/">Deployment Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/validation-utils/">Validation Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sdk-libraries/nft-sale-utils/">NFT Sale Utilities</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Functions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/authentication/">Authentication Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/auth-functions/">Auth Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/blockchain/">Blockchain Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/bridge/">Bridge Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/contracts/">Contract Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/deploy/">Deploy Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/dfns/">DFNS Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/project/">Project Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/trade-deal/">Trade Deal Functions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api-documentation/gemforce-api-documentation/">Full API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api-documentation/gemforce-api-quick-reference/">Quick Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Operations Tasks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/diamond/">Diamond Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/identities/">Identity Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/marketplace-management/">Marketplace Management Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/carbon-credit-management/">Carbon Credit Management Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/trade-deal/">Trade Deal Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/integration-test/">Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/integration-test-marketplace/">Marketplace Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/integration-test-trade-deal/">Trade Deal Integration Test Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/admin-utils/">Admin Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/sync-diamond/">Sync Diamond Tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/tasks/sync-events/">Sync Events Tasks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EIPs (Ethereum Improvement Proposals)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Diamond-Enhanced-Marketplace/">Diamond-Enhanced Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Multi-Token-Sale-Standard/">Multi-Token Sale Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Collateralized-Trade-Deal-Standard/">Collateralized Trade Deal Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Enhanced-Identity-System/">Enhanced Identity System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Diamond-Factory-Standard/">Diamond Factory Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Carbon-Credit-Standard/">Carbon Credit Standard</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-administrator-guide/">Administrator Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-deployer-guide/">Deployer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-integrator-guide/">Integrator Guide</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Integrator's Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/rest-api/">REST API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/smart-contracts/">Smart Contracts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/dfns/">DFNS Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/webhooks/">Webhooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/error-handling/">Error Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/sample-code/">Sample Code</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/integration-patterns/">Integration Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../integrator-guide/security/">Security</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../external-services/gemforce-external-services/">External Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-documentation-gap-analysis/">Documentation Gap Analysis</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../documentation-progress-summary/">Documentation Progress Summary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../documentation-plan/">Documentation Plan</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Gemforce Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Smart Contracts</li>
          <li class="breadcrumb-item">Facets</li>
      <li class="breadcrumb-item active">Fee Distributor Facet</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="feedistributorfacet">FeeDistributorFacet<a class="headerlink" href="#feedistributorfacet" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The <a href="/Users/sschepis/Development/gem-base/contracts/facets/FeeDistributorFacet.sol"><code>FeeDistributorFacet.sol</code></a> provides comprehensive fee distribution functionality within the Gemforce diamond system. This facet enables automated distribution of fees and revenues to multiple recipients based on configurable weights, supporting complex revenue sharing models for marketplace operations, trade deals, and other platform activities.</p>
<h2 id="contract-details">Contract Details<a class="headerlink" href="#contract-details" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Contract Name</strong>: <code>FeeDistributorFacet</code></li>
<li><strong>Inheritance</strong>: <code>IFeeDistributor</code>, <code>Modifiers</code></li>
<li><strong>License</strong>: MIT</li>
<li><strong>Solidity Version</strong>: ^0.8.0</li>
</ul>
<h2 id="key-features">Key Features<a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h2>
<h3 id="flexible-fee-distribution">ðŸ”¹ Flexible Fee Distribution<a class="headerlink" href="#flexible-fee-distribution" title="Permanent link">&para;</a></h3>
<ul>
<li>Configure multiple fee recipients with custom weights</li>
<li>Proportional distribution based on weight ratios</li>
<li>Support for any ERC20 token distribution</li>
<li>Automated calculation and distribution</li>
</ul>
<h3 id="revenue-sharing-models">ðŸ”¹ Revenue Sharing Models<a class="headerlink" href="#revenue-sharing-models" title="Permanent link">&para;</a></h3>
<ul>
<li>Marketplace commission distribution</li>
<li>Trade deal fee sharing</li>
<li>Platform revenue allocation</li>
<li>Partner revenue sharing</li>
</ul>
<h3 id="transparent-calculations">ðŸ”¹ Transparent Calculations<a class="headerlink" href="#transparent-calculations" title="Permanent link">&para;</a></h3>
<ul>
<li>View-only calculation functions</li>
<li>Precise fee amount calculations</li>
<li>Adjustable weight basis for flexibility</li>
<li>Real-time distribution previews</li>
</ul>
<h3 id="secure-operations">ðŸ”¹ Secure Operations<a class="headerlink" href="#secure-operations" title="Permanent link">&para;</a></h3>
<ul>
<li>Owner-only configuration functions</li>
<li>Validation of all parameters</li>
<li>Event logging for transparency</li>
<li>Integration with diamond access control</li>
</ul>
<h2 id="core-data-structures">Core Data Structures<a class="headerlink" href="#core-data-structures" title="Permanent link">&para;</a></h2>
<h3 id="fee-distribution-configuration">Fee Distribution Configuration<a class="headerlink" href="#fee-distribution-configuration" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Distribution Token</strong>: ERC20 token used for fee payments (e.g., USDC)</li>
<li><strong>Total Weight Basis</strong>: Denominator for weight calculations (e.g., 10000 for basis points)</li>
<li><strong>Fee Receivers</strong>: Array of addresses that receive fee distributions</li>
<li><strong>Fee Weights</strong>: Corresponding weights for each receiver</li>
</ul>
<h3 id="storage-pattern">Storage Pattern<a class="headerlink" href="#storage-pattern" title="Permanent link">&para;</a></h3>
<p>Uses diamond storage pattern via <a href="../../libraries/fee-distributor-lib/"><code>FeeDistributorLib</code></a>:
- Prevents storage collisions in diamond architecture
- Efficient storage of fee configuration
- Persistent settings across contract upgrades</p>
<h2 id="core-functions">Core Functions<a class="headerlink" href="#core-functions" title="Permanent link">&para;</a></h2>
<h3 id="initialization-functions">Initialization Functions<a class="headerlink" href="#initialization-functions" title="Permanent link">&para;</a></h3>
<h4 id="initializefeedistributor"><code>initializeFeeDistributor()</code><a class="headerlink" href="#initializefeedistributor" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">initializeFeeDistributor</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_distributionToken</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_totalWeightBasis</span>
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Initializes the fee distributor with token and weight basis configuration.</p>
<p><strong>Parameters</strong>:
- <code>_distributionToken</code> (address): ERC20 token address for fee distributions
- <code>_totalWeightBasis</code> (uint256): Total weight basis for calculations (e.g., 10000)</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>:
- Distribution token cannot be zero address
- Total weight basis must be greater than zero
- Can only be called once during deployment</p>
<p><strong>Process</strong>:
1. Validates input parameters
2. Initializes fee distributor storage
3. Sets distribution token and weight basis
4. Emits FeeDistributorInitialized event</p>
<p><strong>Events</strong>: <code>FeeDistributorInitialized(distributionToken, totalWeightBasis)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Initialize with USDC and basis points (10000)</span>
IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>initializeFeeDistributor<span class="p">(</span>
<span class="w">    </span>usdcAddress<span class="p">,</span>
<span class="w">    </span><span class="m m-Decimal">10000</span><span class="w">  </span><span class="c1">// 10000 basis points = 100%</span>
<span class="p">);</span>
</code></pre></div>

<p><strong>Error Conditions</strong>:
- <code>"FeeDistributor: Distribution token cannot be zero address"</code> - Invalid token address
- Already initialized error from library</p>
<hr />
<h3 id="configuration-functions">Configuration Functions<a class="headerlink" href="#configuration-functions" title="Permanent link">&para;</a></h3>
<h4 id="setfeereceivers"><code>setFeeReceivers()</code><a class="headerlink" href="#setfeereceivers" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setFeeReceivers</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>_feeReceivers<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>_feeWeights
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>onlyOwner
</code></pre></div>

<p><strong>Purpose</strong>: Configures the addresses and weights for fee distribution.</p>
<p><strong>Parameters</strong>:
- <code>_feeReceivers</code> (address[]): Array of addresses to receive fees
- <code>_feeWeights</code> (uint256[]): Array of weights corresponding to each receiver</p>
<p><strong>Access Control</strong>: Owner only</p>
<p><strong>Validation</strong>:
- Arrays must have equal length
- No zero addresses in receivers
- Weights must be greater than zero
- Total weights should not exceed weight basis</p>
<p><strong>Process</strong>:
1. Validates input arrays
2. Updates fee receiver configuration
3. Stores receivers and weights
4. Emits FeeReceiversSet event</p>
<p><strong>Events</strong>: <code>FeeReceiversSet(receivers, weights)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Set up fee distribution: 70% to treasury, 20% to team, 10% to marketing</span>
<span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>receivers<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">address</span><span class="p">[](</span><span class="m m-Decimal">3</span><span class="p">);</span>
receivers<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>treasuryAddress<span class="p">;</span>
receivers<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>teamAddress<span class="p">;</span>
receivers<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>marketingAddress<span class="p">;</span>

<span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>weights<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[](</span><span class="m m-Decimal">3</span><span class="p">);</span>
weights<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">7000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 70%</span>
weights<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 20%</span>
weights<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 10%</span>

IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>setFeeReceivers<span class="p">(</span>receivers<span class="p">,</span><span class="w"> </span>weights<span class="p">);</span>
</code></pre></div>

<p><strong>Weight Calculation Example</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// With totalWeightBasis = 10000</span>
<span class="c1">// Treasury: 7000/10000 = 70%</span>
<span class="c1">// Team: 2000/10000 = 20%</span>
<span class="c1">// Marketing: 1000/10000 = 10%</span>
</code></pre></div>

<hr />
<h3 id="query-functions">Query Functions<a class="headerlink" href="#query-functions" title="Permanent link">&para;</a></h3>
<h4 id="getfeereceivers"><code>getFeeReceivers()</code><a class="headerlink" href="#getfeereceivers" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getFeeReceivers</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeWeights
<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns the current fee receiver configuration.</p>
<p><strong>Returns</strong>:
- <code>feeReceivers</code> (address[]): Array of fee recipient addresses
- <code>feeWeights</code> (uint256[]): Array of corresponding weights</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>receivers<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>weights<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>getFeeReceivers<span class="p">();</span>

<span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>receivers<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Receiver:&quot;</span><span class="p">,</span><span class="w"> </span>receivers<span class="p">[</span>i<span class="p">]);</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Weight:&quot;</span><span class="p">,</span><span class="w"> </span>weights<span class="p">[</span>i<span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="calculateamounts"><code>calculateAmounts()</code><a class="headerlink" href="#calculateamounts" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">calculateAmounts</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">principalAmount</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">adjustedAmount</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts
<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Calculates fee distribution amounts without executing transfers.</p>
<p><strong>Parameters</strong>:
- <code>principalAmount</code> (uint256): Total amount before fee deduction</p>
<p><strong>Returns</strong>:
- <code>adjustedAmount</code> (uint256): Principal amount after deducting fees
- <code>feeAmounts</code> (uint256[]): Individual fee amounts for each receiver</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Calculate fees for a $1000 transaction</span>
<span class="kt">uint256</span><span class="w"> </span><span class="nv">totalAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1000</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="o">**</span><span class="m m-Decimal">6</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1000 USDC (6 decimals)</span>

<span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">adjustedAmount</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>calculateAmounts<span class="p">(</span>totalAmount<span class="p">);</span>

console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Amount after fees:&quot;</span><span class="p">,</span><span class="w"> </span>adjustedAmount<span class="p">);</span>
console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Treasury fee:&quot;</span><span class="p">,</span><span class="w"> </span>feeAmounts<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]);</span>
console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Team fee:&quot;</span><span class="p">,</span><span class="w"> </span>feeAmounts<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]);</span>
console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Marketing fee:&quot;</span><span class="p">,</span><span class="w"> </span>feeAmounts<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]);</span>
</code></pre></div>

<p><strong>Calculation Logic</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Example with 1000 USDC and weights [7000, 2000, 1000]</span>
<span class="c1">// Total fee weight: 10000 (100%)</span>
<span class="c1">// Treasury fee: 1000 * 7000 / 10000 = 700 USDC</span>
<span class="c1">// Team fee: 1000 * 2000 / 10000 = 200 USDC</span>
<span class="c1">// Marketing fee: 1000 * 1000 / 10000 = 100 USDC</span>
<span class="c1">// Adjusted amount: 1000 - (700 + 200 + 100) = 0 USDC</span>
</code></pre></div>

<hr />
<h3 id="distribution-functions">Distribution Functions<a class="headerlink" href="#distribution-functions" title="Permanent link">&para;</a></h3>
<h4 id="distributeamounts"><code>distributeAmounts()</code><a class="headerlink" href="#distributeamounts" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">distributeAmounts</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">principalAmountReceiver</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_principalAmount</span>
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">adjustedAmountReceiver</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">adjustedAmount</span><span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts
<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Executes fee distribution by transferring calculated amounts to recipients.</p>
<p><strong>Parameters</strong>:
- <code>principalAmountReceiver</code> (address): Address to receive the adjusted principal amount
- <code>_principalAmount</code> (uint256): Total amount to distribute</p>
<p><strong>Returns</strong>:
- <code>adjustedAmountReceiver</code> (address): Address that received the adjusted amount
- <code>adjustedAmount</code> (uint256): Adjusted principal amount transferred
- <code>feeReceivers</code> (address[]): Addresses that received fee amounts
- <code>feeAmounts</code> (uint256[]): Individual fee amounts transferred</p>
<p><strong>Access Control</strong>: Can be called by authorized contracts (marketplace, trade deals)</p>
<p><strong>Requirements</strong>:
- Contract must have sufficient token balance or allowance
- All recipient addresses must be valid
- Distribution token must be properly configured</p>
<p><strong>Process</strong>:
1. Calculates fee amounts using internal logic
2. Transfers fees to each configured receiver
3. Transfers adjusted amount to principal receiver
4. Emits AmountsDistributed event
5. Returns distribution details</p>
<p><strong>Events</strong>: <code>AmountsDistributed(principalReceiver, originalAmount, adjustedReceiver, adjustedAmount, feeReceivers, feeAmounts)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Distribute marketplace sale proceeds</span>
<span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">adjustedReceiver</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">adjustedAmount</span><span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts
<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>distributeAmounts<span class="p">(</span>
<span class="w">    </span>sellerAddress<span class="p">,</span>
<span class="w">    </span>saleAmount
<span class="p">);</span>

console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Seller received:&quot;</span><span class="p">,</span><span class="w"> </span>adjustedAmount<span class="p">);</span>
console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Fees distributed to&quot;</span><span class="p">,</span><span class="w"> </span>feeReceivers<span class="p">.</span>length<span class="p">,</span><span class="w"> </span><span class="s2">&quot;recipients&quot;</span><span class="p">);</span>
</code></pre></div>

<h2 id="integration-examples">Integration Examples<a class="headerlink" href="#integration-examples" title="Permanent link">&para;</a></h2>
<h3 id="marketplace-integration">Marketplace Integration<a class="headerlink" href="#marketplace-integration" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Integrate fee distribution with marketplace sales</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">MarketplaceIntegration</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">completeSale</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">tokenId</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">salePrice</span><span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">seller</span><span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">buyer</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Transfer payment from buyer to contract</span>
<span class="w">        </span>IERC20<span class="p">(</span>paymentToken<span class="p">).</span>transferFrom<span class="p">(</span>buyer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">),</span><span class="w"> </span>salePrice<span class="p">);</span>

<span class="w">        </span><span class="c1">// Distribute fees and pay seller</span>
<span class="w">        </span><span class="p">(</span>
<span class="w">            </span><span class="kt">address</span><span class="w"> </span><span class="nv">adjustedReceiver</span><span class="p">,</span>
<span class="w">            </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">sellerAmount</span><span class="p">,</span>
<span class="w">            </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">            </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>distributeAmounts<span class="p">(</span>seller<span class="p">,</span><span class="w"> </span>salePrice<span class="p">);</span>

<span class="w">        </span><span class="c1">// Transfer NFT to buyer</span>
<span class="w">        </span>IERC721<span class="p">(</span>nftContract<span class="p">).</span>transferFrom<span class="p">(</span>seller<span class="p">,</span><span class="w"> </span>buyer<span class="p">,</span><span class="w"> </span>tokenId<span class="p">);</span>

<span class="w">        </span><span class="c1">// Log the transaction</span>
<span class="w">        </span>emit<span class="w"> </span>SaleCompleted<span class="p">(</span>
<span class="w">            </span>tokenId<span class="p">,</span>
<span class="w">            </span>salePrice<span class="p">,</span>
<span class="w">            </span>seller<span class="p">,</span>
<span class="w">            </span>buyer<span class="p">,</span>
<span class="w">            </span>sellerAmount<span class="p">,</span>
<span class="w">            </span>feeReceivers<span class="p">,</span>
<span class="w">            </span>feeAmounts
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="trade-deal-fee-distribution">Trade Deal Fee Distribution<a class="headerlink" href="#trade-deal-fee-distribution" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Distribute trade deal fees and interest</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">TradeDealFeeDistribution</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">distributeInterestPayment</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">tradeDealId</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">interestAmount</span><span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">borrower</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Calculate and distribute fees from interest payment</span>
<span class="w">        </span><span class="p">(</span>
<span class="w">            </span><span class="kt">address</span><span class="w"> </span><span class="nv">adjustedReceiver</span><span class="p">,</span>
<span class="w">            </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">netInterest</span><span class="p">,</span>
<span class="w">            </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">            </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>distributeAmounts<span class="p">(</span>
<span class="w">            </span>getTradeDealLender<span class="p">(</span>tradeDealId<span class="p">),</span>
<span class="w">            </span>interestAmount
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Record interest distribution</span>
<span class="w">        </span>emit<span class="w"> </span>InterestDistributed<span class="p">(</span>
<span class="w">            </span>tradeDealId<span class="p">,</span>
<span class="w">            </span>interestAmount<span class="p">,</span>
<span class="w">            </span>netInterest<span class="p">,</span>
<span class="w">            </span>feeReceivers<span class="p">,</span>
<span class="w">            </span>feeAmounts
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="dynamic-fee-configuration">Dynamic Fee Configuration<a class="headerlink" href="#dynamic-fee-configuration" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Dynamically adjust fee structure based on conditions</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">DynamicFeeManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">updateFeeStructure</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">marketCondition</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">volumeTier</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>receivers<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">address</span><span class="p">[](</span><span class="m m-Decimal">4</span><span class="p">);</span>
<span class="w">        </span>receivers<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>treasuryAddress<span class="p">;</span>
<span class="w">        </span>receivers<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>teamAddress<span class="p">;</span>
<span class="w">        </span>receivers<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>marketingAddress<span class="p">;</span>
<span class="w">        </span>receivers<span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>developmentAddress<span class="p">;</span>

<span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>weights<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[](</span><span class="m m-Decimal">4</span><span class="p">);</span>

<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>marketCondition<span class="w"> </span><span class="o">==</span><span class="w"> </span>HIGH_VOLUME<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Reduce fees during high volume periods</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 50% treasury</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1500</span><span class="p">;</span><span class="w">  </span><span class="c1">// 15% team</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 10% marketing</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2500</span><span class="p">;</span><span class="w">  </span><span class="c1">// 25% development</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="kt">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Standard fee structure</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">6000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 60% treasury</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 20% team</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 10% marketing</span>
<span class="w">            </span>weights<span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1000</span><span class="p">;</span><span class="w">  </span><span class="c1">// 10% development</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>setFeeReceivers<span class="p">(</span>receivers<span class="p">,</span><span class="w"> </span>weights<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="multi-token-fee-distribution">Multi-Token Fee Distribution<a class="headerlink" href="#multi-token-fee-distribution" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Handle fee distribution for multiple tokens</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">MultiTokenFeeDistribution</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>supportedTokens<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">distributeFees</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">token</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">principalReceiver</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>supportedTokens<span class="p">[</span>token<span class="p">],</span><span class="w"> </span><span class="s2">&quot;Token not supported&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Temporarily set distribution token if different</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">currentToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>getCurrentDistributionToken<span class="p">();</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>currentToken<span class="w"> </span><span class="o">!=</span><span class="w"> </span>token<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Would need additional function to change distribution token</span>
<span class="w">            </span><span class="c1">// or handle multiple tokens in the fee distributor</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>distributeAmounts<span class="p">(</span>principalReceiver<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="fee-analytics-and-reporting">Fee Analytics and Reporting<a class="headerlink" href="#fee-analytics-and-reporting" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Track and report fee distribution analytics</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">FeeAnalytics</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">FeeReport</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">totalDistributed</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">totalFees</span><span class="p">;</span>
<span class="w">        </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>recipients<span class="p">;</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span>amounts<span class="p">;</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">timestamp</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span>FeeReport<span class="p">[]</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>feeReports<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">recordFeeDistribution</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">originalAmount</span><span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">principalReceiver</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">reportId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span>
<span class="w">            </span><span class="kt">address</span><span class="w"> </span><span class="nv">adjustedReceiver</span><span class="p">,</span>
<span class="w">            </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">adjustedAmount</span><span class="p">,</span>
<span class="w">            </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">            </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>feeAmounts
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IFeeDistributor<span class="p">(</span>diamond<span class="p">).</span>distributeAmounts<span class="p">(</span>
<span class="w">            </span>principalReceiver<span class="p">,</span>
<span class="w">            </span>originalAmount
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">totalFees</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>originalAmount<span class="w"> </span><span class="o">-</span><span class="w"> </span>adjustedAmount<span class="p">;</span>

<span class="w">        </span>feeReports<span class="p">.</span>push<span class="p">(</span>FeeReport<span class="p">({</span>
<span class="w">            </span>totalDistributed<span class="o">:</span><span class="w"> </span>originalAmount<span class="p">,</span>
<span class="w">            </span>totalFees<span class="o">:</span><span class="w"> </span>totalFees<span class="p">,</span>
<span class="w">            </span>recipients<span class="o">:</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">            </span>amounts<span class="o">:</span><span class="w"> </span>feeAmounts<span class="p">,</span>
<span class="w">            </span>timestamp<span class="o">:</span><span class="w"> </span><span class="k">block.timestamp</span>
<span class="w">        </span><span class="p">}));</span>

<span class="w">        </span><span class="kt">return</span><span class="w"> </span>feeReports<span class="p">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getFeeReport</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">reportId</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>FeeReport<span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>reportId<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>feeReports<span class="p">.</span>length<span class="p">,</span><span class="w"> </span><span class="s2">&quot;Invalid report ID&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>feeReports<span class="p">[</span>reportId<span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h2>
<h3 id="configuration-events">Configuration Events<a class="headerlink" href="#configuration-events" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">event</span><span class="w"> </span><span class="nv">FeeDistributorInitialized</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>distributionToken<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">totalWeightBasis</span><span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">FeeReceiversSet</span><span class="p">(</span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>receivers<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span>weights<span class="p">);</span>
</code></pre></div>

<h3 id="distribution-events">Distribution Events<a class="headerlink" href="#distribution-events" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">event</span><span class="w"> </span><span class="nv">AmountsDistributed</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>principalReceiver<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">originalAmount</span><span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>adjustedReceiver<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">adjustedAmount</span><span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>feeReceivers<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span>feeAmounts
<span class="p">);</span>
</code></pre></div>

<h2 id="security-considerations">Security Considerations<a class="headerlink" href="#security-considerations" title="Permanent link">&para;</a></h2>
<h3 id="access-control">Access Control<a class="headerlink" href="#access-control" title="Permanent link">&para;</a></h3>
<ul>
<li>Only contract owner can initialize and configure fee distribution</li>
<li>Distribution function can be called by authorized contracts</li>
<li>Validation of all addresses and amounts</li>
</ul>
<h3 id="financial-security">Financial Security<a class="headerlink" href="#financial-security" title="Permanent link">&para;</a></h3>
<ul>
<li>Requires sufficient token balance or allowance for distributions</li>
<li>Atomic transfers ensure all-or-nothing distribution</li>
<li>Precise calculations prevent rounding errors</li>
</ul>
<h3 id="configuration-validation">Configuration Validation<a class="headerlink" href="#configuration-validation" title="Permanent link">&para;</a></h3>
<ul>
<li>Prevents zero addresses in fee receivers</li>
<li>Validates weight arrays match receiver arrays</li>
<li>Ensures total weights don't exceed basis</li>
</ul>
<h2 id="gas-optimization">Gas Optimization<a class="headerlink" href="#gas-optimization" title="Permanent link">&para;</a></h2>
<h3 id="efficient-calculations">Efficient Calculations<a class="headerlink" href="#efficient-calculations" title="Permanent link">&para;</a></h3>
<ul>
<li>Single-pass calculation of all fee amounts</li>
<li>Minimal storage reads and writes</li>
<li>Optimized array operations</li>
</ul>
<h3 id="batch-operations">Batch Operations<a class="headerlink" href="#batch-operations" title="Permanent link">&para;</a></h3>
<ul>
<li>Single transaction for all fee distributions</li>
<li>Reduced gas costs compared to individual transfers</li>
<li>Efficient event emission</li>
</ul>
<h2 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<h3 id="configuration-errors">Configuration Errors<a class="headerlink" href="#configuration-errors" title="Permanent link">&para;</a></h3>
<ul>
<li><code>"FeeDistributor: Distribution token cannot be zero address"</code> - Invalid token</li>
<li>Array length mismatch errors</li>
<li>Invalid weight configuration errors</li>
</ul>
<h3 id="distribution-errors">Distribution Errors<a class="headerlink" href="#distribution-errors" title="Permanent link">&para;</a></h3>
<ul>
<li>Insufficient balance or allowance errors</li>
<li>Transfer failure errors</li>
<li>Invalid recipient address errors</li>
</ul>
<h2 id="testing-considerations">Testing Considerations<a class="headerlink" href="#testing-considerations" title="Permanent link">&para;</a></h2>
<h3 id="unit-tests">Unit Tests<a class="headerlink" href="#unit-tests" title="Permanent link">&para;</a></h3>
<ul>
<li>Fee calculation accuracy</li>
<li>Distribution execution</li>
<li>Configuration validation</li>
<li>Access control enforcement</li>
</ul>
<h3 id="integration-tests">Integration Tests<a class="headerlink" href="#integration-tests" title="Permanent link">&para;</a></h3>
<ul>
<li>Marketplace integration</li>
<li>Trade deal integration</li>
<li>Multi-contract workflows</li>
<li>Event emission verification</li>
</ul>
<h2 id="related-documentation">Related Documentation<a class="headerlink" href="#related-documentation" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../interfaces/ifee-distributor/">IFeeDistributor</a> - Fee distributor interface</li>
<li><a href="../../libraries/fee-distributor-lib/">FeeDistributorLib</a> - Fee distribution utilities</li>
<li><a href="../marketplace-facet/">MarketplaceFacet</a> - Marketplace integration</li>
<li><a href="../trade-deal-management-facet/">TradeDealManagementFacet</a> - Trade deal integration</li>
<li><a href="../../guides/revenue-sharing.md">Revenue Sharing Guide</a> - Implementation guide</li>
</ul>
<hr />
<p><em>This facet provides the foundation for flexible and transparent fee distribution within the Gemforce platform, enabling complex revenue sharing models and automated fee management across all platform operations.</em></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../trusted-issuers-registry-facet/" class="btn btn-neutral float-left" title="Trusted Issuers Registry Facet"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../gemforce-minter-facet/" class="btn btn-neutral float-right" title="Gemforce Minter Facet">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../trusted-issuers-registry-facet/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../gemforce-minter-facet/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
