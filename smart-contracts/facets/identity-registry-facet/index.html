<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Gemforce Team" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Identity Registry Facet - Gemforce Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Identity Registry Facet";
        var mkdocs_page_input_path = "smart-contracts/facets/identity-registry-facet.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Gemforce Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../developer-setup-guide/">Developer Setup Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../system-architecture/gemforce-system-architecture/">System Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Contracts</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../diamond/">Diamond Contract</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Facets</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../marketplace-facet/">Marketplace Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-management-facet/">Trade Deal Management Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../carbon-credit-facet/">Carbon Credit Facet</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Identity Registry Facet</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contract-details">Contract Details</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#key-features">Key Features</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#decentralized-identity-management">ðŸ”¹ Decentralized Identity Management</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claims-based-verification-system">ðŸ”¹ Claims-Based Verification System</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#access-control-security">ðŸ”¹ Access Control &amp; Security</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#registry-operations">ðŸ”¹ Registry Operations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#core-data-structures">Core Data Structures</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#identity-system-components">Identity System Components</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#storage-pattern">Storage Pattern</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#access-control-modifiers">Access Control Modifiers</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#istrustedissuer">isTrustedIssuer()</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#istrustedissuerforclaimtopicuint256-_claimtopic">isTrustedIssuerForClaimTopic(uint256 _claimTopic)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#istrustedissuerforclaimtopicsuint256-memory-_claimtopics">isTrustedIssuerForClaimTopics(uint256[] memory _claimTopics)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#core-functions">Core Functions</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#identity-management-functions">Identity Management Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claim-management-functions">Claim Management Functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#query-functions">Query Functions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#integration-examples">Integration Examples</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#kyc-verification-system">KYC Verification System</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#access-control-integration">Access Control Integration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#batch-user-management">Batch User Management</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#identity-portfolio-dashboard">Identity Portfolio Dashboard</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#events">Events</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#identity-events">Identity Events</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claim-events">Claim Events</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security-considerations">Security Considerations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#access-control">Access Control</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#data-integrity">Data Integrity</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#privacy-compliance">Privacy &amp; Compliance</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gas-optimization">Gas Optimization</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#batch-operations">Batch Operations</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#storage-efficiency">Storage Efficiency</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#identity-errors">Identity Errors</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#claim-errors">Claim Errors</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#authorization-errors">Authorization Errors</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#testing-considerations">Testing Considerations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#unit-tests">Unit Tests</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#integration-tests">Integration Tests</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#related-documentation">Related Documentation</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trusted-issuers-registry-facet/">Trusted Issuers Registry Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../fee-distributor-facet/">Fee Distributor Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../gemforce-minter-facet/">Gemforce Minter Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../multi-sale-facet/">Multi Sale Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../svg-templates-facet/">SVG Templates Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-admin-facet/">Trade Deal Admin Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trade-deal-operations-facet/">Trade Deal Operations Facet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../collateral-token-factory-facet/">Collateral Token Factory Facet</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Interfaces</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/idiamond/">IDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/imarketplace/">IMarketplace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/itradedeal/">ITradeDeal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/icarbon-credit/">ICarbonCredit</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc1155-mint/">IERC1155Mint</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc734/">IERC734</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../interfaces/ierc735/">IERC735</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Libraries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/carbon-credit-lib/">Carbon Credit Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/trade-deal-lib/">Trade Deal Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/multi-sale-lib/">Multi Sale Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/diamond-factory-lib/">Diamond Factory Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/svg-templates-lib/">SVG Templates Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/attribute-lib/">Attribute Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/variable-price-lib/">Variable Price Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/merkle-prover/">Merkle Prover</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/fee-distributor-lib/">Fee Distributor Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/lib-diamond/">LibDiamond</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/diamond-lib/">DiamondLib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/erc721a-lib/">ERC721A Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/erc721a-enumeration-lib/">ERC721A Enumeration Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/strings-lib/">Strings Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/metadata-lib/">Metadata Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/trusted-issuer-lib/">Trusted Issuer Lib</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../libraries/set-libraries/">Set Libraries</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Functions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/blockchain/">Blockchain Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/dfns/">DFNS Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/contracts/">Contract Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cloud-functions/authentication/">Authentication Functions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api-documentation/gemforce-api-documentation/">Full API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api-documentation/gemforce-api-quick-reference/">Quick Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EIPs (Ethereum Improvement Proposals)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Diamond-Enhanced-Marketplace/">Diamond-Enhanced Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Multi-Token-Sale-Standard/">Multi-Token Sale Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Collateralized-Trade-Deal-Standard/">Collateralized Trade Deal Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Enhanced-Identity-System/">Enhanced Identity System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Diamond-Factory-Standard/">Diamond Factory Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../eips/EIP-DRAFT-Carbon-Credit-Standard/">Carbon Credit Standard</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-administrator-guide/">Administrator Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-deployer-guide/">Deployer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-integrator-guide/">Integrator Guide</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../external-services/gemforce-external-services/">External Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../gemforce-documentation-gap-analysis/">Documentation Gap Analysis</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../documentation-progress-summary/">Documentation Progress Summary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../documentation-plan/">Documentation Plan</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Gemforce Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Smart Contracts</li>
          <li class="breadcrumb-item">Facets</li>
      <li class="breadcrumb-item active">Identity Registry Facet</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="identityregistryfacet">IdentityRegistryFacet<a class="headerlink" href="#identityregistryfacet" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The <a href="/Users/sschepis/Development/gem-base/contracts/facets/IdentityRegistryFacet.sol"><code>IdentityRegistryFacet.sol</code></a> provides comprehensive decentralized identity management functionality within the Gemforce diamond system. This facet implements a claims-based identity system where trusted issuers can create, verify, and manage digital identities with associated attestations.</p>
<h2 id="contract-details">Contract Details<a class="headerlink" href="#contract-details" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Contract Name</strong>: <code>IdentityRegistryFacet</code></li>
<li><strong>Inheritance</strong>: <code>IIdentityRegistry</code>, <code>Modifiers</code></li>
<li><strong>License</strong>: MIT</li>
<li><strong>Solidity Version</strong>: ^0.8.0</li>
</ul>
<h2 id="key-features">Key Features<a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h2>
<h3 id="decentralized-identity-management">ðŸ”¹ Decentralized Identity Management<a class="headerlink" href="#decentralized-identity-management" title="Permanent link">&para;</a></h3>
<ul>
<li>Register and manage digital identities on-chain</li>
<li>Associate user addresses with identity contracts</li>
<li>Batch operations for efficient identity management</li>
<li>Complete identity lifecycle management</li>
</ul>
<h3 id="claims-based-verification-system">ðŸ”¹ Claims-Based Verification System<a class="headerlink" href="#claims-based-verification-system" title="Permanent link">&para;</a></h3>
<ul>
<li>Add, remove, and manage identity claims (attestations)</li>
<li>Topic-based claim organization</li>
<li>Trusted issuer authorization for specific claim types</li>
<li>Comprehensive claim verification and querying</li>
</ul>
<h3 id="access-control-security">ðŸ”¹ Access Control &amp; Security<a class="headerlink" href="#access-control-security" title="Permanent link">&para;</a></h3>
<ul>
<li>Multi-level trusted issuer system</li>
<li>Topic-specific issuer permissions</li>
<li>Identity ownership validation</li>
<li>Secure claim management with proper authorization</li>
</ul>
<h3 id="registry-operations">ðŸ”¹ Registry Operations<a class="headerlink" href="#registry-operations" title="Permanent link">&para;</a></h3>
<ul>
<li>Complete user registry with enumeration</li>
<li>Identity existence and verification checks</li>
<li>Efficient batch processing capabilities</li>
<li>Gas-optimized storage patterns</li>
</ul>
<h2 id="core-data-structures">Core Data Structures<a class="headerlink" href="#core-data-structures" title="Permanent link">&para;</a></h2>
<h3 id="identity-system-components">Identity System Components<a class="headerlink" href="#identity-system-components" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Identity Contracts</strong>: ERC734/ERC735-compliant identity contracts</li>
<li><strong>Claims</strong>: Verifiable attestations about identities</li>
<li><strong>Trusted Issuers</strong>: Authorized entities that can manage identities and claims</li>
<li><strong>Claim Topics</strong>: Categorized types of claims (KYC, accreditation, etc.)</li>
</ul>
<h3 id="storage-pattern">Storage Pattern<a class="headerlink" href="#storage-pattern" title="Permanent link">&para;</a></h3>
<p>Uses diamond storage pattern via <a href="../libraries/identity-system-storage.md"><code>IdentitySystemStorage</code></a>:
- Prevents storage collisions in diamond architecture
- Efficient mappings for identity and claim data
- Persistent storage across contract upgrades</p>
<h2 id="access-control-modifiers">Access Control Modifiers<a class="headerlink" href="#access-control-modifiers" title="Permanent link">&para;</a></h2>
<h3 id="istrustedissuer"><code>isTrustedIssuer()</code><a class="headerlink" href="#istrustedissuer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">modifier</span><span class="w"> </span>isTrustedIssuer<span class="p">()</span>
</code></pre></div>

<p><strong>Purpose</strong>: Restricts function access to approved trusted issuers only.</p>
<p><strong>Validation</strong>: Checks if <code>msg.sender</code> is registered as a trusted issuer in the system.</p>
<p><strong>Usage</strong>: Applied to identity management functions that require issuer authorization.</p>
<hr />
<h3 id="istrustedissuerforclaimtopicuint256-_claimtopic"><code>isTrustedIssuerForClaimTopic(uint256 _claimTopic)</code><a class="headerlink" href="#istrustedissuerforclaimtopicuint256-_claimtopic" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">modifier</span><span class="w"> </span>isTrustedIssuerForClaimTopic<span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_claimTopic</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Restricts access to issuers authorized for specific claim topics.</p>
<p><strong>Parameters</strong>:
- <code>_claimTopic</code> (uint256): The claim topic requiring authorization</p>
<p><strong>Validation</strong>: 
- Verifies caller is a trusted issuer
- Confirms issuer is authorized for the specific claim topic</p>
<p><strong>Usage</strong>: Applied to claim management functions for topic-specific authorization.</p>
<hr />
<h3 id="istrustedissuerforclaimtopicsuint256-memory-_claimtopics"><code>isTrustedIssuerForClaimTopics(uint256[] memory _claimTopics)</code><a class="headerlink" href="#istrustedissuerforclaimtopicsuint256-memory-_claimtopics" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">modifier</span><span class="w"> </span>isTrustedIssuerForClaimTopics<span class="p">(</span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>_claimTopics<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Restricts access to issuers authorized for multiple claim topics.</p>
<p><strong>Parameters</strong>:
- <code>_claimTopics</code> (uint256[]): Array of claim topics requiring authorization</p>
<p><strong>Validation</strong>: Ensures caller is authorized for ALL specified claim topics.</p>
<p><strong>Usage</strong>: Applied to batch claim operations requiring multiple topic permissions.</p>
<h2 id="core-functions">Core Functions<a class="headerlink" href="#core-functions" title="Permanent link">&para;</a></h2>
<h3 id="identity-management-functions">Identity Management Functions<a class="headerlink" href="#identity-management-functions" title="Permanent link">&para;</a></h3>
<h4 id="addidentity"><code>addIdentity()</code><a class="headerlink" href="#addidentity" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">addIdentity</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span>IIdentity<span class="w"> </span>identityData<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuer
</code></pre></div>

<p><strong>Purpose</strong>: Registers a new identity in the system.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User address that will own the identity
- <code>identityData</code> (IIdentity): Identity contract instance</p>
<p><strong>Access Control</strong>: Trusted issuers only</p>
<p><strong>Validation</strong>:
- Address cannot be zero
- Identity must not already exist for the address
- Identity contract must be valid</p>
<p><strong>Process</strong>:
1. Validates input parameters
2. Checks for existing identity
3. Updates identity mappings
4. Adds to identity owners list
5. Emits IdentityAdded event</p>
<p><strong>Events</strong>: <code>IdentityAdded(issuer, address, identityData)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Deploy new identity contract</span>
IIdentity<span class="w"> </span>newIdentity<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>Identity<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>managementKey<span class="p">);</span>

<span class="c1">// Register identity in the system</span>
IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>addIdentity<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>newIdentity<span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="batchaddidentity"><code>batchAddIdentity()</code><a class="headerlink" href="#batchaddidentity" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">batchAddIdentity</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>_addresses<span class="p">,</span><span class="w"> </span>
<span class="w">    </span>IIdentity<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>identityDatas
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuer
</code></pre></div>

<p><strong>Purpose</strong>: Efficiently registers multiple identities in a single transaction.</p>
<p><strong>Parameters</strong>:
- <code>_addresses</code> (address[]): Array of user addresses
- <code>identityDatas</code> (IIdentity[]): Array of corresponding identity contracts</p>
<p><strong>Access Control</strong>: Trusted issuers only</p>
<p><strong>Validation</strong>: Arrays must have equal length</p>
<p><strong>Gas Optimization</strong>: More efficient than multiple individual calls</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Batch register multiple users</span>
<span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>users<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>user1<span class="p">,</span><span class="w"> </span>user2<span class="p">,</span><span class="w"> </span>user3<span class="p">];</span>
IIdentity<span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>identities<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>identity1<span class="p">,</span><span class="w"> </span>identity2<span class="p">,</span><span class="w"> </span>identity3<span class="p">];</span>

IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>batchAddIdentity<span class="p">(</span>users<span class="p">,</span><span class="w"> </span>identities<span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="removeidentity"><code>removeIdentity()</code><a class="headerlink" href="#removeidentity" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">removeIdentity</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_ownerAddress</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuer
</code></pre></div>

<p><strong>Purpose</strong>: Removes an identity from the registry and cleans up all associated data.</p>
<p><strong>Parameters</strong>:
- <code>_ownerAddress</code> (address): Address of the identity owner to remove</p>
<p><strong>Access Control</strong>: Trusted issuers only</p>
<p><strong>Validation</strong>: Identity must exist for the specified owner</p>
<p><strong>Cleanup Process</strong>:
1. Removes from identities mapping (owner â†’ identity)
2. Removes from reverse mapping (identity â†’ owner)
3. Removes from identity owners array using swap-and-pop
4. Emits IdentityRemoved event</p>
<p><strong>Events</strong>: <code>IdentityRemoved(issuer, ownerAddress, identityData)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Remove user&#39;s identity from registry</span>
IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>removeIdentity<span class="p">(</span>userAddress<span class="p">);</span>
</code></pre></div>

<h3 id="claim-management-functions">Claim Management Functions<a class="headerlink" href="#claim-management-functions" title="Permanent link">&para;</a></h3>
<h4 id="addclaim"><code>addClaim()</code><a class="headerlink" href="#addclaim" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">addClaim</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_claimTopic</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>_claim
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuerForClaimTopic<span class="p">(</span>_claimTopic<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Adds a new claim (attestation) to an identity.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address
- <code>_claimTopic</code> (uint256): Topic/type of the claim
- <code>_claim</code> (bytes): Claim data</p>
<p><strong>Access Control</strong>: Trusted issuer for specific claim topic</p>
<p><strong>Validation</strong>:
- Identity must exist
- Claim must not already exist for this topic
- Issuer must be authorized for the claim topic</p>
<p><strong>Process</strong>:
1. Resolves address to identity
2. Validates claim doesn't exist
3. Adds claim to storage mappings
4. Updates claim list for the identity
5. Emits ClaimAdded event</p>
<p><strong>Events</strong>: <code>ClaimAdded(issuer, identity, claimTopic, claimData)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Add KYC claim to user&#39;s identity</span>
<span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>kycData<span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>encode<span class="p">(</span><span class="s2">&quot;KYC_VERIFIED&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">block.timestamp</span><span class="p">);</span>
IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>addClaim<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">,</span><span class="w"> </span>kycData<span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="setclaims"><code>setClaims()</code><a class="headerlink" href="#setclaims" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setClaims</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>_claims
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuerForClaimTopics<span class="p">(</span>_claims<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Sets multiple claims for an identity in a single transaction.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address
- <code>_claims</code> (uint256[]): Array of claim topics to set</p>
<p><strong>Access Control</strong>: Trusted issuer for all specified claim topics</p>
<p><strong>Validation</strong>:
- Identity must exist
- Claims must not already exist
- Claim topics must be valid (exist in topic list)
- Issuer must be authorized for all claim topics</p>
<p><strong>Process</strong>:
1. Validates identity existence
2. Iterates through claim topics
3. Validates each claim topic against topic list
4. Adds valid claims to storage
5. Emits individual ClaimAdded events and batch ClaimsSet event</p>
<p><strong>Events</strong>: <code>ClaimAdded(...)</code> for each claim, <code>ClaimsSet(issuer, identity, claims)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Set multiple claims for accredited investor</span>
<span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>claims<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>KYC_TOPIC<span class="p">,</span><span class="w"> </span>ACCREDITED_INVESTOR_TOPIC<span class="p">,</span><span class="w"> </span>JURISDICTION_TOPIC<span class="p">];</span>
IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>setClaims<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>claims<span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="removeclaim"><code>removeClaim()</code><a class="headerlink" href="#removeclaim" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">removeClaim</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_claimTopic</span>
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuerForClaimTopic<span class="p">(</span>_claimTopic<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Removes a specific claim from an identity.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address
- <code>_claimTopic</code> (uint256): Topic of the claim to remove</p>
<p><strong>Access Control</strong>: Trusted issuer for specific claim topic</p>
<p><strong>Validation</strong>:
- Identity must exist
- Cannot remove claims from self
- Claim must exist</p>
<p><strong>Process</strong>:
1. Resolves address to identity
2. Finds claim in claim list
3. Removes using swap-and-pop method
4. Deletes from claims mapping
5. Emits ClaimRemoved event</p>
<p><strong>Events</strong>: <code>ClaimRemoved(issuer, identity, claimTopic)</code></p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Remove expired KYC claim</span>
IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>removeClaim<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="unsetclaims"><code>unsetClaims()</code><a class="headerlink" href="#unsetclaims" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">unsetClaims</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>_claims
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>override<span class="w"> </span>isTrustedIssuerForClaimTopics<span class="p">(</span>_claims<span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Removes multiple claims from an identity in a single transaction.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address
- <code>_claims</code> (uint256[]): Array of claim topics to remove</p>
<p><strong>Access Control</strong>: Trusted issuer for all specified claim topics</p>
<p><strong>Process</strong>:
1. Validates identity existence
2. Iterates through claims to remove
3. Uses efficient removal algorithm with array resizing
4. Emits ClaimsRemoved event with actually removed claims</p>
<p><strong>Events</strong>: <code>ClaimsRemoved(issuer, identity, removedClaims)</code></p>
<p><strong>Gas Optimization</strong>: Batch removal more efficient than individual calls</p>
<h3 id="query-functions">Query Functions<a class="headerlink" href="#query-functions" title="Permanent link">&para;</a></h3>
<h4 id="identity"><code>identity()</code><a class="headerlink" href="#identity" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">identity</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_userAddress</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns the identity contract address for a user address.</p>
<p><strong>Parameters</strong>:
- <code>_userAddress</code> (address): User address to query</p>
<p><strong>Returns</strong>: Identity contract address (or zero if not found)</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">address</span><span class="w"> </span><span class="nv">identityContract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>identity<span class="p">(</span>userAddress<span class="p">);</span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span>identityContract<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// User has registered identity</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="contains"><code>contains()</code><a class="headerlink" href="#contains" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">contains</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_userAddress</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Checks if an identity exists for the given address.</p>
<p><strong>Parameters</strong>:
- <code>_userAddress</code> (address): User address to check</p>
<p><strong>Returns</strong>: True if identity exists, false otherwise</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nv">hasIdentity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>contains<span class="p">(</span>userAddress<span class="p">);</span>
<span class="kt">require</span><span class="p">(</span>hasIdentity<span class="p">,</span><span class="w"> </span><span class="s2">&quot;User must have registered identity&quot;</span><span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="isverified"><code>isVerified()</code><a class="headerlink" href="#isverified" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">isVerified</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Checks if an address is associated with a verified identity.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): Address to verify (user or identity address)</p>
<p><strong>Returns</strong>: True if verified, false otherwise</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nv">verified</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>isVerified<span class="p">(</span>userAddress<span class="p">);</span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span>verified<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Allow access to verified-only features</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="getclaims"><code>getClaims()</code><a class="headerlink" href="#getclaims" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getClaims</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns all claim topics for an identity.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address</p>
<p><strong>Returns</strong>: Array of claim topics</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>claims<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>getClaims<span class="p">(</span>userAddress<span class="p">);</span>
<span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>claims<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;User has claim topic:&quot;</span><span class="p">,</span><span class="w"> </span>claims<span class="p">[</span>i<span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="getclaim"><code>getClaim()</code><a class="headerlink" href="#getclaim" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getClaim</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_claimTopic</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns a specific claim value for an identity.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address
- <code>_claimTopic</code> (uint256): Claim topic to query</p>
<p><strong>Returns</strong>: Claim value (or 0 if not found)</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">uint256</span><span class="w"> </span><span class="nv">kycClaim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>getClaim<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">);</span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span>kycClaim<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// User has KYC claim</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4 id="hasclaim"><code>hasClaim()</code><a class="headerlink" href="#hasclaim" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">hasClaim</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_address</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">_claimTopic</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Checks if an identity has a specific claim.</p>
<p><strong>Parameters</strong>:
- <code>_address</code> (address): User or identity address
- <code>_claimTopic</code> (uint256): Claim topic to check</p>
<p><strong>Returns</strong>: True if claim exists, false otherwise</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nv">hasKYC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>hasClaim<span class="p">(</span>userAddress<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">);</span>
<span class="kt">require</span><span class="p">(</span>hasKYC<span class="p">,</span><span class="w"> </span><span class="s2">&quot;KYC verification required&quot;</span><span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="getregistryusers"><code>getRegistryUsers()</code><a class="headerlink" href="#getregistryusers" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">getRegistryUsers</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Returns all registered user addresses in the system.</p>
<p><strong>Returns</strong>: Array of user addresses with registered identities</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">address</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>users<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>getRegistryUsers<span class="p">();</span>
console<span class="p">.</span>log<span class="p">(</span><span class="s2">&quot;Total registered users:&quot;</span><span class="p">,</span><span class="w"> </span>users<span class="p">.</span>length<span class="p">);</span>
</code></pre></div>

<hr />
<h4 id="isregistryuser"><code>isRegistryUser()</code><a class="headerlink" href="#isregistryuser" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">isRegistryUser</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_registryUser</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>

<p><strong>Purpose</strong>: Checks if an address is a registered user in the system.</p>
<p><strong>Parameters</strong>:
- <code>_registryUser</code> (address): Address to check</p>
<p><strong>Returns</strong>: True if registered, false otherwise</p>
<p><strong>Example Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nv">isRegistered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>isRegistryUser<span class="p">(</span>userAddress<span class="p">);</span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span>isRegistered<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Prompt user to register identity</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="integration-examples">Integration Examples<a class="headerlink" href="#integration-examples" title="Permanent link">&para;</a></h2>
<h3 id="kyc-verification-system">KYC Verification System<a class="headerlink" href="#kyc-verification-system" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Complete KYC verification workflow</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">KYCVerification</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>KYC_TOPIC<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>ACCREDITED_TOPIC<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">verifyAndRegisterUser</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">user</span><span class="p">,</span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>kycData<span class="p">,</span>
<span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="nv">isAccredited</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyKYCProvider<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 1. Deploy identity contract</span>
<span class="w">        </span>IIdentity<span class="w"> </span>identity<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>Identity<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>getManagementKey<span class="p">(</span>user<span class="p">));</span>

<span class="w">        </span><span class="c1">// 2. Register identity</span>
<span class="w">        </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>addIdentity<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>identity<span class="p">);</span>

<span class="w">        </span><span class="c1">// 3. Add KYC claim</span>
<span class="w">        </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>addClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">,</span><span class="w"> </span>kycData<span class="p">);</span>

<span class="w">        </span><span class="c1">// 4. Add accredited investor claim if applicable</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>isAccredited<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>accreditedData<span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>encode<span class="p">(</span><span class="s2">&quot;ACCREDITED&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">block.timestamp</span><span class="p">);</span>
<span class="w">            </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>addClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>ACCREDITED_TOPIC<span class="p">,</span><span class="w"> </span>accreditedData<span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="access-control-integration">Access Control Integration<a class="headerlink" href="#access-control-integration" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Use identity system for access control</span>
<span class="kt">modifier</span><span class="w"> </span>requiresKYC<span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">require</span><span class="p">(</span>
<span class="w">        </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>hasClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">),</span>
<span class="w">        </span><span class="s2">&quot;KYC verification required&quot;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span>_<span class="p">;</span>
<span class="p">}</span>

<span class="kt">modifier</span><span class="w"> </span>requiresAccreditation<span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">require</span><span class="p">(</span>
<span class="w">        </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>hasClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>ACCREDITED_TOPIC<span class="p">),</span>
<span class="w">        </span><span class="s2">&quot;Accredited investor status required&quot;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span>_<span class="p">;</span>
<span class="p">}</span>

<span class="kt">function</span><span class="w"> </span><span class="nv">restrictedFunction</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>requiresKYC<span class="p">(</span><span class="k">msg.sender</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Function only accessible to KYC-verified users</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="batch-user-management">Batch User Management<a class="headerlink" href="#batch-user-management" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Efficient batch user onboarding</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">batchOnboardUsers</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>users<span class="p">,</span>
<span class="w">    </span>IIdentity<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>identities<span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[][]</span><span class="w"> </span>calldata<span class="w"> </span>userClaims
<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyTrustedIssuer<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. Batch register identities</span>
<span class="w">    </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>batchAddIdentity<span class="p">(</span>users<span class="p">,</span><span class="w"> </span>identities<span class="p">);</span>

<span class="w">    </span><span class="c1">// 2. Set claims for each user</span>
<span class="w">    </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>users<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>userClaims<span class="p">[</span>i<span class="p">].</span>length<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>setClaims<span class="p">(</span>users<span class="p">[</span>i<span class="p">],</span><span class="w"> </span>userClaims<span class="p">[</span>i<span class="p">]);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="identity-portfolio-dashboard">Identity Portfolio Dashboard<a class="headerlink" href="#identity-portfolio-dashboard" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">// Get complete user identity information</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">getUserIdentityInfo</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">user</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nv">hasIdentity</span><span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">identityContract</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>claims<span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nv">isKYCVerified</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nv">isAccredited</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>hasIdentity<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>contains<span class="p">(</span>user<span class="p">);</span>

<span class="w">    </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>hasIdentity<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>identityContract<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>identity<span class="p">(</span>user<span class="p">);</span>
<span class="w">        </span>claims<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>getClaims<span class="p">(</span>user<span class="p">);</span>
<span class="w">        </span>isKYCVerified<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>hasClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>KYC_TOPIC<span class="p">);</span>
<span class="w">        </span>isAccredited<span class="w"> </span><span class="o">=</span><span class="w"> </span>IIdentityRegistry<span class="p">(</span>diamond<span class="p">).</span>hasClaim<span class="p">(</span>user<span class="p">,</span><span class="w"> </span>ACCREDITED_TOPIC<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h2>
<h3 id="identity-events">Identity Events<a class="headerlink" href="#identity-events" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">event</span><span class="w"> </span><span class="nv">IdentityAdded</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>user<span class="p">,</span><span class="w"> </span>IIdentity<span class="w"> </span>indexed<span class="w"> </span>identity<span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">IdentityRemoved</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>user<span class="p">,</span><span class="w"> </span>IIdentity<span class="w"> </span>indexed<span class="w"> </span>identity<span class="p">);</span>
</code></pre></div>

<h3 id="claim-events">Claim Events<a class="headerlink" href="#claim-events" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kt">event</span><span class="w"> </span><span class="nv">ClaimAdded</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>identity<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>claimTopic<span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">claimData</span><span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">ClaimRemoved</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>identity<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>claimTopic<span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">ClaimsSet</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>identity<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span>claimTopics<span class="p">);</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">ClaimsRemoved</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>issuer<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>identity<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span>claimTopics<span class="p">);</span>
</code></pre></div>

<h2 id="security-considerations">Security Considerations<a class="headerlink" href="#security-considerations" title="Permanent link">&para;</a></h2>
<h3 id="access-control">Access Control<a class="headerlink" href="#access-control" title="Permanent link">&para;</a></h3>
<ul>
<li>Multi-level trusted issuer system prevents unauthorized identity management</li>
<li>Topic-specific permissions ensure issuers can only manage authorized claim types</li>
<li>Identity ownership validation prevents unauthorized claim modifications</li>
</ul>
<h3 id="data-integrity">Data Integrity<a class="headerlink" href="#data-integrity" title="Permanent link">&para;</a></h3>
<ul>
<li>Diamond storage pattern prevents storage collisions</li>
<li>Comprehensive validation ensures data consistency</li>
<li>Event logging provides complete audit trail</li>
</ul>
<h3 id="privacy-compliance">Privacy &amp; Compliance<a class="headerlink" href="#privacy-compliance" title="Permanent link">&para;</a></h3>
<ul>
<li>Claims-based system supports privacy-preserving verification</li>
<li>Flexible claim topics support various compliance requirements</li>
<li>Immutable blockchain records provide audit trail</li>
</ul>
<h2 id="gas-optimization">Gas Optimization<a class="headerlink" href="#gas-optimization" title="Permanent link">&para;</a></h2>
<h3 id="batch-operations">Batch Operations<a class="headerlink" href="#batch-operations" title="Permanent link">&para;</a></h3>
<ul>
<li><code>batchAddIdentity()</code> for efficient bulk registration</li>
<li><code>setClaims()</code> and <code>unsetClaims()</code> for bulk claim management</li>
<li>Optimized array operations using swap-and-pop</li>
</ul>
<h3 id="storage-efficiency">Storage Efficiency<a class="headerlink" href="#storage-efficiency" title="Permanent link">&para;</a></h3>
<ul>
<li>Efficient mapping structures in IdentitySystemStorage</li>
<li>Minimal storage footprint per identity</li>
<li>Optimized for frequent read operations</li>
</ul>
<h2 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<h3 id="identity-errors">Identity Errors<a class="headerlink" href="#identity-errors" title="Permanent link">&para;</a></h3>
<ul>
<li><code>"Invalid identity address"</code> - Zero address provided</li>
<li><code>"Identity already exists"</code> - Duplicate registration attempt</li>
<li><code>"Identity does not exist"</code> - Operation on non-existent identity</li>
</ul>
<h3 id="claim-errors">Claim Errors<a class="headerlink" href="#claim-errors" title="Permanent link">&para;</a></h3>
<ul>
<li><code>"Claim already exists"</code> - Duplicate claim addition</li>
<li><code>"Claim does not exist"</code> - Operation on non-existent claim</li>
<li><code>"Cannot set claims for self"</code> - Self-claim prevention</li>
</ul>
<h3 id="authorization-errors">Authorization Errors<a class="headerlink" href="#authorization-errors" title="Permanent link">&para;</a></h3>
<ul>
<li><code>"Not trusted issuer"</code> - Unauthorized issuer access</li>
<li><code>"Issuer not authorized for claim topic"</code> - Topic-specific authorization failure</li>
<li><code>"Arrays length mismatch"</code> - Batch operation parameter mismatch</li>
</ul>
<h2 id="testing-considerations">Testing Considerations<a class="headerlink" href="#testing-considerations" title="Permanent link">&para;</a></h2>
<h3 id="unit-tests">Unit Tests<a class="headerlink" href="#unit-tests" title="Permanent link">&para;</a></h3>
<ul>
<li>Identity registration and removal</li>
<li>Claim addition, removal, and querying</li>
<li>Access control validation</li>
<li>Batch operation efficiency</li>
</ul>
<h3 id="integration-tests">Integration Tests<a class="headerlink" href="#integration-tests" title="Permanent link">&para;</a></h3>
<ul>
<li>Multi-facet identity workflows</li>
<li>KYC/compliance integration</li>
<li>Access control integration</li>
<li>Event emission verification</li>
</ul>
<h2 id="related-documentation">Related Documentation<a class="headerlink" href="#related-documentation" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../interfaces/iidentity-registry.md">IIdentityRegistry</a> - Identity registry interface</li>
<li><a href="../libraries/identity-system-storage.md">IdentitySystemStorage</a> - Storage library</li>
<li><a href="../trusted-issuers-registry-facet/">TrustedIssuersRegistryFacet</a> - Trusted issuer management</li>
<li><a href="../../../eips/EIP-DRAFT-Enhanced-Identity-System/">EIP-DRAFT-Enhanced-Identity-System</a> - EIP specification</li>
<li><a href="../../guides/identity-integration.md">Identity Integration Guide</a> - Implementation guide</li>
</ul>
<hr />
<p><em>This facet implements the Enhanced Identity System as defined in the Gemforce EIP suite, providing comprehensive decentralized identity management with claims-based verification.</em></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../carbon-credit-facet/" class="btn btn-neutral float-left" title="Carbon Credit Facet"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../trusted-issuers-registry-facet/" class="btn btn-neutral float-right" title="Trusted Issuers Registry Facet">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../carbon-credit-facet/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../trusted-issuers-registry-facet/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
